var config={apiRoot:"http://t-avihavai.users.cs.helsinki.fi/cb-back/app/"};$(document).ready(function(){codebrowser.initialize()});var codebrowser={models:{},collections:{},routers:{},initialize:function(){codebrowser.snapshot=new codebrowser.routers.SnapshotRouter,Backbone.history.start()}};codebrowser.models.File=Backbone.RelationalModel.extend({urlRoot:function(){return config.apiRoot+"students/1/courses/2/exercises/3/snapshots/"+this.get("snapshot").id+"/files"},fetchFile:function(e){$.get(this.urlRoot()+"/"+this.id,function(o){e(o)},"text")}}),codebrowser.models.Snapshot=Backbone.RelationalModel.extend({urlRoot:config.apiRoot+"students/1/courses/2/exercises/3/snapshots",relations:[{type:Backbone.HasMany,key:"files",relatedModel:"codebrowser.models.File",collectionType:"codebrowser.collections.Files",reverseRelation:{key:"snapshot"}}]}),codebrowser.models.Student=Backbone.Model.extend({urlRoot:config.apiRoot+"students"}),codebrowser.collections.Files=Backbone.Collection.extend({model:codebrowser.models.File,url:function(){return config.apiRoot+"students/1/courses/2/exercises/3/snapshots/"+this.get("snapshot").id+"/files"}}),codebrowser.routers.SnapshotRouter=Backbone.Router.extend({routes:{"snapshots/:id":"getSnapshot"},getSnapshot:function(e){var o=new codebrowser.models.Snapshot({id:e});o.fetch({success:function(){console.log("Received data from backend..."),console.log(o);var e=$("#snapshot-template").html(),s=Mustache.render(e,{data:"Test"});$("#container").html(s),console.log("Done.")},error:function(){console.log("Request failed.")}})}});