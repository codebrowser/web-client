this.Handlebars=this.Handlebars||{},this.Handlebars.templates=this.Handlebars.templates||{},this.Handlebars.templates.CommentsContainer=Handlebars.template(function(a,b,c,d,e){function f(){return"\n\n        <ul class='breadcrumb'>\n\n            <li><a href='./'>Home</a> <span class='divider'>/</span></li>\n\n            <li class='active'>Comments</li>\n\n        </ul>\n\n    "}function g(a,b){var d,e="";return e+=' — Search results for "',(d=c.query)?d=d.call(a,{hash:{},data:b}):(d=a&&a.query,d=typeof d===B?d.call(a,{hash:{},data:b}):d),e+=C(d)+'"'}function h(a,b){var d,e="";return e+="\n            ",d=c["if"].call(a,a&&a.snapshotView,{hash:{},inverse:D.program(8,j,b),fn:D.program(6,i,b),data:b}),(d||0===d)&&(e+=d),e+="\n        "}function i(){return"\n                <span class='prev'> << prev </span>\n            "}function j(a,b){var d,e="";return e+="\n                <span class='cprev' href='./#/comments?page=",(d=c.prevPage)?d=d.call(a,{hash:{},data:b}):(d=a&&a.prevPage,d=typeof d===B?d.call(a,{hash:{},data:b}):d),e+=C(d)+"'> << prev </span>\n            "}function k(a,b){var d,e="";return e+="\n            ",d=c["if"].call(a,a&&a.snapshotView,{hash:{},inverse:D.program(13,m,b),fn:D.program(11,l,b),data:b}),(d||0===d)&&(e+=d),e+="\n        "}function l(){return"\n                <span class='next'> next >> </span>\n            "}function m(a,b){var d,e="";return e+="\n                <span class='cnext' href='./#/comments?page=",(d=c.nextPage)?d=d.call(a,{hash:{},data:b}):(d=a&&a.nextPage,d=typeof d===B?d.call(a,{hash:{},data:b}):d),e+=C(d)+"'> next >> </span>\n            "}function n(a,b){var d,e="";return e+="\n            <span class='pull-right'> Page ",(d=c.page)?d=d.call(a,{hash:{},data:b}):(d=a&&a.page,d=typeof d===B?d.call(a,{hash:{},data:b}):d),e+=C(d)+" of ",(d=c.totalPages)?d=d.call(a,{hash:{},data:b}):(d=a&&a.totalPages,d=typeof d===B?d.call(a,{hash:{},data:b}):d),e+=C(d)+" Pages </span>\n        "}function o(a,b){var d,e,f,g="";return g+="\n\n        ",d=c["if"].call(a,a&&a.isRead,{hash:{},inverse:D.program(20,q,b),fn:D.program(18,p,b),data:b}),(d||0===d)&&(g+=d),g+="\n\n\n            <h3>\n                <strong>",(d=c.username)?d=d.call(a,{hash:{},data:b}):(d=a&&a.username,d=typeof d===B?d.call(a,{hash:{},data:b}):d),g+=C(d)+"</strong>\n                <span class='pull-right'>\n                    ",f={hash:{},inverse:D.noop,fn:D.program(22,r,b),data:b},d=c.date||a&&a.date,e=d?d.call(a,a&&a.createdAt,f):E.call(a,"date",a&&a.createdAt,f),(e||0===e)&&(g+=e),g+="\n                </span>\n            </h3>\n\n\n            <p class='comment-text' data-action='toggle-comment-edit' data-id='",(e=c.id)?e=e.call(a,{hash:{},data:b}):(e=a&&a.id,e=typeof e===B?e.call(a,{hash:{},data:b}):e),g+=C(e)+"'>\n\n                ",f={hash:{},data:b},g+=C((d=c.breaklines||a&&a.breaklines,d?d.call(a,a&&a.comment,f):E.call(a,"breaklines",a&&a.comment,f)))+"\n\n            </p>\n\n            <p class='comment-controls'>\n\n                ",e=c["if"].call(a,a&&a.snapshot,{hash:{},inverse:D.program(26,t,b),fn:D.program(24,s,b),data:b}),(e||0===e)&&(g+=e),g+="\n\n                <span class='pull-right'>\n\n                    <button class='btn btn-mini' data-action='toggle-comment-edit' data-id='",(e=c.id)?e=e.call(a,{hash:{},data:b}):(e=a&&a.id,e=typeof e===B?e.call(a,{hash:{},data:b}):e),g+=C(e)+"' data-toggle='tooltip' title='Edit this comment'>\n                        <i class='icon-edit icon-gray'> </i>\n                    </button>\n\n                    <button class='btn btn-mini' data-action='delete-comment' data-id='",(e=c.id)?e=e.call(a,{hash:{},data:b}):(e=a&&a.id,e=typeof e===B?e.call(a,{hash:{},data:b}):e),g+=C(e)+"' data-toggle='tooltip' title='Delete this comment'>\n                        <i class='icon-remove icon-gray'> </i>\n                    </button>\n\n                </span>\n            </p>\n\n\n\n        </article>\n\n    "}function p(){return"\n            <article>\n        "}function q(){return"\n            <article class='new'>\n        "}function r(){var a="";return a}function s(a){var b,c="";return c+="\n\n                      <a href='./#/students/"+C((b=a&&a.student,b=null==b||b===!1?b:b.id,typeof b===B?b.apply(a):b))+"/courses/"+C((b=a&&a.course,b=null==b||b===!1?b:b.id,typeof b===B?b.apply(a):b))+"/exercises/"+C((b=a&&a.exercise,b=null==b||b===!1?b:b.id,typeof b===B?b.apply(a):b))+"/snapshots/"+C((b=a&&a.snapshot,b=null==b||b===!1?b:b.id,typeof b===B?b.apply(a):b))+"'>\n                          <i class='icon-snapshot icon-gray icon-intext'></i> "+C((b=a&&a.course,b=null==b||b===!1?b:b.name,typeof b===B?b.apply(a):b))+" / "+C((b=a&&a.exercise,b=null==b||b===!1?b:b.name,typeof b===B?b.apply(a):b))+"\n                      </a>\n\n                  "}function t(a){var b,c="";return c+="\n\n                      <a href='./#/students/"+C((b=a&&a.student,b=null==b||b===!1?b:b.id,typeof b===B?b.apply(a):b))+"/courses/"+C((b=a&&a.course,b=null==b||b===!1?b:b.id,typeof b===B?b.apply(a):b))+"/exercises/"+C((b=a&&a.exercise,b=null==b||b===!1?b:b.id,typeof b===B?b.apply(a):b))+"'>\n                          <i class='icon-answer icon-gray icon-intext'/> "+C((b=a&&a.course,b=null==b||b===!1?b:b.name,typeof b===B?b.apply(a):b))+" / "+C((b=a&&a.exercise,b=null==b||b===!1?b:b.name,typeof b===B?b.apply(a):b))+"\n                      </a>\n\n                "}function u(a,b){var d,e="";return e+="\n            ",d=c["if"].call(a,a&&a.snapshotView,{hash:{},inverse:D.program(29,v,b),fn:D.program(6,i,b),data:b}),(d||0===d)&&(e+=d),e+="\n        "}function v(){return"\n                <span class='cprev'> << prev </span>\n            "}function w(a,b){var d,e="";return e+="\n            ",d=c["if"].call(a,a&&a.snapshotView,{hash:{},inverse:D.program(32,x,b),fn:D.program(11,l,b),data:b}),(d||0===d)&&(e+=d),e+="\n        "}function x(){return"\n                <span class='cnext'> next >> </span>\n            "}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var y,z,A="",B="function",C=this.escapeExpression,D=this,E=c.helperMissing,F=c.blockHelperMissing;return A+="<section>\n\n    ",y=c["if"].call(b,b&&b.showBreadcrumb,{hash:{},inverse:D.noop,fn:D.program(1,f,e),data:e}),(y||0===y)&&(A+=y),A+="\n\n    <div>\n        <h2>\n            Comments",y=c["if"].call(b,b&&b.query,{hash:{},inverse:D.noop,fn:D.program(3,g,e),data:e}),(y||0===y)&&(A+=y),A+=" (",(y=c.totalElements)?y=y.call(b,{hash:{},data:e}):(y=b&&b.totalElements,y=typeof y===B?y.call(b,{hash:{},data:e}):y),A+=C(y)+')\n\n            <span class="pull-right">\n                <div class="input-append">\n                    <form>\n                        <input type="text" class="span2" placeholder="Search" data-id="query-string" />\n                        <button type="submit" class="btn" data-action="search" title="Search text in comments">\n                            <i class="icon-search"></i>\n                        </button>\n                    </form>\n                </div>\n            </span>\n        </h2>\n    </div>\n\n    <div class = \'pagination\'>\n\n        ',y=c.unless.call(b,b&&b.firstPage,{hash:{},inverse:D.noop,fn:D.program(5,h,e),data:e}),(y||0===y)&&(A+=y),A+="\n\n        ",y=c.unless.call(b,b&&b.lastPage,{hash:{},inverse:D.noop,fn:D.program(10,k,e),data:e}),(y||0===y)&&(A+=y),A+="\n\n        ",y=c.unless.call(b,b&&b.onlyOnePage,{hash:{},inverse:D.noop,fn:D.program(15,n,e),data:e}),(y||0===y)&&(A+=y),A+="\n\n    </div>\n\n    ",z={hash:{},inverse:D.noop,fn:D.program(17,o,e),data:e},(y=c.comments)?y=y.call(b,z):(y=b&&b.comments,y=typeof y===B?y.call(b,z):y),c.comments||(y=F.call(b,y,z)),(y||0===y)&&(A+=y),A+="\n\n    <div class = 'pagination'>\n\n        ",y=c.unless.call(b,b&&b.firstPage,{hash:{},inverse:D.noop,fn:D.program(28,u,e),data:e}),(y||0===y)&&(A+=y),A+="\n\n        ",y=c.unless.call(b,b&&b.lastPage,{hash:{},inverse:D.noop,fn:D.program(31,w,e),data:e}),(y||0===y)&&(A+=y),A+="\n\n        ",y=c.unless.call(b,b&&b.onlyOnePage,{hash:{},inverse:D.noop,fn:D.program(15,n,e),data:e}),(y||0===y)&&(A+=y),A+="\n\n    </div>\n\n</section>\n"}),this.Handlebars.templates.CoursesContainer=Handlebars.template(function(a,b,c,d,e){function f(a,b){var d,e="";return e+="\n            <li><a href='./#/students'>Students</a> <span class='divider'>/</span></li>\n            <li><a href='./#/students/",(d=c.studentId)?d=d.call(a,{hash:{},data:b}):(d=a&&a.studentId,d=typeof d===q?d.call(a,{hash:{},data:b}):d),e+=r(d)+"'>"+r((d=a&&a.student,d=null==d||d===!1?d:d.name,typeof d===q?d.apply(a):d))+"</a> <span class='divider'>/</span></li>\n        "}function g(a){var b,c="";return c+=" "+r((b=a&&a.student,b=null==b||b===!1?b:b.name,typeof b===q?b.apply(a):b))+" — "}function h(){return"<th>Students</th>"}function i(a,b,d){var e,f,g,h="";return h+="\n\n                <tr>\n\n                    <td class='index'>",g={hash:{},data:b},h+=r((e=c.index||a&&a.index,e?e.call(a,(e=b,null==e||e===!1?e:e.index),g):s.call(a,"index",(e=b,null==e||e===!1?e:e.index),g)))+"</td>\n\n                    ",f=c["if"].call(a,d&&d.studentId,{hash:{},inverse:t.program(10,k,b),fn:t.programWithDepth(8,j,b,d),data:b}),(f||0===f)&&(h+=f),h+="\n\n                    <td>"+r((e=a&&a.exercises,e=null==e||e===!1?e:e.length,typeof e===q?e.apply(a):e))+"</td>\n\n                    <td>",f=c.unless.call(a,d&&d.studentId,{hash:{},inverse:t.noop,fn:t.program(12,l,b),data:b}),(f||0===f)&&(h+=f),h+="</td>\n\n                </tr>\n\n            "}function j(a,b,d){var e,f,g="";return g+="\n\n                        <td class='link'><a href='./#/students/"+r((e=d&&d.studentId,typeof e===q?e.apply(a):e))+"/courses/",(f=c.id)?f=f.call(a,{hash:{},data:b}):(f=a&&a.id,f=typeof f===q?f.call(a,{hash:{},data:b}):f),g+=r(f)+"/exercises'>",(f=c.name)?f=f.call(a,{hash:{},data:b}):(f=a&&a.name,f=typeof f===q?f.call(a,{hash:{},data:b}):f),g+=r(f)+"</a></td>\n\n                    "}function k(a,b){var d,e="";return e+="\n\n                        <td class='link'><a href='./#/courses/",(d=c.id)?d=d.call(a,{hash:{},data:b}):(d=a&&a.id,d=typeof d===q?d.call(a,{hash:{},data:b}):d),e+=r(d)+"/'>",(d=c.name)?d=d.call(a,{hash:{},data:b}):(d=a&&a.name,d=typeof d===q?d.call(a,{hash:{},data:b}):d),e+=r(d)+"</a></td>\n\n                    "}function l(a,b){var d;return(d=c.amountOfStudents)?d=d.call(a,{hash:{},data:b}):(d=a&&a.amountOfStudents,d=typeof d===q?d.call(a,{hash:{},data:b}):d),r(d)}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var m,n,o,p="",q="function",r=this.escapeExpression,s=c.helperMissing,t=this,u=c.blockHelperMissing;return p+="<section>\n\n    <ul class='breadcrumb'>\n\n        <li><a href='./'>Home</a> <span class='divider'>/</span></li>\n\n        ",m=c["if"].call(b,b&&b.studentId,{hash:{},inverse:t.noop,fn:t.program(1,f,e),data:e}),(m||0===m)&&(p+=m),p+="\n\n        <li class='active'>Courses</li>\n\n    </ul>\n\n    <h2>\n        ",m=c["if"].call(b,b&&b.studentId,{hash:{},inverse:t.noop,fn:t.program(3,g,e),data:e}),(m||0===m)&&(p+=m),p+=" Courses ("+r((m=b&&b.courses,m=null==m||m===!1?m:m.length,typeof m===q?m.apply(b):m))+')\n\n        <span class="pull-right">\n            <div class="input-append">\n                <input type="text" class="span2" placeholder="Search" data-id="query-string" />\n                <button class="btn" data-action="search" title="Search for courses">\n                    <i class="icon-search"></i>\n                </button>\n            </div>\n        </span>\n\n    </h2>\n\n    <table class=\'table table-hover\'>\n\n        <thead>\n            <tr>\n                <th>#</th>\n                <th>Name</th>\n                <th>Exercises</th>\n                ',n=c.unless.call(b,b&&b.studentId,{hash:{},inverse:t.noop,fn:t.program(5,h,e),data:e}),(n||0===n)&&(p+=n),p+="\n            </tr>\n        </thead>\n\n        <tbody>\n\n            ",o={hash:{},inverse:t.noop,fn:t.programWithDepth(7,i,e,b),data:e},(n=c.courses)?n=n.call(b,o):(n=b&&b.courses,n=typeof n===q?n.call(b,o):n),c.courses||(n=u.call(b,n,o)),(n||0===n)&&(p+=n),p+="\n\n        </tbody>\n\n    </table>\n\n</section>\n"}),this.Handlebars.templates.EditorSettingsContainer=Handlebars.template(function(a,b,c,d,e){return this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{},"<footer>\n\n    <a href='#editor-settings' data-toggle='modal' class='pull-right'><i class='icon-wrench icon-gray' title='Change code view settings'></i></a>\n\n    <div id='editor-settings' class='modal hide fade' tabindex='-1' data-backdrop='false'>\n\n        <div class='modal-header'>\n\n            <header>\n\n                <button type='button' class='close' data-dismiss='modal' title='Close the settings dialog without saving any changes'>×</button>\n\n                <h1>Code viewer settings</h1>\n\n            </header>\n\n        </div>\n\n        <div class='modal-body'>\n\n            <form class='form-horizontal'>\n\n                <fieldset>\n\n                    <div class='control-group'>\n\n                        <label class='checkbox'>\n                            <input type='checkbox' data-id='ignore-empty-lines' title='Ignore empty lines when calculating differences between two snapshots' checked> Ignore empty lines (improves diff results)\n                        </label>\n\n                    </div>\n\n                    <div class='control-group'>\n\n                        <label class='control-label' for='theme'>Theme</label>\n\n                        <div class='controls'>\n\n                            <select data-id='theme' title='Choose the color scheme for the code viewer'>\n                                <option value='ace/theme/light'>Light</option>\n                                <option value='ace/theme/dark'>Dark</option>\n                            </select>\n\n                        </div>\n\n                    </div>\n\n                    <div class='control-group'>\n\n                        <label class='control-label' for='font-size'>Font size</label>\n\n                        <div class='controls'>\n\n                            <select data-id='font-size' title='Choose the font size for the code viewer'>\n                                <option value='11'>Small</option>\n                                <option value='12' selected>Normal</option>\n                                <option value='13'>Larger</option>\n                                <option value='14'>Large</option>\n                                <option value='15'>Extra Large</option>\n                            </select>\n\n                        </div>\n\n                </fieldset>\n\n            </form>\n\n        </div>\n\n        <div class='modal-footer'>\n\n            <button class='btn' data-dismiss='modal' title='Close the settings dialog without saving any changes'>Cancel</button>\n            <button data-action='save' class='btn btn-primary' data-dismiss='modal' title='Apply new settings and close the dialog'>Save</button>\n\n        </div>\n\n</footer>\n"}),this.Handlebars.templates.EditorTopContainer=Handlebars.template(function(a,b,c,d,e){function f(){return"\n\n        <section class='split'>\n\n            <div class='previous'><span>Previous</span></div>\n            <div class='current'><span>Current</span></div>\n\n        </section>\n\n    "}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var g,h,i,j="",k=c.helperMissing,l=this.escapeExpression,m="function",n=this;return j+="<header>\n\n    <section>\n\n        <h1>",i={hash:{},data:e},j+=l((g=c.filename||b&&b.filename,g?g.call(b,b&&b.name,i):k.call(b,"filename",b&&b.name,i)))+"</h1>\n\n        <span class='pull-right'>\n\n            + ",i={hash:{},data:e},j+=l((g=c.duration||b&&b.duration,g?g.call(b,(g=b&&b.snapshot,null==g||g===!1?g:g.snapshotTime),(g=b&&b.previous,g=null==g||g===!1?g:g.snapshot,null==g||g===!1?g:g.snapshotTime),i):k.call(b,"duration",(g=b&&b.snapshot,null==g||g===!1?g:g.snapshotTime),(g=b&&b.previous,g=null==g||g===!1?g:g.snapshot,null==g||g===!1?g:g.snapshotTime),i)))+"\n\n            <a id='editor-inspector' href='#' data-toggle='popover' data-placement='bottom'\n\n               data-original-title='\n\n                    <time>",i={hash:{},data:e},j+=l((g=c.date||b&&b.date,g?g.call(b,(g=b&&b.previous,g=null==g||g===!1?g:g.snapshot,null==g||g===!1?g:g.snapshotTime),i):k.call(b,"date",(g=b&&b.previous,g=null==g||g===!1?g:g.snapshot,null==g||g===!1?g:g.snapshotTime),i)))+"</time>\n                    <time>",i={hash:{},data:e},j+=l((g=c.date||b&&b.date,g?g.call(b,(g=b&&b.snapshot,null==g||g===!1?g:g.snapshotTime),i):k.call(b,"date",(g=b&&b.snapshot,null==g||g===!1?g:g.snapshotTime),i)))+"</time>\n\n               '\n\n               data-content='\n\n                <dl class=\"dl-horizontal pull-left\">\n\n                  <dt>Change</dt>\n                  <dd>",(h=c.percentageOfChange)?h=h.call(b,{hash:{},data:e}):(h=b&&b.percentageOfChange,h=typeof h===m?h.call(b,{hash:{},data:e}):h),j+=l(h)+" %</dd>\n\n                  <dt>Insert</dt>\n                  <dd>"+l((g=b&&b.difference,g=null==g||g===!1?g:g.insert,typeof g===m?g.apply(b):g))+" ",i={hash:{},data:e},j+=l((g=c.pluralize||b&&b.pluralize,g?g.call(b,(g=b&&b.difference,null==g||g===!1?g:g.insert),"line",i):k.call(b,"pluralize",(g=b&&b.difference,null==g||g===!1?g:g.insert),"line",i)))+"</dd>\n\n                  <dt>Modify</dt>\n                  <dd>"+l((g=b&&b.difference,g=null==g||g===!1?g:g.replace,typeof g===m?g.apply(b):g))+" ",i={hash:{},data:e},j+=l((g=c.pluralize||b&&b.pluralize,g?g.call(b,(g=b&&b.difference,null==g||g===!1?g:g.replace),"line",i):k.call(b,"pluralize",(g=b&&b.difference,null==g||g===!1?g:g.replace),"line",i)))+"</dd>\n\n                  <dt>Delete</dt>\n                  <dd>"+l((g=b&&b.difference,g=null==g||g===!1?g:g["delete"],typeof g===m?g.apply(b):g))+" ",i={hash:{},data:e},j+=l((g=c.pluralize||b&&b.pluralize,g?g.call(b,(g=b&&b.difference,null==g||g===!1?g:g["delete"]),"line",i):k.call(b,"pluralize",(g=b&&b.difference,null==g||g===!1?g:g["delete"]),"line",i)))+"</dd>\n\n                </dl>\n\n            '><i class='icon-info-sign icon-gray' title='Show snapshot statistics'></i></a>\n\n        </span>\n\n    </section>\n\n    ",h=c["if"].call(b,b&&b.split,{hash:{},inverse:n.noop,fn:n.program(1,f,e),data:e}),(h||0===h)&&(j+=h),j+="\n\n</header>\n"}),this.Handlebars.templates.Error=Handlebars.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f,g="",h="function",i=this.escapeExpression;return g+="<p class='alert ",(f=c["class"])?f=f.call(b,{hash:{},data:e}):(f=b&&b["class"],f=typeof f===h?f.call(b,{hash:{},data:e}):f),g+=i(f)+"'>",(f=c.message)?f=f.call(b,{hash:{},data:e}):(f=b&&b.message,f=typeof f===h?f.call(b,{hash:{},data:e}):f),g+=i(f)+"</p>\n"}),this.Handlebars.templates.ExercisesContainer=Handlebars.template(function(a,b,c,d,e){function f(a,b){var d,e="";return e+="\n            ",d=c["if"].call(a,a&&a.courseId,{hash:{},inverse:x.noop,fn:x.program(2,g,b),data:b}),(d||0===d)&&(e+=d),e+="\n            ",d=c["if"].call(a,a&&a.studentId,{hash:{},inverse:x.noop,fn:x.program(4,h,b),data:b}),(d||0===d)&&(e+=d),e+="\n\n        "}function g(a,b){var d,e="";return e+="\n                <li><a href='./#/courses/'>Courses</a> <span class='divider'>/</span></li>\n                <li><a href='./#/courses/",(d=c.courseId)?d=d.call(a,{hash:{},data:b}):(d=a&&a.courseId,d=typeof d===v?d.call(a,{hash:{},data:b}):d),e+=w(d)+"'>"+w((d=a&&a.course,d=null==d||d===!1?d:d.name,typeof d===v?d.apply(a):d))+"</a> <span class='divider'>/</span></li>\n            "}function h(a,b){var d,e="";return e+="\n                <li><a href='./#/courses/",(d=c.courseId)?d=d.call(a,{hash:{},data:b}):(d=a&&a.courseId,d=typeof d===v?d.call(a,{hash:{},data:b}):d),e+=w(d)+"/students/'>Students</a> <span class='divider'>/</span></li>\n                <li><a href='./#/courses/",(d=c.courseId)?d=d.call(a,{hash:{},data:b}):(d=a&&a.courseId,d=typeof d===v?d.call(a,{hash:{},data:b}):d),e+=w(d)+"/students/",(d=c.studentId)?d=d.call(a,{hash:{},data:b}):(d=a&&a.studentId,d=typeof d===v?d.call(a,{hash:{},data:b}):d),e+=w(d)+"/'>"+w((d=a&&a.student,d=null==d||d===!1?d:d.name,typeof d===v?d.apply(a):d))+"</a> <span class='divider'>/</span></li>\n            "}function i(a,b){var d,e="";return e+="\n\n            ",d=c["if"].call(a,a&&a.studentId,{hash:{},inverse:x.noop,fn:x.program(7,j,b),data:b}),(d||0===d)&&(e+=d),e+="\n\n            <li><a href='./#/",d=c["if"].call(a,a&&a.studentId,{hash:{},inverse:x.noop,fn:x.program(9,k,b),data:b}),(d||0===d)&&(e+=d),e+="courses'>Courses</a> <span class='divider'>/</span></li>\n            <li><a href='./#/",d=c["if"].call(a,a&&a.studentId,{hash:{},inverse:x.noop,fn:x.program(9,k,b),data:b}),(d||0===d)&&(e+=d),e+="courses/",(d=c.courseId)?d=d.call(a,{hash:{},data:b}):(d=a&&a.courseId,d=typeof d===v?d.call(a,{hash:{},data:b}):d),e+=w(d)+"'>"+w((d=a&&a.course,d=null==d||d===!1?d:d.name,typeof d===v?d.apply(a):d))+"</a> <span class='divider'>/</span></li>\n\n        "}function j(a,b){var d,e="";return e+="\n                <li><a href='./#/students'>Students</a> <span class='divider'>/</span></li>\n                <li><a href='./#/students/",(d=c.studentId)?d=d.call(a,{hash:{},data:b}):(d=a&&a.studentId,d=typeof d===v?d.call(a,{hash:{},data:b}):d),e+=w(d)+"'>"+w((d=a&&a.student,d=null==d||d===!1?d:d.name,typeof d===v?d.apply(a):d))+"</a> <span class='divider'>/</span></li>\n            "}function k(a,b){var d,e="";return e+="students/",(d=c.studentId)?d=d.call(a,{hash:{},data:b}):(d=a&&a.studentId,d=typeof d===v?d.call(a,{hash:{},data:b}):d),e+=w(d)+"/"}function l(a){var b,c="";return c+=" "+w((b=a&&a.student,b=null==b||b===!1?b:b.name,typeof b===v?b.apply(a):b))+" — "}function m(a,b,d){var e,f,g,h="";return h+="\n\n                <tr>\n\n                    <td class='index'>",g={hash:{},data:b},h+=w((e=c.index||a&&a.index,e?e.call(a,(e=b,null==e||e===!1?e:e.index),g):y.call(a,"index",(e=b,null==e||e===!1?e:e.index),g)))+"</td>\n\n                    ",f=c["if"].call(a,d&&d.studentId,{hash:{},inverse:x.programWithDepth(19,q,b,d),fn:x.programWithDepth(14,n,b,d),data:b}),(f||0===f)&&(h+=f),h+="\n\n                </tr>\n\n            "}function n(a,b,d){var e,f="";return f+="\n\n                        ",e=c["if"].call(a,d&&d.viewPath,{hash:{},inverse:x.programWithDepth(17,p,b,d),fn:x.programWithDepth(15,o,b,d),data:b}),(e||0===e)&&(f+=e),f+="\n\n                    "}function o(a,b,d){var e,f,g="";return g+="\n\n                            <td class='link'><a href='./#/courses/"+w((e=d&&d.courseId,typeof e===v?e.apply(a):e))+"/students/"+w((e=d&&d.studentId,typeof e===v?e.apply(a):e))+"/exercises/",(f=c.id)?f=f.call(a,{hash:{},data:b}):(f=a&&a.id,f=typeof f===v?f.call(a,{hash:{},data:b}):f),g+=w(f)+"/snapshots'>",(f=c.name)?f=f.call(a,{hash:{},data:b}):(f=a&&a.name,f=typeof f===v?f.call(a,{hash:{},data:b}):f),g+=w(f)+"</a></td>\n\n                        "}function p(a,b,d){var e,f,g="";return g+="\n\n                            <td class='link'><a href='./#/students/"+w((e=d&&d.studentId,typeof e===v?e.apply(a):e))+"/courses/"+w((e=d&&d.courseId,typeof e===v?e.apply(a):e))+"/exercises/",(f=c.id)?f=f.call(a,{hash:{},data:b}):(f=a&&a.id,f=typeof f===v?f.call(a,{hash:{},data:b}):f),g+=w(f)+"/snapshots'>",(f=c.name)?f=f.call(a,{hash:{},data:b}):(f=a&&a.name,f=typeof f===v?f.call(a,{hash:{},data:b}):f),g+=w(f)+"</a></td>\n\n                        "}function q(a,b,d){var e,f,g="";return g+="\n\n                        <td class='link'><a href='./#/courses/"+w((e=d&&d.courseId,typeof e===v?e.apply(a):e))+"/exercises/",(f=c.id)?f=f.call(a,{hash:{},data:b}):(f=a&&a.id,f=typeof f===v?f.call(a,{hash:{},data:b}):f),g+=w(f)+"/students'>",(f=c.name)?f=f.call(a,{hash:{},data:b}):(f=a&&a.name,f=typeof f===v?f.call(a,{hash:{},data:b}):f),g+=w(f)+"</a></td>\n\n                    "}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var r,s,t,u="",v="function",w=this.escapeExpression,x=this,y=c.helperMissing,z=c.blockHelperMissing;return u+="<section>\n\n    <ul class='breadcrumb'>\n\n        <li><a href='./'>Home</a> <span class='divider'>/</span></li>\n        ",r=c["if"].call(b,b&&b.viewPath,{hash:{},inverse:x.program(6,i,e),fn:x.program(1,f,e),data:e}),(r||0===r)&&(u+=r),u+="\n        <li class='active'>Exercises</li>\n\n    </ul>\n\n    <h2>",r=c["if"].call(b,b&&b.studentId,{hash:{},inverse:x.noop,fn:x.program(11,l,e),data:e}),(r||0===r)&&(u+=r),u+=" "+w((r=b&&b.course,r=null==r||r===!1?r:r.name,typeof r===v?r.apply(b):r))+" — Exercises ("+w((r=b&&b.exercises,r=null==r||r===!1?r:r.length,typeof r===v?r.apply(b):r))+")</h2>\n\n    <table class='table table-hover'>\n\n        <thead>\n            <tr>\n                <th>#</th>\n                <th>Name</th>\n            </tr>\n        </thead>\n\n        <tbody>\n\n            ",t={hash:{},inverse:x.noop,fn:x.programWithDepth(13,m,e,b),data:e},(s=c.exercises)?s=s.call(b,t):(s=b&&b.exercises,s=typeof s===v?s.call(b,t):s),c.exercises||(s=z.call(b,s,t)),(s||0===s)&&(u+=s),u+="\n\n        </tbody>\n\n    </table>\n\n</section>\n"}),this.Handlebars.templates.Footer=Handlebars.template(function(a,b,c,d,e){return this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{},'<i id="settingsModalButton" class="icon-wrench icon-gray pull-left" title="Change Code Browser settings"></i>\n\n<p>Open source project by the Department of Computer Science, University of Helsinki - <a href="http://github.com/codebrowser/web-client" target="_blank">View source on GitHub</a></p>\n'}),this.Handlebars.templates.Navigation=Handlebars.template(function(a,b,c,d,e){function f(){return'\n      	<li><a href="./#/studentgroups">Tags</a></li>\n      '}function g(){return'\n      	<li><a href="./#/tagnames">Tags</a></li>\n      '}function h(){return'\n      	<li><a href="./#/tagcategories">Tag categories</a></li>\n      '}function i(){return'\n      	<li><a href="./#/comments">Comments</a></li>\n      '}function j(){return"\n\n        <button class='btn btn-small pull-right' id='startTour' title='Start a tour'>\n            <i class='icon-question-sign icon-gray'></i>\n        </button>\n\n    "}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var k,l="",m=this;return l+='<nav class=\'navbar navbar-default\' role=\'navigation\'>\n    <ul class="nav navbar-nav">\n      <li><a href="./#">Home</a></li>\n\n      <li><a href="./#/students">Students</a></li>\n\n      ',k=c["if"].call(b,b&&b.showStudentgroups,{hash:{},inverse:m.noop,fn:m.program(1,f,e),data:e}),(k||0===k)&&(l+=k),l+='\n\n      <li><a href="./#/courses">Courses</a></li>\n\n      ',k=c["if"].call(b,b&&b.showTags,{hash:{},inverse:m.noop,fn:m.program(3,g,e),data:e}),(k||0===k)&&(l+=k),l+="\n\n      ",k=c["if"].call(b,b&&b.showTagCategories,{hash:{},inverse:m.noop,fn:m.program(5,h,e),data:e}),(k||0===k)&&(l+=k),l+="\n\n      ",k=c["if"].call(b,b&&b.showComments,{hash:{},inverse:m.noop,fn:m.program(7,i,e),data:e}),(k||0===k)&&(l+=k),l+="\n    </ul>\n\n    ",k=c["if"].call(b,b&&b.tourEnabled,{hash:{},inverse:m.noop,fn:m.program(9,j,e),data:e}),(k||0===k)&&(l+=k),l+="\n</nav>\n\n"}),this.Handlebars.templates.NavigationBarContainer=Handlebars.template(function(a,b,c,d,e){function f(a,b){var d,e,f="";return f+="\n\n            <li><a href='./#/courses'>Courses</a> <span class='divider'>/</span></li>\n            <li><a href='./#/courses/",(d=c.courseId)?d=d.call(a,{hash:{},data:b}):(d=a&&a.courseId,d=typeof d===j?d.call(a,{hash:{},data:b}):d),f+=k(d)+"'>"+k((d=a&&a.course,d=null==d||d===!1?d:d.name,typeof d===j?d.apply(a):d))+"</a> <span class='divider'>/</span></li>\n            <li><a href='./#/courses/",(e=c.courseId)?e=e.call(a,{hash:{},data:b}):(e=a&&a.courseId,e=typeof e===j?e.call(a,{hash:{},data:b}):e),f+=k(e)+"/exercises'>Exercises</a> <span class='divider'>/</span></li>\n            <li><a href='./#/courses/",(e=c.courseId)?e=e.call(a,{hash:{},data:b}):(e=a&&a.courseId,e=typeof e===j?e.call(a,{hash:{},data:b}):e),f+=k(e)+"/exercises/",(e=c.exerciseId)?e=e.call(a,{hash:{},data:b}):(e=a&&a.exerciseId,e=typeof e===j?e.call(a,{hash:{},data:b}):e),f+=k(e)+"'>"+k((d=a&&a.exercise,d=null==d||d===!1?d:d.name,typeof d===j?d.apply(a):d))+"</a> <span class='divider'>/</span></li>\n            <li><a href='./#/courses/",(e=c.courseId)?e=e.call(a,{hash:{},data:b}):(e=a&&a.courseId,e=typeof e===j?e.call(a,{hash:{},data:b}):e),f+=k(e)+"/exercises/",(e=c.exerciseId)?e=e.call(a,{hash:{},data:b}):(e=a&&a.exerciseId,e=typeof e===j?e.call(a,{hash:{},data:b}):e),f+=k(e)+"/students'>Students</a> <span class='divider'>/</span></li>\n            <li><a href='./#/courses/",(e=c.courseId)?e=e.call(a,{hash:{},data:b}):(e=a&&a.courseId,e=typeof e===j?e.call(a,{hash:{},data:b}):e),f+=k(e)+"/exercises/",(e=c.exerciseId)?e=e.call(a,{hash:{},data:b}):(e=a&&a.exerciseId,e=typeof e===j?e.call(a,{hash:{},data:b}):e),f+=k(e)+"/students/",(e=c.studentId)?e=e.call(a,{hash:{},data:b}):(e=a&&a.studentId,e=typeof e===j?e.call(a,{hash:{},data:b}):e),f+=k(e)+"'>"+k((d=a&&a.student,d=null==d||d===!1?d:d.name,typeof d===j?d.apply(a):d))+"</a> <span class='divider'>/</span></li>\n\n        "}function g(a,b){var d,e,f="";return f+="\n\n            <li><a href='./#/students'>Students</a> <span class='divider'>/</span></li>\n            <li><a href='./#/students/",(d=c.studentId)?d=d.call(a,{hash:{},data:b}):(d=a&&a.studentId,d=typeof d===j?d.call(a,{hash:{},data:b}):d),f+=k(d)+"'>"+k((d=a&&a.student,d=null==d||d===!1?d:d.name,typeof d===j?d.apply(a):d))+"</a> <span class='divider'>/</span></li>\n            <li><a href='./#/students/",(e=c.studentId)?e=e.call(a,{hash:{},data:b}):(e=a&&a.studentId,e=typeof e===j?e.call(a,{hash:{},data:b}):e),f+=k(e)+"/courses'>Courses</a> <span class='divider'>/</span></li>\n            <li><a href='./#/students/",(e=c.studentId)?e=e.call(a,{hash:{},data:b}):(e=a&&a.studentId,e=typeof e===j?e.call(a,{hash:{},data:b}):e),f+=k(e)+"/courses/",(e=c.courseId)?e=e.call(a,{hash:{},data:b}):(e=a&&a.courseId,e=typeof e===j?e.call(a,{hash:{},data:b}):e),f+=k(e)+"'>"+k((d=a&&a.course,d=null==d||d===!1?d:d.name,typeof d===j?d.apply(a):d))+"</a> <span class='divider'>/</span></li>\n            <li><a href='./#/students/",(e=c.studentId)?e=e.call(a,{hash:{},data:b}):(e=a&&a.studentId,e=typeof e===j?e.call(a,{hash:{},data:b}):e),f+=k(e)+"/courses/",(e=c.courseId)?e=e.call(a,{hash:{},data:b}):(e=a&&a.courseId,e=typeof e===j?e.call(a,{hash:{},data:b}):e),f+=k(e)+"/exercises'>Exercises</a> <span class='divider'>/</span></li>\n            <li><a href='./#/students/",(e=c.studentId)?e=e.call(a,{hash:{},data:b}):(e=a&&a.studentId,e=typeof e===j?e.call(a,{hash:{},data:b}):e),f+=k(e)+"/courses/",(e=c.courseId)?e=e.call(a,{hash:{},data:b}):(e=a&&a.courseId,e=typeof e===j?e.call(a,{hash:{},data:b}):e),f+=k(e)+"/exercises/",(e=c.exerciseId)?e=e.call(a,{hash:{},data:b}):(e=a&&a.exerciseId,e=typeof e===j?e.call(a,{hash:{},data:b}):e),f+=k(e)+"'>"+k((d=a&&a.exercise,d=null==d||d===!1?d:d.name,typeof d===j?d.apply(a):d))+"</a> <span class='divider'>/</span></li>\n\n        "}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var h,i="",j="function",k=this.escapeExpression,l=this;return i+="<section>\n\n    <ul class='breadcrumb'>\n\n        <li><a href='./'>Home</a> <span class='divider'>/</span></li>\n\n        ",h=c["if"].call(b,b&&b.courseRoute,{hash:{},inverse:l.program(3,g,e),fn:l.program(1,f,e),data:e}),(h||0===h)&&(i+=h),i+="\n\n        <li class='active'>Snapshots</li>\n\n    </ul>\n\n</section>\n"}),this.Handlebars.templates.RootContainer=Handlebars.template(function(a,b,c,d,e){function f(){return"\n            <li><a href='./#/studentgroups'>Student groups</a></li>\n        "}function g(){return"\n            <li><a href='./#/tagnames'>Tags</a></li>\n        "}function h(){return"\n            <li><a href='./#/tagcategories'>Tag categories</a></li>\n        "
}function i(){return"\n            <li><a href='./#/comments'>Comments</a></li>\n        "}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var j,k="",l=this;return k+="<section>\n\n    <ul class='breadcrumb'>\n        <li class='active'>Home</li>\n    </ul>\n\n    <ul class='nav nav-tabs nav-stacked selection'>\n        <li><a href='./#/students'>Students</a></li>\n\n        ",j=c["if"].call(b,b&&b.showStudentGroups,{hash:{},inverse:l.noop,fn:l.program(1,f,e),data:e}),(j||0===j)&&(k+=j),k+="\n\n        <li><a href='./#/courses'>Courses</a></li>\n\n        ",j=c["if"].call(b,b&&b.showTags,{hash:{},inverse:l.noop,fn:l.program(3,g,e),data:e}),(j||0===j)&&(k+=j),k+="\n\n        ",j=c["if"].call(b,b&&b.showTagCategories,{hash:{},inverse:l.noop,fn:l.program(5,h,e),data:e}),(j||0===j)&&(k+=j),k+="\n\n        ",j=c["if"].call(b,b&&b.showComments,{hash:{},inverse:l.noop,fn:l.program(7,i,e),data:e}),(j||0===j)&&(k+=j),k+="\n\n    </ul>\n\n</section>\n"}),this.Handlebars.templates.SelectContainer=Handlebars.template(function(a,b,c,d,e){function f(a){var b,c="";return c+="\n            <li><a href='./#/courses'>Courses</a> <span class='divider'>/</span></li>\n            <li><a href='./#/courses/"+k((b=a&&a.course,b=null==b||b===!1?b:b.id,typeof b===j?b.apply(a):b))+"'>"+k((b=a&&a.course,b=null==b||b===!1?b:b.name,typeof b===j?b.apply(a):b))+"</a> <span class='divider'>/</span></li>\n        "}function g(a){var b,c="";return c+=" "+k((b=a&&a.course,b=null==b||b===!1?b:b.name,typeof b===j?b.apply(a):b))+" — "}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var h,i="",j="function",k=this.escapeExpression,l=this;return i+="<section>\n\n    <ul class='breadcrumb'>\n        <li><a href='./'>Home</a> <span class='divider'>/</span></li>\n\n\n        ",h=c["if"].call(b,b&&b.course,{hash:{},inverse:l.noop,fn:l.program(1,f,e),data:e}),(h||0===h)&&(i+=h),i+="\n\n        <li class='active'>Select</li>\n    </ul>\n\n    <h2>",h=c["if"].call(b,b&&b.course,{hash:{},inverse:l.noop,fn:l.program(3,g,e),data:e}),(h||0===h)&&(i+=h),i+=" Select view mode</h2>\n\n    <table class='table table-hover'>\n\n        <tbody>\n\n            <ul class=\"nav nav-tabs nav-stacked selection\">\n                <li class='link'><a href='./#/courses/"+k((h=b&&b.course,h=null==h||h===!1?h:h.id,typeof h===j?h.apply(b):h))+"/students'>View students of the course</a></td>\n                <li class='link'><a href='./#/courses/"+k((h=b&&b.course,h=null==h||h===!1?h:h.id,typeof h===j?h.apply(b):h))+"/exercises'>View exercises of the course</a></td>\n            </ul>\n\n        </tbody>\n\n    </table>\n\n</section>\n"}),this.Handlebars.templates.SettingsModal=Handlebars.template(function(a,b,c,d,e){function f(){return'\n            <div id="capability-report" class="text-center">\n            '}function g(){return'\n            <div id="capability-report" class="text-center" style="display:none;">\n            '}function h(a,b){var d,e,f="";return f+="\n                    <tr>\n                        <td>"+t((d=a&&a.name,typeof d===s?d.apply(a):d))+"</td>\n                        <td>\n                            ",e=c["if"].call(a,a&&a.checked,{hash:{},inverse:u.program(11,l,b),fn:u.program(6,i,b),data:b}),(e||0===e)&&(f+=e),f+="\n                        </td>\n                        <td>\n                            ",e=c["if"].call(a,a&&a.status,{hash:{},inverse:u.program(15,n,b),fn:u.program(13,m,b),data:b}),(e||0===e)&&(f+=e),f+="\n                        </td>\n                    </tr>\n                    "}function i(a,b){var d,e="";return e+="\n                                ",d=c["if"].call(a,a&&a.status,{hash:{},inverse:u.program(9,k,b),fn:u.program(7,j,b),data:b}),(d||0===d)&&(e+=d),e+="\n                            "}function j(){return'\n                                <i class="fa fa-2x fa-check" title="Verified"></i>\n                                '}function k(a){var b,c="";return c+='\n                                <i class="fa fa-2x fa-warning" title="'+t((b=a&&a.error,typeof b===s?b.apply(a):b))+'"></i>\n                                '}function l(a){var b,c="";return c+='\n                            <i class="fa fa-2x fa-question-circle" title="'+t((b=a&&a.error,typeof b===s?b.apply(a):b))+'"></i>\n                            '}function m(a,b){var c,d="";return d+='\n                            <input class="toggleEnabled" type="checkbox" data-index="'+t((c=b,c=null==c||c===!1?c:c.index,typeof c===s?c.apply(a):c))+'" checked>\n                            '}function n(a,b){var c,d="";return d+='\n                            <input class="toggleEnabled" type="checkbox" data-index="'+t((c=b,c=null==c||c===!1?c:c.index,typeof c===s?c.apply(a):c))+'">\n                            '}function o(){return'\n            <button id="saveButton" class="btn btn-primary" data-action="save" title="Apply new settings and close the dialog">Save</button>\n            '}function p(){return'\n            <button id="saveButton" class="btn btn-primary" data-action="save" title="Apply new settings and close the dialog" disabled>Save</button>\n            '}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var q,r="",s="function",t=this.escapeExpression,u=this;return r+='<div id="modal-dialog" role="dialog" aria-hidden="true">\n\n    <div class="modal-content">\n\n        <div class="modal-header">\n            <button type="button" id="closeButton" class="close" aria-hidden="true" title="Close the settings dialog without saving any changes">×</button>\n            <h3 id="myModalLabel">Settings</h3>\n        </div>\n\n        <div class="modal-body inline">\n            <label for="apiUrl">Server URL</label>\n            <input id="apiUrl" type="text" value="',(q=c.apiUrl)?q=q.call(b,{hash:{},data:e}):(q=b&&b.apiUrl,q=typeof q===s?q.call(b,{hash:{},data:e}):q),r+=t(q)+'" title="URL of the backend that provides the data for Code Browser"/>\n            <button id="applyButton" class="btn btn-primary">Apply</button>\n\n            ',q=c["if"].call(b,b&&b.applied,{hash:{},inverse:u.program(3,g,e),fn:u.program(1,f,e),data:e}),(q||0===q)&&(r+=q),r+='\n                <table class="table table-bordered">\n                    <thead>\n                        <tr>\n                            <th>Feature</th>\n                            <th>Check status</th>\n                            <th>Enabled</th>\n                        </tr>\n                    </thead>\n                    ',q=c.each.call(b,b&&b.capabilities,{hash:{},inverse:u.noop,fn:u.program(5,h,e),data:e}),(q||0===q)&&(r+=q),r+='\n                </table>\n\n                <button id="checkButton" class="btn btn-small">Check back-end capabilities</button>\n\n            </div>\n        </div>\n\n        <div class="modal-footer">\n            <button id="cancelButton" class="btn" aria-hidden="true" title="Close the settings dialog without saving any changes">Cancel</button>\n            ',q=c["if"].call(b,b&&b.applied,{hash:{},inverse:u.program(19,p,e),fn:u.program(17,o,e),data:e}),(q||0===q)&&(r+=q),r+="\n        </div>\n\n    </div>\n\n</div>"}),this.Handlebars.templates.SnapshotCommentsContainer=Handlebars.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f,g="",h="function",i=this.escapeExpression;return g+="<section id='snapshot-comment-form'>\n\n    <div class='accordion-heading'>\n\n      <a class='accordion-toggle' data-toggle='collapse' href='#postComment'>\n        <i class='icon-comment icon-gray'></i> Post a comment\n      </a>\n\n    </div>\n\n    <div id='postComment' class='accordion-body collapse'>\n      <div class='accordion-inner'>\n\n        <form class='form-horizontal'>\n\n            <div class='control-group'>\n\n                <label class='control-label' for='comment-username'>Username</label>\n\n                <div class='controls'>\n                    <input type='text' data-id='comment-username' placeholder='Username' value='",(f=c.username)?f=f.call(b,{hash:{},data:e}):(f=b&&b.username,f=typeof f===h?f.call(b,{hash:{},data:e}):f),g+=i(f)+"' title='Name that will be shown to other users'>\n                </div>\n            </div>\n\n            <div class='control-group'>\n\n                <label class='control-label' for='comment-type'>Comment on</label>\n\n                <div class='controls btn-group' data-toggle='buttons-radio'>\n                    <button name='comment-type' type='button' data-action='solution-comment' class='btn active' title='Comment on the entire solution'>\n                        <i class='icon-answer icon-gray'></i>\n                        solution\n                    </button>\n\n                    <button name='comment-type' type='button' data-action='snapshot-comment' class='btn' title='Comment on the current snapshot'>\n                        <i class='icon-snapshot icon-gray'></i>\n                        snapshot\n                    </button>\n                </div>\n            </div>\n\n            <div class='control-group'>\n\n                <label class='control-label' for='comment-text'>Comment</label>\n\n                <div class='controls'>\n                    <textarea rows='8' data-id='comment-text'></textarea>\n                </div>\n            </div>\n\n            <div class='control-group'>\n\n                <div class='controls'>\n                    <button type='submit' class='btn btn-primary' data-action='create-comment' class='Submit comment'>Submit</button>\n                </div>\n            </div>\n\n        </form>\n\n      </div>\n    </div>\n\n</section>\n"}),this.Handlebars.templates.SnapshotDataContainer=Handlebars.template(function(a,b,c,d,e){function f(a,b){var d,e="";return e+="\n    ",d=c.each.call(a,a&&a.tests,{hash:{},inverse:l.noop,fn:l.program(2,g,b),data:b}),(d||0===d)&&(e+=d),e+="\n<p>Complete: ",(d=c.percentageOfTestsPassing)?d=d.call(a,{hash:{},data:b}):(d=a&&a.percentageOfTestsPassing,d=typeof d===j?d.call(a,{hash:{},data:b}):d),e+=k(d)+"%</p>\n"}function g(a,b){var d,e="";return e+='\n        <div class="tests ',(d=c.passed)?d=d.call(a,{hash:{},data:b}):(d=a&&a.passed,d=typeof d===j?d.call(a,{hash:{},data:b}):d),e+=k(d)+'">\n            <p class="test-name">',(d=c.name)?d=d.call(a,{hash:{},data:b}):(d=a&&a.name,d=typeof d===j?d.call(a,{hash:{},data:b}):d),e+=k(d)+'</p>\n            <p class="test-message">',(d=c.message)?d=d.call(a,{hash:{},data:b}):(d=a&&a.message,d=typeof d===j?d.call(a,{hash:{},data:b}):d),e+=k(d)+"</p>\n        </div>\n    "}function h(){return"\n    <div><p>No test data.</p></div>\n"}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var i,j="function",k=this.escapeExpression,l=this;return i=c["if"].call(b,b&&b.tests,{hash:{},inverse:l.program(4,h,e),fn:l.program(1,f,e),data:e}),i||0===i?i:""}),this.Handlebars.templates.SnapshotFilesContainer=Handlebars.template(function(a,b,c,d,e){function f(a,b,d){var e,f,i="";return i+="\n\n            ",f=c["if"].call(a,(e=b,null==e||e===!1?e:e.key),{hash:{},inverse:q.noop,fn:q.program(2,g,b),data:b}),(f||0===f)&&(i+=f),i+="\n\n            ",f=c.each.call(a,a,{hash:{},inverse:q.noop,fn:q.programWithDepth(4,h,b,d),data:b}),(f||0===f)&&(i+=f),i+="\n\n        "}function g(a,b){var c,d="";return d+="\n\n                <li class='folder'><i class='icon-folder-open icon-gray'></i>"+o((c=b,c=null==c||c===!1?c:c.key,typeof c===n?c.apply(a):c))+"</li>\n\n            "}function h(a,b,d){var e,f="";return f+="\n\n                ",e=c["if"].call(a,d&&d.courseRoute,{hash:{},inverse:q.programWithDepth(7,j,b,d),fn:q.programWithDepth(5,i,b,d),data:b}),(e||0===e)&&(f+=e),f+="\n\n            "}function i(a,b,d){var e,f,g,h="";return h+="\n\n                    <li data-id='",(e=c.id)?e=e.call(a,{hash:{},data:b}):(e=a&&a.id,e=typeof e===n?e.call(a,{hash:{},data:b}):e),h+=o(e)+"'><a href='./#/courses/"+o((e=d&&d.courseId,typeof e===n?e.apply(a):e))+"/exercises/"+o((e=d&&d.exerciseId,typeof e===n?e.apply(a):e))+"/students/"+o((e=d&&d.studentId,typeof e===n?e.apply(a):e))+"/snapshots/"+o((e=d&&d.id,typeof e===n?e.apply(a):e))+"/files/",(f=c.id)?f=f.call(a,{hash:{},data:b}):(f=a&&a.id,f=typeof f===n?f.call(a,{hash:{},data:b}):f),h+=o(f)+"'><i class='icon-file icon-gray'></i> ",g={hash:{},data:b},h+=o((e=c.filename||a&&a.filename,e?e.call(a,a&&a.name,g):p.call(a,"filename",a&&a.name,g)))+"</a></li>\n\n                "}function j(a,b,d){var e,f,g,h="";return h+="\n\n                    <li data-id='",(e=c.id)?e=e.call(a,{hash:{},data:b}):(e=a&&a.id,e=typeof e===n?e.call(a,{hash:{},data:b}):e),h+=o(e)+"'><a href='./#/students/"+o((e=d&&d.studentId,typeof e===n?e.apply(a):e))+"/courses/"+o((e=d&&d.courseId,typeof e===n?e.apply(a):e))+"/exercises/"+o((e=d&&d.exerciseId,typeof e===n?e.apply(a):e))+"/snapshots/"+o((e=d&&d.id,typeof e===n?e.apply(a):e))+"/files/",(f=c.id)?f=f.call(a,{hash:{},data:b}):(f=a&&a.id,f=typeof f===n?f.call(a,{hash:{},data:b}):f),h+=o(f)+"'><i class='icon-file icon-gray'></i> ",g={hash:{},data:b},h+=o((e=c.filename||a&&a.filename,e?e.call(a,a&&a.name,g):p.call(a,"filename",a&&a.name,g)))+"</a></li>\n\n                "}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var k,l,m="",n="function",o=this.escapeExpression,p=c.helperMissing,q=this;return m+="<header>\n\n    <h1><i class='icon-folder-close icon-gray'></i> "+o((k=b&&b.exercise,k=null==k||k===!1?k:k.name,typeof k===n?k.apply(b):k))+"</h1>\n\n</header>\n\n<ul>\n\n        ",l=c.each.call(b,b&&b.files,{hash:{},inverse:q.noop,fn:q.programWithDepth(1,f,e,b),data:e}),(l||0===l)&&(m+=l),m+="\n\n</ul>\n"}),this.Handlebars.templates.SnapshotNavigationContainer=Handlebars.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f,g="",h="function",i=this.escapeExpression;return g+="<div class='row'>\n\n    <div id='editor-modes' class='span2'>\n\n        <button id='toggleBrowser' type='button' class='btn' data-toggle='button' title='Show file list'>\n            <i class='icon-folder icon-gray'></i>\n        </button>\n        <button id='split' type='button' class='btn' data-toggle='button'>\n            <i class='icon-split-editor icon-gray' title='Show side-by-side comparison of file contents'></i>\n        </button>\n        <button id='diff' type='button' class='btn' data-toggle='button' title='Highlight changed lines (BLUE: inserted, RED: deleted, GREEN: modified)'>\n            <i class='icon-diff icon-gray'></i>\n        </button>\n\n    </div>\n\n    <div id='visualization-settings' class='span6'>\n\n        <button id='toggleTimeline' class='btn' title='Show timeline'>\n            <i class='icon-time icon-gray'></i>\n        </button>\n        <button id='toggleTree' class='btn'>\n            <i class='icon-tree icon-gray' title='Show timelines for each file'></i>\n        </button>\n        <button id='toggleTestOutput' class='btn' title='Show test results and output'>\n            <i class='icon-ok icon-gray'></i>\n        </button>\n        <button id='toggleConceptBubbles' class='btn' title='Show concept bubble chart'>\n            <i class='icon-bubble icon-gray'></i>\n        </button>\n        <button id='toggleConceptHeatmap' class='btn' title='Show concept heat map'>\n            <i class='icon-fire icon-gray'></i>\n        </button>\n\n    </div>\n\n\n    <div id='snapshot-navi' class='span4 pull-right'>\n\n        <div class='row'>\n\n            <div class='span1 text-center'>",(f=c.current)?f=f.call(b,{hash:{},data:e}):(f=b&&b.current,f=typeof f===h?f.call(b,{hash:{},data:e}):f),g+=i(f)+" / ",(f=c.total)?f=f.call(b,{hash:{},data:e}):(f=b&&b.total,f=typeof f===h?f.call(b,{hash:{},data:e}):f),g+=i(f)+"</div>\n\n            <div class='span3'>\n\n                <div class='btn-group pull-right'>\n                    <button type='button' id='first' class='btn' title='Go to first snapshot'>First</button>\n                    <button type='button' id='previous' class='btn' title='Go to previous snapshot'>Previous</button>\n                    <button type='button' id='next' class='btn' title='Go to next snapshot'>Next</button>\n                    <button type='button' id='last' class='btn' title='Go to last snapshot'>Last</button>\n                </div>\n\n            </div>\n\n        </div>\n\n    </div>\n\n</div>\n"}),this.Handlebars.templates.SnapshotTagsContainer=Handlebars.template(function(a,b,c,d,e){function f(a,b){var d,e,f="";return f+="\n\n        <ul>\n\n            ",e={hash:{},inverse:q.noop,fn:q.program(2,g,b),data:b},(d=c.tags)?d=d.call(a,e):(d=a&&a.tags,d=typeof d===o?d.call(a,e):d),c.tags||(d=r.call(a,d,e)),(d||0===d)&&(f+=d),f+="\n\n        </ul>\n\n    "}function g(a,b){var d,e="";return e+="\n\n                ",d=c.unless.call(a,a&&a.snapshot,{hash:{},inverse:q.noop,fn:q.program(3,h,b),data:b}),(d||0===d)&&(e+=d),e+="\n\n            "}function h(a,b){var d,e,f="";return f+="\n\n                    <li>"+p((d=a&&a.tagName,d=null==d||d===!1?d:d.name,typeof d===o?d.apply(a):d))+" <button type='button' data-action='delete' data-id='",(e=c.id)?e=e.call(a,{hash:{},data:b}):(e=a&&a.id,e=typeof e===o?e.call(a,{hash:{},data:b}):e),f+=p(e)+"' class='delete' title='Remove this tag'>×</button></li>\n\n                "}function i(a,b){var d,e,f="";return f+="\n\n        <ul>\n\n            ",e={hash:{},inverse:q.noop,fn:q.program(6,j,b),data:b},(d=c.tags)?d=d.call(a,e):(d=a&&a.tags,d=typeof d===o?d.call(a,e):d),c.tags||(d=r.call(a,d,e)),(d||0===d)&&(f+=d),f+="\n\n        </ul>\n\n    "}function j(a,b){var d,e="";return e+="\n\n                ",d=c["if"].call(a,a&&a.snapshot,{hash:{},inverse:q.noop,fn:q.program(7,k,b),data:b}),(d||0===d)&&(e+=d),e+="\n\n            "}function k(a,b){var d,e="";return e+="\n\n                    ",d=c["if"].call(a,a&&a.visible,{hash:{},inverse:q.noop,fn:q.program(8,l,b),data:b}),(d||0===d)&&(e+=d),e+="\n\n                "}function l(a,b){var d,e,f="";return f+="\n\n                        <li>"+p((d=a&&a.tagName,d=null==d||d===!1?d:d.name,typeof d===o?d.apply(a):d))+"<button type='button' data-action='delete' data-id='",(e=c.id)?e=e.call(a,{hash:{},data:b}):(e=a&&a.id,e=typeof e===o?e.call(a,{hash:{},data:b}):e),f+=p(e)+"' class='delete' title='Remove this tag'>×</button></li>\n\n                    "}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var m,n="",o="function",p=this.escapeExpression,q=this,r=c.blockHelperMissing;return n+="<section>\n\n    <header>\n\n        <h1><i class='icon-tags icon-gray'></i> Tags</h1>\n\n    </header>\n\n    ",m=c["if"].call(b,b&&b.tags,{hash:{},inverse:q.noop,fn:q.program(1,f,e),data:e}),(m||0===m)&&(n+=m),n+="\n\n    <div class='input-append'>\n\n        <form>\n\n            <input type='text' data-id='tag' placeholder='New tag…'>\n\n            <button title='Add new tag to this solution' type='submit' data-action='create-tag' class='btn'>+</button>\n\n        </form>\n\n    </div>\n\n</section>\n\n<section>\n    <header>\n\n        <h1><i class='icon-tags icon-gray'></i> Tags (Snapshot)</h1>\n\n    </header>\n\n    ",m=c["if"].call(b,b&&b.tags,{hash:{},inverse:q.noop,fn:q.program(5,i,e),data:e}),(m||0===m)&&(n+=m),n+="\n\n    <div class='input-append'>\n\n        <form>\n\n            <input type='text' data-id='snapshot-tag' placeholder='New snapshot tag…'>\n\n            <button title='Add new tag to this snapshot' type='submit' data-action='create-snapshot-tag' class='btn'>+</button>\n\n        </form>\n\n    </div>\n\n</section>\n"}),this.Handlebars.templates.SnapshotsTimelineBottomContainer=Handlebars.template(function(a,b,c,d,e){this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var f,g,h="",i=c.helperMissing,j=this.escapeExpression;return h+="<div class='row'>\n\n    <div class='span2'>\n\n        <time>",g={hash:{},data:e},h+=j((f=c.date||b&&b.date,f?f.call(b,(f=b&&b.first,null==f||f===!1?f:f.snapshotTime),!1,g):i.call(b,"date",(f=b&&b.first,null==f||f===!1?f:f.snapshotTime),!1,g)))+"</time>\n\n    </div>\n\n    <div class='center text-center'>. . .</div>\n\n    <div class='span3 pull-right'>\n\n        <time class='pull-right'>",g={hash:{},data:e},h+=j((f=c.date||b&&b.date,f?f.call(b,(f=b&&b.last,null==f||f===!1?f:f.snapshotTime),!1,g):i.call(b,"date",(f=b&&b.last,null==f||f===!1?f:f.snapshotTime),!1,g)))+" (+ ",g={hash:{},data:e},h+=j((f=c.duration||b&&b.duration,f?f.call(b,(f=b&&b.last,null==f||f===!1?f:f.snapshotTime),(f=b&&b.first,null==f||f===!1?f:f.snapshotTime),g):i.call(b,"duration",(f=b&&b.last,null==f||f===!1?f:f.snapshotTime),(f=b&&b.first,null==f||f===!1?f:f.snapshotTime),g)))+")</time>\n\n    </div>\n\n</div>\n"}),this.Handlebars.templates.StudentGroupsContainer=Handlebars.template(function(a,b,c,d,e){function f(a,b){var d,e="";return e+="\n            <li><a href='./#/students'>Students</a> <span class='divider'>/</span></li>\n            <li><a href='./#/students/",(d=c.studentId)?d=d.call(a,{hash:{},data:b}):(d=a&&a.studentId,d=typeof d===l?d.call(a,{hash:{},data:b}):d),e+=m(d)+"'>"+m((d=a&&a.student,d=null==d||d===!1?d:d.name,typeof d===l?d.apply(a):d))+"</a> <span class='divider'>/</span></li>\n        "}function g(a,b){var d,e,f,g="";return g+="\n\n                <tr>\n\n                    <td class='index'>",f={hash:{},data:b},g+=m((d=c.index||a&&a.index,d?d.call(a,(d=b,null==d||d===!1?d:d.index),f):n.call(a,"index",(d=b,null==d||d===!1?d:d.index),f)))+"</td>\n\n                    <td class='link'><a href='./#/studentgroups/",(e=c.id)?e=e.call(a,{hash:{},data:b}):(e=a&&a.id,e=typeof e===l?e.call(a,{hash:{},data:b}):e),g+=m(e)+"/students'>",(e=c.name)?e=e.call(a,{hash:{},data:b}):(e=a&&a.name,e=typeof e===l?e.call(a,{hash:{},data:b}):e),g+=m(e)+"</a></td>\n\n                    <td>"+m((d=a&&a.students,d=null==d||d===!1?d:d.length,typeof d===l?d.apply(a):d))+"</td>\n\n                </tr>\n\n            "}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var h,i,j,k="",l="function",m=this.escapeExpression,n=c.helperMissing,o=this,p=c.blockHelperMissing;return k+="<section>\n\n    <ul class='breadcrumb'>\n\n        <li><a href='./'>Home</a> <span class='divider'>/</span></li>\n\n        ",h=c["if"].call(b,b&&b.studentId,{hash:{},inverse:o.noop,fn:o.program(1,f,e),data:e}),(h||0===h)&&(k+=h),k+="\n\n        <li class='active'>Student groups</li>\n\n    </ul>\n\n    <h2>\n        Student groups ("+m((h=b&&b.studentGroups,h=null==h||h===!1?h:h.length,typeof h===l?h.apply(b):h))+')\n\n        <span class="pull-right">\n            <div class="input-append">\n                <input type="text" class="span2" placeholder="Search" data-id="query-string" />\n                <button class="btn" data-action="search" title="Search for student groups">\n                    <i class="icon-search"></i>\n                </button>\n            </div>\n        </span>\n\n    </h2>\n\n    <table class=\'table table-hover\'>\n\n        <thead>\n            <tr>\n                <th>#</th>\n                <th>Name</th>\n                <th>Students</th>\n            </tr>\n        </thead>\n\n        <tbody>\n\n            ',j={hash:{},inverse:o.noop,fn:o.program(3,g,e),data:e},(i=c.studentGroups)?i=i.call(b,j):(i=b&&b.studentGroups,i=typeof i===l?i.call(b,j):i),c.studentGroups||(i=p.call(b,i,j)),(i||0===i)&&(k+=i),k+="\n\n        </tbody>\n\n    </table>\n\n</section>\n"}),this.Handlebars.templates.StudentsContainer=Handlebars.template(function(a,b,c,d,e){function f(a){var b,c="";return c+="\n            <li><a href='./#/courses'>Courses</a> <span class='divider'>/</span></li>\n            <li><a href='./#/courses/"+z((b=a&&a.course,b=null==b||b===!1?b:b.id,typeof b===y?b.apply(a):b))+"'>"+z((b=a&&a.course,b=null==b||b===!1?b:b.name,typeof b===y?b.apply(a):b))+"</a> <span class='divider'>/</span></li>\n        "}function g(a){var b,c="";return c+="\n            <li><a href='./#/courses/"+z((b=a&&a.course,b=null==b||b===!1?b:b.id,typeof b===y?b.apply(a):b))+"/exercises'>Exercises</a> <span class='divider'>/</span></li>\n            <li><a href='./#/courses/"+z((b=a&&a.course,b=null==b||b===!1?b:b.id,typeof b===y?b.apply(a):b))+"/exercises/"+z((b=a&&a.exercise,b=null==b||b===!1?b:b.id,typeof b===y?b.apply(a):b))+"'>"+z((b=a&&a.exercise,b=null==b||b===!1?b:b.name,typeof b===y?b.apply(a):b))+"</a> <span class='divider'>/</span></li>\n        "}function h(a){var b,c="";return c+="\n            <li><a href='./#/studentgroups'>Student groups</a> <span class='divider'>/</span></li>\n            <li><a href='./#/studentgroups/"+z((b=a&&a.studentGroup,b=null==b||b===!1?b:b.id,typeof b===y?b.apply(a):b))+"/students'>"+z((b=a&&a.studentGroup,b=null==b||b===!1?b:b.name,typeof b===y?b.apply(a):b))+"</a> <span class='divider'>/</span></li>\n        "}function i(a){var b,c="";return c+="\n\n            "+z((b=a&&a.studentGroup,b=null==b||b===!1?b:b.name,typeof b===y?b.apply(a):b))+" — Students ("+z((b=a&&a.students,b=null==b||b===!1?b:b.length,typeof b===y?b.apply(a):b))+")\n\n        "}function j(a,b){var d,e="";return e+="\n            ",d=c["if"].call(a,a&&a.exercise,{hash:{},inverse:A.program(13,m,b),fn:A.program(10,k,b),data:b}),(d||0===d)&&(e+=d),e+="\n\n        "}function k(a,b){var d,e="";return e+="\n\n                ",d=c["if"].call(a,a&&a.course,{hash:{},inverse:A.noop,fn:A.program(11,l,b),data:b}),(d||0===d)&&(e+=d),e+=" Students ("+z((d=a&&a.students,d=null==d||d===!1?d:d.length,typeof d===y?d.apply(a):d))+")\n\n            "}function l(a){var b,c="";return c+=" "+z((b=a&&a.course,b=null==b||b===!1?b:b.name,typeof b===y?b.apply(a):b))+" — "+z((b=a&&a.exercise,b=null==b||b===!1?b:b.name,typeof b===y?b.apply(a):b))+" — "}function m(a,b){var d,e="";return e+="\n\n                ",d=c["if"].call(a,a&&a.course,{hash:{},inverse:A.noop,fn:A.program(14,n,b),data:b}),(d||0===d)&&(e+=d),e+=" Students ("+z((d=a&&a.students,d=null==d||d===!1?d:d.length,typeof d===y?d.apply(a):d))+")\n\n            "}function n(a){var b,c="";return c+=" "+z((b=a&&a.course,b=null==b||b===!1?b:b.name,typeof b===y?b.apply(a):b))+" — "}function o(){return"\n                    <th>Courses</th>\n                "}function p(a,b,d){var e,f,g,h="";return h+="\n\n                <tr>\n\n                    <td class='index'>",g={hash:{},data:b},h+=z((e=c.index||a&&a.index,e?e.call(a,(e=b,null==e||e===!1?e:e.index),g):B.call(a,"index",(e=b,null==e||e===!1?e:e.index),g)))+"</td>\n\n                    ",f=c["if"].call(a,d&&d.course,{hash:{},inverse:A.program(24,t,b),fn:A.programWithDepth(19,q,b,d),data:b}),(f||0===f)&&(h+=f),h+="\n\n                    ",f=c.unless.call(a,d&&d.course,{hash:{},inverse:A.noop,fn:A.program(26,u,b),data:b}),(f||0===f)&&(h+=f),h+="\n\n                </tr>\n\n            "}function q(a,b,d){var e,f="";return f+="\n\n                        ",e=c["if"].call(a,d&&d.exercise,{hash:{},inverse:A.programWithDepth(22,s,b,d),fn:A.programWithDepth(20,r,b,d),data:b}),(e||0===e)&&(f+=e),f+="\n\n                    "}function r(a,b,d){var e,f,g="";return g+="\n\n                            <td class='link'><a href='./#/courses/"+z((e=d&&d.course,e=null==e||e===!1?e:e.id,typeof e===y?e.apply(a):e))+"/exercises/"+z((e=d&&d.exercise,e=null==e||e===!1?e:e.id,typeof e===y?e.apply(a):e))+"/students/",(f=c.id)?f=f.call(a,{hash:{},data:b}):(f=a&&a.id,f=typeof f===y?f.call(a,{hash:{},data:b}):f),g+=z(f)+"/snapshots'>",(f=c.name)?f=f.call(a,{hash:{},data:b}):(f=a&&a.name,f=typeof f===y?f.call(a,{hash:{},data:b}):f),g+=z(f)+"</a></td>\n\n                        "}function s(a,b,d){var e,f,g="";return g+="\n\n                            <td class='link'><a href='./#/courses/"+z((e=d&&d.course,e=null==e||e===!1?e:e.id,typeof e===y?e.apply(a):e))+"/students/",(f=c.id)?f=f.call(a,{hash:{},data:b}):(f=a&&a.id,f=typeof f===y?f.call(a,{hash:{},data:b}):f),g+=z(f)+"'>",(f=c.name)?f=f.call(a,{hash:{},data:b}):(f=a&&a.name,f=typeof f===y?f.call(a,{hash:{},data:b}):f),g+=z(f)+"</a></td>\n\n                        "}function t(a,b){var d,e="";return e+="\n\n                        <td class='link'><a href='./#/students/",(d=c.id)?d=d.call(a,{hash:{},data:b}):(d=a&&a.id,d=typeof d===y?d.call(a,{hash:{},data:b}):d),e+=z(d)+"/courses'>",(d=c.name)?d=d.call(a,{hash:{},data:b}):(d=a&&a.name,d=typeof d===y?d.call(a,{hash:{},data:b}):d),e+=z(d)+"</a></td>\n\n                    "}function u(a){var b,c="";return c+="\n\n                        <td>"+z((b=a&&a.courses,b=null==b||b===!1?b:b.length,typeof b===y?b.apply(a):b))+"</td>\n                        \n                    "}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var v,w,x="",y="function",z=this.escapeExpression,A=this,B=c.helperMissing,C=c.blockHelperMissing;return x+="<section>\n\n    <ul class='breadcrumb'>\n        <li><a href='./'>Home</a> <span class='divider'>/</span></li>\n\n        ",v=c["if"].call(b,b&&b.course,{hash:{},inverse:A.noop,fn:A.program(1,f,e),data:e}),(v||0===v)&&(x+=v),x+="\n\n        ",v=c["if"].call(b,b&&b.exercise,{hash:{},inverse:A.noop,fn:A.program(3,g,e),data:e}),(v||0===v)&&(x+=v),x+="\n\n        ",v=c["if"].call(b,b&&b.studentGroup,{hash:{},inverse:A.noop,fn:A.program(5,h,e),data:e}),(v||0===v)&&(x+=v),x+="\n\n        <li class='active'>Students</li>\n    </ul>\n\n\n    <h2>\n        ",v=c["if"].call(b,b&&b.studentGroup,{hash:{},inverse:A.program(9,j,e),fn:A.program(7,i,e),data:e}),(v||0===v)&&(x+=v),x+='\n\n        <span class="pull-right">\n            <div class="input-append">\n                <input type="text" class="span2" placeholder="Search" data-id="query-string" />\n                <button class="btn" data-action="search" title="Search for students">\n                    <i class="icon-search"></i>\n                </button>\n            </div>\n        </span>\n\n    </h2>\n\n\n    <table class=\'table table-hover\'>\n\n        <thead>\n            <tr>\n\n                <th>#</th>\n                <th>Name</th>\n\n                ',v=c.unless.call(b,b&&b.course,{hash:{},inverse:A.noop,fn:A.program(16,o,e),data:e}),(v||0===v)&&(x+=v),x+="\n\n            </tr>\n        </thead>\n\n        <tbody>\n\n            ",w={hash:{},inverse:A.noop,fn:A.programWithDepth(18,p,e,b),data:e},(v=c.students)?v=v.call(b,w):(v=b&&b.students,v=typeof v===y?v.call(b,w):v),c.students||(v=C.call(b,v,w)),(v||0===v)&&(x+=v),x+="\n\n        </tbody>\n\n    </table>\n\n</section>\n"}),this.Handlebars.templates.TagCategoriesContainer=Handlebars.template(function(a,b,c,d,e){function f(a,b){var d,e,f,g="";return g+="\n\n            <tr>\n\n                <td class='index'>",f={hash:{},data:b},g+=l((d=c.index||a&&a.index,d?d.call(a,(d=b,null==d||d===!1?d:d.index),f):k.call(a,"index",(d=b,null==d||d===!1?d:d.index),f)))+"</td>\n\n                <td class='link'><a href='./#/tagcategories/",(e=c.id)?e=e.call(a,{hash:{},data:b}):(e=a&&a.id,e=typeof e===m?e.call(a,{hash:{},data:b}):e),g+=l(e)+"/tagnames'>",(e=c.name)?e=e.call(a,{hash:{},data:b}):(e=a&&a.name,e=typeof e===m?e.call(a,{hash:{},data:b}):e),g+=l(e)+"</a></td>\n\n                <td>"+l((d=a&&a.tagnames,d=null==d||d===!1?d:d.length,typeof d===m?d.apply(a):d))+"</a></td>\n\n                <td><button type='button' data-action='delete-category' data-id='",(e=c.id)?e=e.call(a,{hash:{},data:b}):(e=a&&a.id,e=typeof e===m?e.call(a,{hash:{},data:b}):e),g+=l(e)+"' class='delete' title='Delete this tag category'>×</button></td>\n\n            </tr>\n\n        "}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var g,h,i,j="",k=c.helperMissing,l=this.escapeExpression,m="function",n=this,o=c.blockHelperMissing;return j+="\n<ul class='breadcrumb'>\n\n    <li><a href='./'>Home</a> <span class='divider'>/</span></li>\n    <li>Tag categories</li>\n\n</ul>\n\n<h2>Tag categories ("+l((g=b&&b.tagCategories,g=null==g||g===!1?g:g.length,typeof g===m?g.apply(b):g))+")</h2>\n\n<div class='input-append'>\n\n    <form>\n\n        <input type='text' data-id='category' placeholder='New tag category…'>\n\n        <button title='Add new tag category' type='submit' data-action='create-category' class='btn'>+</button>\n\n    </form>\n\n</div>\n\n<table class='table table-hover'>\n\n    <thead>\n        <tr>\n            <th>#</th>\n            <th>Tag category</th>\n            <th>Tag Count</th>\n        </tr>\n    </thead>\n\n    <tbody>\n\n        ",i={hash:{},inverse:n.noop,fn:n.program(1,f,e),data:e},(h=c.tagCategories)?h=h.call(b,i):(h=b&&b.tagCategories,h=typeof h===m?h.call(b,i):h),c.tagCategories||(h=o.call(b,h,i)),(h||0===h)&&(j+=h),j+="\n\n    </tbody>\n\n</table>"
}),this.Handlebars.templates.TagNamesContainer=Handlebars.template(function(a,b,c,d,e){function f(a){var b,c="";return c+="\n\n            <li><a href='./#/tagcategories'>Tag categories</a><span class='divider'>/</span></li>\n            <li class='active'>"+v((b=a&&a.tagCategory,b=null==b||b===!1?b:b.name,typeof b===u?b.apply(a):b))+"</li>\n\n        "}function g(){return"\n            <li class='active'>Tags</li>\n        "}function h(a,b){var d,e,f="";return f+='\n        <div class="add-to-categories">\n            <div class="category-list">\n                <div class="scroll up-scroll"><i class=\'icon-arrow-up\'></i></div>\n                ',e={hash:{},inverse:w.noop,fn:w.program(6,i,b),data:b},(d=c.tagCategories)?d=d.call(a,e):(d=a&&a.tagCategories,d=typeof d===u?d.call(a,e):d),c.tagCategories||(d=x.call(a,d,e)),(d||0===d)&&(f+=d),f+="\n                <div class=\"scroll down-scroll\"><i class='icon-arrow-down'></i></div>\n            </div>\n        </div>\n    "}function i(a,b){var d,e="";return e+='\n                    <p class="tag-category" id=\'',(d=c.id)?d=d.call(a,{hash:{},data:b}):(d=a&&a.id,d=typeof d===u?d.call(a,{hash:{},data:b}):d),e+=v(d)+"'>",(d=c.name)?d=d.call(a,{hash:{},data:b}):(d=a&&a.name,d=typeof d===u?d.call(a,{hash:{},data:b}):d),e+=v(d)+"</p>\n                "}function j(a,b,d){var e,f,g,h="";return h+="\n                <td class='double-list triple-list'>\n\n                    <h2>Unused tags ("+v((e=a&&a.unusedTagNames,e=null==e||e===!1?e:e.length,typeof e===u?e.apply(a):e))+")</h2>\n\n                    <table class='table table-hover'>\n\n                        <thead>\n                            <tr>\n                                <th>#</th>\n                                <th>Tag</th>\n                            </tr>\n                        </thead>\n\n                        <tbody>\n                            ",g={hash:{},inverse:w.noop,fn:w.programWithDepth(9,k,b,d),data:b},(f=c.unusedTagNames)?f=f.call(a,g):(f=a&&a.unusedTagNames,f=typeof f===u?f.call(a,g):f),c.unusedTagNames||(f=x.call(a,f,g)),(f||0===f)&&(h+=f),h+="\n                        </tbody>\n\n                    </table>\n                </td>\n            "}function k(a,b,d){var e,f,g,h="";return h+="\n                                <tr>\n                                    <td class='index'>",g={hash:{},data:b},h+=v((e=c.index||a&&a.index,e?e.call(a,(e=b,null==e||e===!1?e:e.index),g):y.call(a,"index",(e=b,null==e||e===!1?e:e.index),g)))+"</td>\n                                    <td class='link'><a href='./#/tagcategories/"+v((e=d&&d.tagCategory,e=null==e||e===!1?e:e.id,typeof e===u?e.apply(a):e))+"/tagnames/",(f=c.id)?f=f.call(a,{hash:{},data:b}):(f=a&&a.id,f=typeof f===u?f.call(a,{hash:{},data:b}):f),h+=v(f)+"/tags'>",(f=c.name)?f=f.call(a,{hash:{},data:b}):(f=a&&a.name,f=typeof f===u?f.call(a,{hash:{},data:b}):f),h+=v(f)+"</a></td>\n                                    <td><span class='button button-add' id='",(f=c.id)?f=f.call(a,{hash:{},data:b}):(f=a&&a.id,f=typeof f===u?f.call(a,{hash:{},data:b}):f),h+=v(f)+"' data-action=\"add-to-category\" title='Add tag to category'>+</span></td>\n                                </tr>\n                            "}function l(a,b,d){var e,f,g,h="";return h+="\n\n                            <tr>\n\n                                <td class='index'>",g={hash:{},data:b},h+=v((e=c.index||a&&a.index,e?e.call(a,(e=b,null==e||e===!1?e:e.index),g):y.call(a,"index",(e=b,null==e||e===!1?e:e.index),g)))+"</td>\n\n                                ",f=c["if"].call(a,d&&d.tagCategory,{hash:{},inverse:w.program(14,n,b),fn:w.programWithDepth(12,m,b,d),data:b}),(f||0===f)&&(h+=f),h+="\n\n                            </tr>\n\n                        "}function m(a,b,d){var e,f,g="";return g+="\n                                    <td class='link'><a href='./#/tagcategories/"+v((e=d&&d.tagCategory,e=null==e||e===!1?e:e.id,typeof e===u?e.apply(a):e))+"/tagnames/",(f=c.id)?f=f.call(a,{hash:{},data:b}):(f=a&&a.id,f=typeof f===u?f.call(a,{hash:{},data:b}):f),g+=v(f)+"/tags'>",(f=c.name)?f=f.call(a,{hash:{},data:b}):(f=a&&a.name,f=typeof f===u?f.call(a,{hash:{},data:b}):f),g+=v(f)+"</a></td>\n                                    <td><button type='button' data-action='delete-from-category' data-id='",(f=c.id)?f=f.call(a,{hash:{},data:b}):(f=a&&a.id,f=typeof f===u?f.call(a,{hash:{},data:b}):f),g+=v(f)+"' class='delete' title='Remove tag from category'>×</button></td>\n                                "}function n(a,b){var d,e="";return e+="\n                                    <td class='link' draggable='true' id='",(d=c.id)?d=d.call(a,{hash:{},data:b}):(d=a&&a.id,d=typeof d===u?d.call(a,{hash:{},data:b}):d),e+=v(d)+"'><a href='./#/tagnames/",(d=c.id)?d=d.call(a,{hash:{},data:b}):(d=a&&a.id,d=typeof d===u?d.call(a,{hash:{},data:b}):d),e+=v(d)+"/tags'>",(d=c.name)?d=d.call(a,{hash:{},data:b}):(d=a&&a.name,d=typeof d===u?d.call(a,{hash:{},data:b}):d),e+=v(d)+"</a></td>\n                                    <td>"+v((d=a&&a.tags,d=null==d||d===!1?d:d.length,typeof d===u?d.apply(a):d))+"</td>\n                                "}function o(a,b,d){var e,f,g,h="";return h+="\n\n                            <tr>\n\n                                <td class='index'>",g={hash:{},data:b},h+=v((e=c.index||a&&a.index,e?e.call(a,(e=b,null==e||e===!1?e:e.index),g):y.call(a,"index",(e=b,null==e||e===!1?e:e.index),g)))+"</td>\n\n                                ",f=c["if"].call(a,d&&d.tagCategory,{hash:{},inverse:w.program(14,n,b),fn:w.programWithDepth(17,p,b,d),data:b}),(f||0===f)&&(h+=f),h+="\n\n                            </tr>\n\n                        "}function p(a,b,d){var e,f,g="";return g+="\n                                    <td class='link'><a href='./#/tagcategories/"+v((e=d&&d.tagCategory,e=null==e||e===!1?e:e.id,typeof e===u?e.apply(a):e))+"/tagnames/",(f=c.id)?f=f.call(a,{hash:{},data:b}):(f=a&&a.id,f=typeof f===u?f.call(a,{hash:{},data:b}):f),g+=v(f)+"/tags'>",(f=c.name)?f=f.call(a,{hash:{},data:b}):(f=a&&a.name,f=typeof f===u?f.call(a,{hash:{},data:b}):f),g+=v(f)+"</a></td>\n                                    <td><button type='button' data-action='delete-from-category' data-id='",(f=c.id)?f=f.call(a,{hash:{},data:b}):(f=a&&a.id,f=typeof f===u?f.call(a,{hash:{},data:b}):f),g+=v(f)+"' class='delete'>×</button></td>\n                                "}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var q,r,s,t="",u="function",v=this.escapeExpression,w=this,x=c.blockHelperMissing,y=c.helperMissing;return t+="<section>\n\n    <ul class='breadcrumb'>\n\n        <li><a href='./'>Home</a> <span class='divider'>/</span></li>\n\n        ",q=c["if"].call(b,b&&b.tagCategory,{hash:{},inverse:w.program(3,g,e),fn:w.program(1,f,e),data:e}),(q||0===q)&&(t+=q),t+='\n\n        \n\n    </ul>\n\n    <button id="downloadTagListJson" class="btn" title="Download list of tags in JSON format">Export tags as JSON</button>\n\n    <span class="pull-left add-message"></span>\n\n    <span class="pull-right">\n        <div class="input-append">\n            <input type="text" class="span2" placeholder="Search" data-id="query-string" />\n            <button class="btn" data-action="search" title="Search for tags">\n                <i class="icon-search"></i>\n            </button>\n        </div>\n    </span>\n\n    ',q=c["if"].call(b,b&&b.tagCategories,{hash:{},inverse:w.noop,fn:w.program(5,h,e),data:e}),(q||0===q)&&(t+=q),t+="\n\n    <table class='double-list'>\n\n        <tr>\n\n            ",q=c["if"].call(b,b&&b.unusedTagNames,{hash:{},inverse:w.noop,fn:w.programWithDepth(8,j,e,b),data:e}),(q||0===q)&&(t+=q),t+="\n\n            <td class='double-list-left'>\n\n                <h2>Tags ("+v((q=b&&b.exerciseAnswerTagNames,q=null==q||q===!1?q:q.length,typeof q===u?q.apply(b):q))+")</h2>\n\n                <table class='table table-hover'>\n\n                    <thead>\n                        <tr>\n                            <th>#</th>\n                            <th>Tag</th>\n                        </tr>\n                    </thead>\n\n                    <tbody>\n\n                        ",s={hash:{},inverse:w.noop,fn:w.programWithDepth(11,l,e,b),data:e},(r=c.exerciseAnswerTagNames)?r=r.call(b,s):(r=b&&b.exerciseAnswerTagNames,r=typeof r===u?r.call(b,s):r),c.exerciseAnswerTagNames||(r=x.call(b,r,s)),(r||0===r)&&(t+=r),t+="\n\n                    </tbody>\n\n                </table>\n\n            </td>\n\n            <td class='double-list-right'>\n\n                <h2>Snapshot tags ("+v((q=b&&b.snapshotTagNames,q=null==q||q===!1?q:q.length,typeof q===u?q.apply(b):q))+")</h2>\n\n                <table class='table table-hover'>\n\n                    <thead>\n                        <tr>\n                            <th>#</th>\n                            <th>Tag</th>\n                        </tr>\n                    </thead>\n\n                    <tbody>\n\n                        ",s={hash:{},inverse:w.noop,fn:w.programWithDepth(16,o,e,b),data:e},(r=c.snapshotTagNames)?r=r.call(b,s):(r=b&&b.snapshotTagNames,r=typeof r===u?r.call(b,s):r),c.snapshotTagNames||(r=x.call(b,r,s)),(r||0===r)&&(t+=r),t+="\n\n                    </tbody>\n\n                </table>\n\n            </td>\n\n        </tr>\n\n    </table>\n\n</section>\n"}),this.Handlebars.templates.TagsContainer=Handlebars.template(function(a,b,c,d,e){function f(a){var b,c="";return c+="\n            <li><a href='/#/tagcategories'>Tag categories</a><span class='divider'>/</span></li>\n            <li><a href='/#/tagcategories/"+o((b=a&&a.tagCategory,b=null==b||b===!1?b:b.id,typeof b===n?b.apply(a):b))+"/tagnames'>"+o((b=a&&a.tagCategory,b=null==b||b===!1?b:b.name,typeof b===n?b.apply(a):b))+"</a><span class='divider'>/</span></li>\n        "}function g(a,b){var d,e,f,g="";return g+="\n\n                <tr>\n\n                    <td class='index'>",f={hash:{},data:b},g+=o((d=c.index||a&&a.index,d?d.call(a,(d=b,null==d||d===!1?d:d.index),f):p.call(a,"index",(d=b,null==d||d===!1?d:d.index),f)))+"</td>\n\n                    ",e=c["if"].call(a,a&&a.snapshot,{hash:{},inverse:q.program(6,i,b),fn:q.program(4,h,b),data:b}),(e||0===e)&&(g+=e),g+="\n\n                    <td class='link'><a href=\"./#/students/"+o((d=a&&a.student,d=null==d||d===!1?d:d.id,typeof d===n?d.apply(a):d))+'">'+o((d=a&&a.student,d=null==d||d===!1?d:d.name,typeof d===n?d.apply(a):d))+"</a></td>\n\n                </tr>\n\n            "}function h(a){var b,c="";return c+="\n\n                        <td class='link'><a href='./#/students/"+o((b=a&&a.student,b=null==b||b===!1?b:b.id,typeof b===n?b.apply(a):b))+"/courses/"+o((b=a&&a.course,b=null==b||b===!1?b:b.id,typeof b===n?b.apply(a):b))+"/exercises/"+o((b=a&&a.exercise,b=null==b||b===!1?b:b.id,typeof b===n?b.apply(a):b))+"/snapshots/"+o((b=a&&a.snapshot,b=null==b||b===!1?b:b.id,typeof b===n?b.apply(a):b))+"'><i class='icon-snapshot icon-gray icon-intext'/> "+o((b=a&&a.course,b=null==b||b===!1?b:b.name,typeof b===n?b.apply(a):b))+" / "+o((b=a&&a.exercise,b=null==b||b===!1?b:b.name,typeof b===n?b.apply(a):b))+" (Snapshot)</a></td>\n\n                    "}function i(a){var b,c="";return c+="\n\n                        <td class='link'><a href='./#/students/"+o((b=a&&a.student,b=null==b||b===!1?b:b.id,typeof b===n?b.apply(a):b))+"/courses/"+o((b=a&&a.course,b=null==b||b===!1?b:b.id,typeof b===n?b.apply(a):b))+"/exercises/"+o((b=a&&a.exercise,b=null==b||b===!1?b:b.id,typeof b===n?b.apply(a):b))+"'><i class='icon-answer icon-gray icon-intext'/> "+o((b=a&&a.course,b=null==b||b===!1?b:b.name,typeof b===n?b.apply(a):b))+" / "+o((b=a&&a.exercise,b=null==b||b===!1?b:b.name,typeof b===n?b.apply(a):b))+"</a></td>\n\n                    "}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var j,k,l,m="",n="function",o=this.escapeExpression,p=c.helperMissing,q=this,r=c.blockHelperMissing;return m+="<section>\n\n    <ul class='breadcrumb'>\n\n        <li><a href='./'>Home</a> <span class='divider'>/</span></li>\n\n        ",j=c["if"].call(b,b&&b.tagCategory,{hash:{},inverse:q.noop,fn:q.program(1,f,e),data:e}),(j||0===j)&&(m+=j),m+="\n\n        <li class='active'>Tags</li>\n\n    </ul>\n\n    <h2>Tags — ",(j=c.tagNameText)?j=j.call(b,{hash:{},data:e}):(j=b&&b.tagNameText,j=typeof j===n?j.call(b,{hash:{},data:e}):j),m+=o(j)+" ("+o((j=b&&b.tags,j=null==j||j===!1?j:j.length,typeof j===n?j.apply(b):j))+")</h2>\n\n    <table class='table table-hover'>\n\n        <thead>\n            <tr>\n                <th>#</th>\n                    <th>Tagged answer or snapshot</th>\n                <th>Student</th>\n            </tr>\n        </thead>\n\n        <tbody>\n\n            ",l={hash:{},inverse:q.noop,fn:q.program(3,g,e),data:e},(k=c.tags)?k=k.call(b,l):(k=b&&b.tags,k=typeof k===n?k.call(b,l):k),c.tags||(k=r.call(b,k,l)),(k||0===k)&&(m+=k),m+="\n\n        </tbody>\n\n    </table>\n\n</section>\n"}),this.Handlebars.templates.TreeFilenameContainer=Handlebars.template(function(a,b,c,d,e){function f(a){var b="";return b+="\n\n    <div class='visualization-filename'>"+k(typeof a===j?a.apply(a):a)+"</div>\n\n"}this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{};var g,h,i="",j="function",k=this.escapeExpression,l=this,m=c.blockHelperMissing;return h={hash:{},inverse:l.noop,fn:l.program(1,f,e),data:e},(g=c.filenames)?g=g.call(b,h):(g=b&&b.filenames,g=typeof g===j?g.call(b,h):g),c.filenames||(g=m.call(b,g,h)),(g||0===g)&&(i+=g),i+="\n"}),this.Handlebars.templates.SnapshotConceptsBubbleIntro=Handlebars.template(function(a,b,c,d,e){return this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{},"<strong>Show concepts</strong>\n\n<p>\n    Shows the concepts of the current snapshot.\n</p>\n\n"}),this.Handlebars.templates.SnapshotConceptsHeatmapIntro=Handlebars.template(function(a,b,c,d,e){return this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{},"<strong>Show concepts heatmap</strong>\n\n<p>\n    Shows all concepts on given solution.\n    Dark coloured cells are snapshots where value is high.\n</p>"}),this.Handlebars.templates.SnapshotDataIntro=Handlebars.template(function(a,b,c,d,e){return this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{},"<strong>Show snapshot data</strong>\n\n<p>\n    Shows the test outputs of current snapshot.\n</p>\n"}),this.Handlebars.templates.SnapshotEditorIntro=Handlebars.template(function(a,b,c,d,e){return this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{},"<strong>Snapshot content</strong>\n\n<p>\n    Here you can see the actual code.\n</p>"}),this.Handlebars.templates.SnapshotEditorModesIntro=Handlebars.template(function(a,b,c,d,e){return this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{},"<strong>Snapshot editor modes</strong>\n\n<p>\n    <i class=\"icon-folder icon-gray\"></i>\n    Show snapshot file list and tags\n<p>\n\n<p>\n    <i class=\"icon-split-editor icon-gray\"></i>\n    You can split the editor in half and see previous and current snapshots code side-by-side.\n<p>\n\n<p>\n    <i class=\"icon-diff icon-gray\"></i>\n    Toggle diff to see changed lines:\n    <ul>\n        <li><i style='color:green'>Green</i> is new inserted line</li>\n        <li><i style='color:red'>Red</i> deleted line</li>\n        <li><i style='color:blue'>Blue</i> modified line</li>\n    </ul>\n</p>\n"}),this.Handlebars.templates.SnapshotEditorSettingsIntro=Handlebars.template(function(a,b,c,d,e){return this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{},"<strong>Snapshot editor setting</strong>\n\n<p>\n    Change the settings of editor view. You can set diff to ignore empty lines.\n</p>\n"}),this.Handlebars.templates.SnapshotNavigationIntro=Handlebars.template(function(a,b,c,d,e){return this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{},"<strong>Browse snapshots</strong>\n\n<p>\n    You can also navigate using left and right arrow keys,\n    using slider or by clicking single snapshot in visualizations.\n</p>\n"}),this.Handlebars.templates.SnapshotTimelineIntro=Handlebars.template(function(a,b,c,d,e){return this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{},'<strong>Show timeline</strong>\n\n<p>\n    Shows the amount of change and time elapsed between snapshots.\n</p>\n\n<ul>\n    <li><i style="color:grey">Grey</i> circle if code won\'t compile.</li>\n    <li>Amount of failing tests in <i style="color:red">red</i></li>\n    <li>Passing tests in <i style="color:green">green</i></li>\n</ul>\n'}),this.Handlebars.templates.SnapshotTreeIntro=Handlebars.template(function(a,b,c,d,e){return this.compilerInfo=[4,">= 1.0.0"],c=this.merge(c,a.helpers),e=e||{},"<strong>Show file timeline</strong>\n\n<p>\n    Size of the circle shows the file size in given snapshot.\n    Type of modification is shown at the border:\n    <ul>\n        <li><i style='color:green'>Green</i> - new lines</li>\n        <li><i style='color:red'>Red</i> - deleted lines</li>\n        <li><i style='color:blue'>Blue</i> - modified lines</li>\n    </ul>\n</p>\n\n\n"});var config={storage:{setting:{editor:{ignoreEmptyLines:"codebrowser.setting.editor.ignoreEmptyLines",theme:"codebrowser.setting.editor.theme",fontSize:"codebrowser.setting.editor.fontSize"}},view:{SnapshotView:{browser:"codebrowser.view.SnapshotView.browser"},EditorView:{split:"codebrowser.view.EditorView.split",diff:"codebrowser.view.EditorView.diff"}}},api:{main:{root:localStorage.getItem("config.apiUrl")?localStorage.getItem("config.apiUrl"):"http://t-jamikarv.users.cs.helsinki.fi/codebrowser/app/"}},cache:{expires:3600},view:{container:"#container"},commentsView:{pageSize:10},editor:{configure:function(a){a.setReadOnly(!0),a.setPrintMarginColumn(!1),a.setDisplayIndentGuides(!1),a.getSession().setFoldStyle("markbeginend"),a.setTheme(localStorage.getItem(config.storage.setting.editor.theme)||"ace/theme/light"),a.setFontSize(parseInt(localStorage.getItem(config.storage.setting.editor.fontSize),10)||12),a.getSession().setTabSize(4),a.getSession().setUseWrapMode(!0),a.getSession().setWrapLimitRange(120,120)}}};$(document).ready(function(){codebrowser.initialize()});var codebrowser={app:{},helper:{},model:{},collection:{},view:{},controller:{},router:{},initialize:function(){window.onerror=function(a){var b=new codebrowser.view.ErrorView({model:{"class":"alert-error",message:"Oops! "+a}});codebrowser.controller.ViewController.push(b,!0)},$("#navigation-container").html((this.navigation=new codebrowser.view.NavigationView).render().el),$("#footer-container").html((this.footer=new codebrowser.view.FooterView).render().el),codebrowser.app.rootRouter=new codebrowser.router.RootRouter,codebrowser.app.studentRouter=new codebrowser.router.StudentRouter,codebrowser.app.studentGroupRouter=new codebrowser.router.StudentGroupRouter,codebrowser.app.courseRouter=new codebrowser.router.CourseRouter,codebrowser.app.exerciseRouter=new codebrowser.router.ExerciseRouter,codebrowser.app.snapshotRouter=new codebrowser.router.SnapshotRouter,codebrowser.app.tagRouter=new codebrowser.router.TagRouter,codebrowser.app.selectRouter=new codebrowser.router.SelectRouter,codebrowser.app.commentRouter=new codebrowser.router.CommentRouter,Backbone.history.start()}};codebrowser.helper.AceMode={mode:{c:"c_cpp",css:"css",h:"c_cpp",htm:"html",html:"html",java:"java",js:"javascript",json:"json",rb:"ruby",xml:"xml",yml:"yaml"},getModeForFilename:function(a){var b="text";if(-1!==a.indexOf(".")&&0!==a.indexOf(".")){var c=a.split("."),d=c[c.length-1];b=this.mode[d]||b}return"ace/mode/"+b}},Handlebars.registerHelper("breaklines",function(a){return a=Handlebars.Utils.escapeExpression(a),a=a.toString(),a=a.replace(/(\r\n|\n|\r)/gm,"<br>"),new Handlebars.SafeString(a)}),Handlebars.registerHelper("date",function(a,b){return moment(new Date(a)).format(b?"D.M.YYYY HH.mm.ss":"D.M.YYYY HH.mm")}),codebrowser.helper.Duration={calculate:function(a,b,c){var d,e,f=a-b,g=Math.round(f/1e3);if(g>60){var h=Math.round(g/60);if(h>60){var i=Math.round(h/60);if(i>24){var j=Math.round(i/24);d=j,e="day"}else d=i,e="hour"}else d=h,e="minute"}else d=g,e="second";return 1!==d&&(e+="s"),c&&(e=e.slice(0,1)),d+" "+e}},Handlebars.registerHelper("duration",function(a,b){return codebrowser.helper.Duration.calculate(a,b)}),Handlebars.registerHelper("filename",function(a){return _.last(a.split("/"))}),Handlebars.registerHelper("index",function(a){return a+1}),codebrowser.helper.ListViewFilter=function(a){this.rowSelector="tbody tr",this.targetCellSelector="td:eq(1) a",this.searchInputSelector='input[data-id="query-string"]',this.containerSelector="body",a&&(this.rowSelector=a.rowSelector||this.rowSelector,this.targetCellSelector=a.targetCellSelector||this.targetCellSelector,this.searchInputSelector=a.searchInputSelector||this.searchInputSelector,this.containerSelector=a.containerSelector||this.containerSelector),this.filterList=function(){var a=this._getQueryString().toLowerCase(),b=$(this.containerSelector).find(this.rowSelector),c=this;b.each(function(){$(this).show();var a=$(this).find(c.targetCellSelector),b=a.text();a.html(_.escape(b))}),""!==a&&b.each(function(){var b=$(this).find(c.targetCellSelector);c._nodeTextContains(b,a)?c._highlightMatch(b,a):(b.text(b.text()),$(this).hide())})},this._getQueryString=function(){return $(this.containerSelector).find(this.searchInputSelector).val().trim()},this._nodeTextContains=function(a,b){return-1!==a.text().toLowerCase().indexOf(b)},this._highlightMatch=function(a,b){var c=a.text(),d=c.toLowerCase().indexOf(b),e=b.length,f=_.escape(c.substring(0,d))+'<span class="search-highlight">'+_.escape(c.substring(d,d+e))+"</span>"+_.escape(c.substring(d+e));a.html(f)}},Handlebars.registerHelper("pluralize",function(a,b){return 1===a?b:b+"s"});var Utils={getLocalStorageValue:function(a,b){return null===localStorage.getItem(a)&&localStorage.setItem(a,b),localStorage.getItem(a)},parseConceptData:function(a){return a.forEach(function(a){a.value=parseInt(a.size,10)}),a.sort(function(a,b){return a.value<b.value?1:a.value>b.value?-1:0}),{children:a}}};codebrowser.model.Comment=Backbone.RelationalModel.extend({urlRoot:function(){if(!(this.attributes.student&&this.attributes.course&&this.attributes.exercise&&this.attributes.student.id&&this.attributes.course.id&&this.attributes.exercise.id))throw new Error("Attributes student.id, course.id and exercise.id are required to fetch a comment.");var a=config.api.main.root+"students/"+this.attributes.student.id+"/courses/"+this.attributes.course.id+"/exercises/"+this.attributes.exercise.id;return this.attributes.snapshot&&this.attributes.snapshot.id&&(a+="/snapshots/"+this.attributes.snapshot.id),a+"/comments"}}),codebrowser.model.Concept=Backbone.Model.extend({}),codebrowser.model.Course=Backbone.RelationalModel.extend({urlRoot:config.api.main.root+"courses",relations:[{type:Backbone.HasMany,key:"exercises",relatedModel:"codebrowser.model.Exercise",collectionType:"codebrowser.collection.ExerciseCollection",reverseRelation:{key:"course"}}]}),codebrowser.model.Diff=function(a,b,c){var d={replace:0,insert:0,"delete":0,total:function(){return this.replace+this.insert+this["delete"]}},e={insert:[],replace:[],"delete":[],all:[]};this.createOperation=function(a,b,c,d,e){var f=[];return f.push(a),f.push(b),f.push(c),f.push(d),f.push(e),f},this.createBackendDifference=function(a,b,c){c.replace=a.modified,c.insert=a.inserted,c["delete"]=a.deleted,b.all=a.differences;for(var d=0;d<b.all.length;d++){var e=b.all[d];"insert"===e.type?b.insert.push(e):"replace"===e.type?b.replace.push(e):"delete"===e.type&&b["delete"].push(e)}},this.createFrontendDifference=function(c,d){for(var e=difflib.stringAsLines(a),f=difflib.stringAsLines(b),g=new difflib.SequenceMatcher(e,f),h=g.get_opcodes(),i=0,j=0;j<h.length;j++){var k=h[j],l={type:k[0],rowStart:k[3],rowEnd:k[4]-1,offset:i,overwrite:!1};if("equal"!==l.type){if("replace"===l.type){var m=_.clone(l),n=k[2]-k[1]-1,o=k[4]-k[3]-1,p=l.rowEnd-l.rowStart+1,q=k[2]-k[1];if(0===f.slice(k[3],k[4]).join("").length&&(l.overwrite=!0,l.type="delete",n-o>0)){var r=n-o;k[2]-=r;var s=k[2]-k[1],t=this.createOperation("delete",k[1]+s,k[2]+r,k[3]+s,k[4]);h.splice(j+1,0,t)}if(0===e.slice(k[1],k[2]).join("").length&&(l.type="insert"),n>o&&"delete"!==l.type&&(c.replace.push(l),c.all.push(l),d[l.type]+=l.rowEnd-l.rowStart+1,l=m,l.type="delete",k[1]+=p,k[3]+=p),o>n&&"insert"!==l.type)if(l.rowEnd=l.rowStart+q-1,0===f.slice(l.rowStart,l.rowEnd+1).join("").length){l.type="delete",l.overwrite=!0;var u=this.createOperation("insert",k[1],k[2],k[3]+(l.rowEnd-l.rowStart+1),k[4]);h.splice(j+1,0,u)}else{c.replace.push(l),c.all.push(l),d[l.type]+=l.rowEnd-l.rowStart+1;var v=l.rowEnd+1;l=m,l.type="insert",l.rowStart=v}}if("delete"===l.type){var w=e.slice(k[1],k[2]),x=w.join("\n");if(l.overwrite||(x+="\n"),l.rowStart=k[3],l.rowEnd=l.rowStart+(k[2]-k[1]-1),l=_.extend(l,{fromRowStart:k[1],fromRowEnd:k[2]-1,lines:x}),!l.overwrite){var y=l.rowEnd-l.rowStart+1;i+=y}}d[l.type]+=l.rowEnd-l.rowStart+1,c[l.type].push(l),c.all.push(l)}}},c?this.createBackendDifference(c,e,d):this.createFrontendDifference(e,d),this.getCount=function(){return d},this.getDifferences=function(){return e}},codebrowser.model.Exercise=Backbone.RelationalModel.extend({urlRoot:function(){return this.get("course").url()+"/exercises"}}),codebrowser.model.File=Backbone.RelationalModel.extend({totalLines:null,content:"",urlRoot:function(){return config.api.main.root+"students/"+this.get("snapshot").get("studentId")+"/courses/"+this.get("snapshot").get("courseId")+"/exercises/"+this.get("snapshot").get("exerciseId")+"/snapshots/"+this.get("snapshot").id+"/files"},getContent:function(){var a=localStorage.getItem(config.storage.setting.editor.ignoreEmptyLines),b=this.content;return b=b.replace(/\r\n|\r/g,"\n"),b=b.replace(/\t/g,"    "),a&&"true"===a&&(b=b.replace(/^ +$/gm,"")),b},lines:function(a){return a&&(this.totalLines=a),this.totalLines?this.totalLines:this.getContent().split("\n").length},getFolder:function(){return this.get("name").substring(0,this.get("name").lastIndexOf("/"))},getName:function(){return _.last(this.get("name").split("/"))},fetchContent:function(a){if(0!==this.content.length)return void a(this.getContent(),null);var b=this,c=$.get(this.urlRoot()+"/"+this.id+"/content",function(c){b.content=c,a(b.getContent(),null)});c.fail(function(){a(null,c)})}}),codebrowser.model.Snapshot=Backbone.RelationalModel.extend({urlRoot:function(){if(!this.get("studentId")||!this.get("courseId")||!this.get("exerciseId"))throw new Error("Attributes studentId, courseId and exerciseId are required to fetch a snapshot.");return config.api.main.root+"students/"+this.get("studentId")+"/courses/"+this.get("courseId")+"/exercises/"+this.get("exerciseId")+"/snapshots"},relations:[{type:Backbone.HasMany,key:"files",relatedModel:"codebrowser.model.File",collectionType:"codebrowser.collection.FileCollection",reverseRelation:{key:"snapshot"}},{type:Backbone.HasOne,key:"course",relatedModel:"codebrowser.model.Course"},{type:Backbone.HasOne,key:"exercise",relatedModel:"codebrowser.model.Exercise"}],initialize:function(){this.collection&&(this.set("studentId",this.collection.studentId),this.set("courseId",this.collection.courseId),this.set("exerciseId",this.collection.exerciseId))},getFiles:function(){var a={};return this.get("files").each(function(b){var c=b.getFolder();a[c]||(a[c]=[]),a[c].push(b.toJSON())}),a}}),codebrowser.model.Student=Backbone.RelationalModel.extend({urlRoot:config.api.main.root+"students",relations:[{type:Backbone.HasMany,key:"courses",relatedModel:"codebrowser.model.Course",collectionType:"codebrowser.collection.CourseCollection"}]}),codebrowser.model.StudentGroup=Backbone.RelationalModel.extend({urlRoot:config.api.main.root+"studentgroups",relations:[{type:Backbone.HasMany,key:"students",relatedModel:"codebrowser.model.Student",collectionType:"codebrowser.collection.StudentCollection"}]}),codebrowser.model.Tag=Backbone.RelationalModel.extend({urlRoot:function(){if(!(this.attributes.student&&this.attributes.course&&this.attributes.exercise&&this.attributes.student.id&&this.attributes.course.id&&this.attributes.exercise.id))throw new Error("Attributes student.id, course.id and exercise.id are required to fetch a tag.");var a=config.api.main.root+"students/"+this.attributes.student.id+"/courses/"+this.attributes.course.id+"/exercises/"+this.attributes.exercise.id;return this.attributes.snapshot&&this.attributes.snapshot.id&&(a+="/snapshots/"+this.attributes.snapshot.id),a+"/tags"}}),codebrowser.model.TagCategory=Backbone.RelationalModel.extend({urlRoot:config.api.main.root+"tagcategories",sync:function(a,b,c){return c.tagid&&(c.url=config.api.main.root+"tagcategories/"+this.id+"/tagnames/"+c.tagid),Backbone.sync(a,b,c)}}),codebrowser.model.TagName=Backbone.RelationalModel.extend({urlRoot:config.api.main.root+"tagnames"}),codebrowser.collection.CommentCollection=Backbone.Collection.extend({model:codebrowser.model.Comment,comparator:function(a){return-a.get("createdAt")},url:function(){return this.studentId&&this.courseId&&this.exerciseId&&this.snapshotId?config.api.main.root+"students/"+this.studentId+"/courses/"+this.courseId+"/exercises/"+this.exerciseId+"/snapshots/"+this.snapshotId+"/comments"+this._getQueryString():config.api.main.root+"comments"+this._getQueryString()},initialize:function(a,b){this.pagesize=10,b&&(this.studentId=b.studentId,this.courseId=b.courseId,this.exerciseId=b.exerciseId,this.snapshotId=b.snapshotId,this.page=b.page,this.query=b.query)},_getQueryString:function(){var a="?page="+(void 0!==this.page?this.page:0);return a+="&size="+config.commentsView.pageSize,void 0!==this.query&&""!==this.query&&(a+="&query="+encodeURIComponent(this.query)),a}}),codebrowser.collection.ConceptCollection=Backbone.Collection.extend({model:codebrowser.model.Concept,comparator:"name",initialize:function(a,b){a&&(this.models=a),b&&(b.studentId&&(this.studentId=b.studentId),b.courseId&&(this.courseId=b.courseId),b.exerciseId&&(this.exerciseId=b.exerciseId),b.snapshotId&&(this.snapshotId=b.snapshotId))},url:function(){return config.api.main.root+"students/"+this.studentId+"/courses/"+this.courseId+"/exercises/"+this.exerciseId+"/snapshots/"+this.snapshotId+"/concepts"},getMaxSize:function(){for(var a=0,b=0;b<this.size();b++)a=Math.max(a,this.at(b).get("size"));return a}}),codebrowser.collection.CourseCollection=Backbone.Collection.extend({model:codebrowser.model.Course,url:function(){return this.studentId?config.api.main.root+"students/"+this.studentId+"/courses":config.api.main.root+"courses"},initialize:function(a,b){b&&(this.studentId=b.studentId)}}),codebrowser.collection.ExerciseCollection=Backbone.Collection.extend({model:codebrowser.model.Exercise,url:function(){if(!this.courseId)throw new Error("Option courseId is required to fetch exercises.");return this.studentId?config.api.main.root+"students/"+this.studentId+"/courses/"+this.courseId+"/exercises":config.api.main.root+"courses/"+this.courseId+"/exercises"},initialize:function(a,b){b&&(this.studentId=b.studentId,this.courseId=b.courseId)}}),codebrowser.collection.ExerciseConceptsCollection=Backbone.Collection.extend({model:codebrowser.model.Concept,comparator:"name",initialize:function(a,b){a&&(this.models=a),b&&(b.studentId&&(this.studentId=b.studentId),b.courseId&&(this.courseId=b.courseId),b.exerciseId&&(this.exerciseId=b.exerciseId))},url:function(){return config.api.main.root+"students/"+this.studentId+"/courses/"+this.courseId+"/exercises/"+this.exerciseId+"/concepts/"},getMaxSize:function(){for(var a=0,b=0;b<this.size();b++)a=Math.max(a,this.at(b).get("size"));return a}}),codebrowser.collection.FileCollection=Backbone.Collection.extend({model:codebrowser.model.File,url:function(){return config.api.main.root+"students/"+this.snapshot.get("studentId")+"/courses/"+this.snapshot.get("courseId")+"/exercises/"+this.snapshot.get("exerciseId")+"/snapshots/"+this.snapshot.id+"/files"}}),codebrowser.collection.SnapshotCollection=Backbone.Collection.extend({model:codebrowser.model.Snapshot,differencesDone:!1,differences:[],url:function(){if(!this.studentId||!this.courseId||!this.exerciseId)throw new Error("Options studentId, courseId and exerciseId are required to fetch snapshots.");
return config.api.main.root+"students/"+this.studentId+"/courses/"+this.courseId+"/exercises/"+this.exerciseId+"/snapshots"},initialize:function(a,b){b&&(this.studentId=b.studentId,this.courseId=b.courseId,this.exerciseId=b.exerciseId)},getDuration:function(a,b){return this.at(a).get("snapshotTime")-this.at(b).get("snapshotTime")},getMinDuration:function(){var a=this,b=Number.MAX_VALUE;return this.each(function(c,d){if(0!==d){var e=a.getDuration(d,d-1);b>e&&(b=e)}}),b},getMaxDuration:function(){var a=this,b=Number.MIN_VALUE;return this.each(function(c,d){if(0!==d){var e=a.getDuration(d,d-1);e>b&&(b=e)}}),b},getMinAndMaxFileSize:function(){var a={min:Number.MAX_VALUE,max:Number.MIN_VALUE};return this.each(function(b){b.get("files").each(function(b){var c=b.get("filesize");a.min=Math.min(a.min,c),a.max=Math.max(a.max,c)})}),a},getDifference:function(a,b){var c=this.differences[a];return c?c[b]?c[b]:null:null},getDifferences:function(a){if(this.differencesDone)return void a(this.differences);this.differences=[];var b=this,c=_.after(this.length,function(){b.differencesDone=!0,a(b.differences)});this.at(0).get("files").models[0].attributes.diffs?(this.getDifferencesFromBackend(this),a(b.differences)):this.getDifferencesFromFrontend(this,c)},getDifferencesFromFrontend:function(a,b){a.each(function(c,d){var e=a.at(d-1);a.differences[d]||(a.differences[d]={total:0,lines:0});var f=c.get("files"),g=_.after(f.length,function(){b()});f.each(function(b,c){var f=b.get("name");a.differences[d].filename||(a.differences[d][f]=null);var h=b,i=null;i=e?e.get("files").findWhere({name:f}):h,i||(i=h);var j={currentFile:h,previousFile:i,snapshotIndex:d,fileIndex:c,fileSynced:_.after(2,function(){var b=j.snapshotIndex,c=j.currentFile.get("name"),d=j.previousFile.getContent();j.previousFile===j.currentFile&&(d="");var e=new codebrowser.model.Diff(d,j.currentFile.getContent(),null);a.differences[b].total+=e.getCount().total(),a.differences[b].lines+=j.currentFile.lines(),a.differences[b][c]=e,g()})};i!==h&&i.fetchContent(function(a,b){if(b)throw new Error("Failed file fetch.");this.fileSynced()}.bind(j)),h.fetchContent(function(a,b){if(b)throw new Error("Failed file fetch.");this.currentFile===this.previousFile&&this.fileSynced(),this.fileSynced()}.bind(j))})})},getDifferencesFromBackend:function(a){this.each(function(b,c){a.differences[c]||(a.differences[c]={total:0,lines:0});var d=b.get("files");d.each(function(b,d){var e=b.get("name");a.differences[c].filename||(a.differences[c][e]=null);var f=a.at(c).get("files").models[d].attributes.diffs;a.differences[c].total+=f.total,a.differences[c].lines+=b.lines(f.lines);var g=new codebrowser.model.Diff(null,null,f);a.differences[c][e]=g})}),a.differencesDone=!0},getFiles:function(){var a=[];return this.each(function(b){var c=b.get("files");c.each(function(b){a.indexOf(b.getName())<0&&a.push(b.getName())})}),a}}),codebrowser.collection.StudentCollection=Backbone.Collection.extend({model:codebrowser.model.Student,url:function(){return this.studentGroupId?config.api.main.root+"studentgroups/"+this.studentGroupId+"/students":this.courseId&&this.exerciseId?config.api.main.root+"courses/"+this.courseId+"/exercises/"+this.exerciseId+"/students":this.courseId?config.api.main.root+"courses/"+this.courseId+"/students":config.api.main.root+"students"},initialize:function(a,b){b&&(this.courseId=b.courseId,this.exerciseId=b.exerciseId,this.studentGroupId=b.studentGroupId)},byPartialName:function(a){var b=this.filter(function(b){return-1!==b.get("name").indexOf(a)});return new codebrowser.collection.StudentCollection(b)}}),codebrowser.collection.StudentGroupCollection=Backbone.Collection.extend({model:codebrowser.model.StudentGroup,url:function(){return config.api.main.root+"studentgroups"}}),codebrowser.collection.TagCollection=Backbone.Collection.extend({model:codebrowser.model.Tag,url:function(){if(this.tagNameId)return config.api.main.root+"tagnames/"+this.tagNameId+"/tags";if(!this.studentId||!this.courseId||!this.exerciseId)throw new Error("Options studentId, courseId and exerciseId are required to fetch tags.");return config.api.main.root+"students/"+this.studentId+"/courses/"+this.courseId+"/exercises/"+this.exerciseId+"/tags"},initialize:function(a,b){b&&(this.tagNameId=b.tagNameId,this.studentId=b.studentId,this.courseId=b.courseId,this.exerciseId=b.exerciseId)}}),codebrowser.collection.TagCategoryCollection=Backbone.Collection.extend({model:codebrowser.model.TagCategory,url:function(){return config.api.main.root+"tagcategories"},initialize:function(){}}),codebrowser.collection.TagNameCollection=Backbone.Collection.extend({model:codebrowser.model.TagName,url:function(){if(this.tagCategoryId){if(this.onlySnapshotTags)return config.api.main.root+"tagcategories/"+this.tagCategoryId+"/tagnames/snapshots";if(this.onlyExerciseAnswerTags)return config.api.main.root+"tagcategories/"+this.tagCategoryId+"/tagnames/exercises";if(this.unusedTags)return config.api.main.root+"tagcategories/"+this.tagCategoryId+"/tagnames/unused"}return this.onlySnapshotTags?config.api.main.root+"tagnames/snapshots":this.onlyExerciseAnswerTags?config.api.main.root+"tagnames/exerciseanswers":config.api.main.root+"tagnames"},initialize:function(a,b){b&&(this.onlySnapshotTags=b.onlySnapshotTags,this.onlyExerciseAnswerTags=b.onlyExerciseAnswerTags,this.tagCategoryId=b.tagCategoryId,this.unusedTags=b.unusedTags)}}),codebrowser.view.CommentsView=Backbone.View.extend({id:"comments-container",template:Handlebars.templates.CommentsContainer,showBreadcrumb:!0,events:{'click [data-action="delete-comment"]':"confirmDelete",'click [data-action="toggle-comment-edit"]':"setCommentEditable","blur .comment-text":"updateComment","click span.cnext":"cNextPage","click span.cprev":"cPrevPage",'click [data-action="search"]':"searchComments"},initialize:function(a){a&&(this.collection=a.collection,this.showBreadcrumb=a.showBreadcrumb)},render:function(){if("false"===localStorage.getItem("config.comments"))throw new Error("Your backend does not support comments.");this.collection&&this._markCommentsReadFlags();var a={showBreadcrumb:this.showBreadcrumb,firstPage:this.firstPage,lastPage:this.lastPage,totalPages:this.totalPages,numberOfElements:this.numberOfElements,totalElements:this.totalElements,page:parseInt(this.page,10)+1,prevPage:this.page>0?parseInt(this.page,10)-1:0,nextPage:this.page<this.totalPages-1?parseInt(this.page,10)+1:this.totalPages-1,onlyOnePage:this.firstPage&&this.lastPage?!0:!1,snapshotView:this.snapshotView,query:this.query};this.collection&&(a=_.extend(a,{comments:this.collection.toJSON()}));var b=this.template(a);this.$el.html(b),this.delegateEvents()},cNextPage:function(){this.page+=1,this.update()},cPrevPage:function(){this.page-=1,this.update()},confirmDelete:function(a){var b=window.confirm("Are you sure you want\nto delete this comment?");if(b){var c=this._getEventTargetDataId(a);this._delete(c)}},update:function(){var a=this;this.collection.fetch({cache:!1,expires:0,success:function(b,c){a.collection.reset(c.content),a.page=c.page,a.firstPage=c.firstPage,a.lastPage=c.lastPage,a.totalPages=c.totalPages,a.numberOfElements=c.numberOfElements,a.totalElements=c.totalElements,a.render()},error:function(){throw new Error("Failed comments fetch.")}})},setCommentEditable:function(a){var b=this._getEventTargetDataId(a),c=this.collection.get(b),d=$('.comment-text[data-id="'+b+'"]'),e=this._createCommentTextarea(c);d.after(e),d.remove(),e.focus()},updateComment:function(a){var b=$(a.target),c=b.data("id"),d=b.val().trim(),e=this.collection.get(c);e.set({comment:d}),this.render(),e.save({error:function(){throw new Error("Failed comment update.")}})},searchComments:function(a){a.preventDefault();var b=$("body").find('input[data-id="query-string"]').val().trim(),c=this;this.collection.query=b,this.collection.fetch({cache:!1,expires:0,success:function(a,d){c.collection.reset(d.content),c.page=0,c.firstPage=d.firstPage,c.lastPage=d.lastPage,c.totalPages=d.totalPages,c.numberOfElements=d.numberOfElements,c.totalElements=d.totalElements,c.query=b,c.render(),$('[data-id="query-string"]').focus()},error:function(){throw new Error("Failed comments fetch.")}})},_markCommentsReadFlags:function(){var a=this._getCommentsRead(),b=a;this.collection.each(function(c){var d=c.get("id"),e=a.indexOf(d)>-1;c.set("isRead",e,{silent:!0}),-1===b.indexOf(d)&&b.push(d)}),this._setCommentsRead(b)},_getCommentsRead:function(){var a=localStorage.getItem("commentsRead");return null===a?[]:JSON.parse(a)},_setCommentsRead:function(a){localStorage.setItem("commentsRead",JSON.stringify(a))},_delete:function(a){var b=this.collection.get(a),c=this;b.destroy({success:function(){c.update()},error:function(){throw new Error("Failed comment delete.")}})},_createCommentTextarea:function(a){var b=$("<textarea>");return b.attr("data-id",a.id),b.addClass("comment-text"),b.val(a.get("comment")),b},_getEventTargetDataId:function(a){var b=$(a.target).data("id")||$(a.target).parent().data("id");return b}}),codebrowser.view.CoursesView=Backbone.View.extend({id:"courses-container",template:Handlebars.templates.CoursesContainer,events:{'click [data-action="search"]':"filterCourseListByName",'keyup [data-id="query-string"]':"filterCourseListByName",'keypress [data-id="query-string"]':"filterCourseListByName"},render:function(){var a={studentId:this.collection.studentId,courses:this.collection.toJSON(),amountOfStudents:this.collection.amountOfStudents};this.collection.studentId&&(a=_.extend(a,{student:this.student.toJSON()}));var b=this.template(a);this.$el.html(b)},filterCourseListByName:function(){if(!this.filterHelper){var a={containerSelector:"#"+this.id};this.filterHelper=new codebrowser.helper.ListViewFilter(a)}this.filterHelper.filterList()}}),codebrowser.view.EditorSettingsView=Backbone.View.extend({id:"editor-settings-container",template:Handlebars.templates.EditorSettingsContainer,events:{'click [data-action="save"]':"save"},initialize:function(a){this.parentView=a.parentView,this.render()},render:function(){var a=localStorage.getItem(config.storage.setting.editor.ignoreEmptyLines),b=parseInt(localStorage.getItem(config.storage.setting.editor.fontSize),10),c=localStorage.getItem(config.storage.setting.editor.theme),d=$(this.template());a&&$('[data-id="ignore-empty-lines"]',d).prop("checked","true"===a),c&&$('[data-id="theme"] option[value="'+c+'"]',d).prop("selected",!0),b&&$('[data-id="font-size"] option[value="'+b+'"]',d).prop("selected",!0),this.$el.html(d)},save:function(){localStorage.setItem(config.storage.setting.editor.ignoreEmptyLines,$('[data-id="ignore-empty-lines"]').prop("checked")),localStorage.setItem(config.storage.setting.editor.theme,$('[data-id="theme"] option:selected',this.$el).val()),localStorage.setItem(config.storage.setting.editor.fontSize,$('[data-id="font-size"] option:selected',this.$el).val()),this.parentView.configure(),this.parentView.update(this.parentView.previousModel,this.parentView.model)}}),codebrowser.view.EditorView=Backbone.View.extend({id:"editor-container",template:{topContainer:Handlebars.templates.EditorTopContainer},decorations:{"main-editor":[],"side-editor":[]},markers:{"main-editor":[],"side-editor":[]},insertedLines:{"main-editor":[]},replacedLines:{"main-editor":[]},events:{"click #editor-inspector":"toggleInspector"},split:!1,canSplit:function(){return this.model!==this.previousModel},diff:!1,differences:new codebrowser.model.Diff("",""),inspector:!1,initialize:function(){this.$el.hide(),this.topContainer=$("<div>",{id:"editor-top-container"}),this.editorElement=$("<div>",{id:"editor"}),this.settingsView=new codebrowser.view.EditorSettingsView({parentView:this}),this.sideEditorElement=$("<div>",{id:"side-editor"}).hide(),this.mainEditorElement=$("<div>",{id:"main-editor"}),this.editorElement.append(this.sideEditorElement),this.editorElement.append(this.mainEditorElement),this.$el.append(this.topContainer),this.$el.append(this.editorElement),this.$el.append(this.settingsView.el),this.sideEditor=ace.edit(this.sideEditorElement.get(0)),this.mainEditor=ace.edit(this.mainEditorElement.get(0)),this.configure()},remove:function(){this.settingsView.remove(),Backbone.View.prototype.remove.call(this)},configure:function(){config.editor.configure(this.mainEditor),config.editor.configure(this.sideEditor)},removeDecorations:function(a){for(;this.decorations[a.container.id].length>0;){var b=this.decorations[a.container.id].pop();a.getSession().removeGutterDecoration(b.row,b.style)}},removeMarkers:function(a){for(;this.markers[a.container.id].length>0;)a.getSession().removeMarker(this.markers[a.container.id].pop())},removeInsertedLines:function(a){for(var b=ace.require("ace/range").Range;this.insertedLines[a.container.id].length>0;){var c=this.insertedLines[a.container.id].pop();a.getSession().remove(new b(c.rowStart,0,c.rowEnd+1,0))}},resetReplacedLines:function(a){for(var b=ace.require("ace/range").Range;this.replacedLines[a.container.id].length>0;){var c=this.replacedLines[a.container.id].pop();a.getSession().replace(new b(c.rowStart,0,c.rowEnd,a.getSession().getLine(c.rowEnd).length),c.lines)}},clearDiff:function(){this.removeDecorations(this.mainEditor),this.removeDecorations(this.sideEditor),this.resetReplacedLines(this.mainEditor),this.removeInsertedLines(this.mainEditor),this.removeMarkers(this.mainEditor),this.removeMarkers(this.sideEditor)},render:function(){var a={split:this.split,previous:this.previousModel.toJSON(),difference:this.differences.getCount(),percentageOfChange:Math.round(this.differences.getCount().total()/this.model.lines()*100)},b=$(this.template.topContainer(_.extend(this.model.toJSON(),a)));$("#editor-inspector",b).popover({animation:!1,html:!0,trigger:"click"}),this.topContainer.html(b),this.inspector&&$("#editor-inspector").popover("toggle")},fold:function(a,b){_.each(b,function(b){a.getSession().foldAll(b.start.row,b.end.row,0)})},decorateGutter:function(a,b,c,d){for(var e=b;c>=e;e++)this.decorations[a.container.id].push({row:e,style:"decoration gutter-"+d}),a.getSession().addGutterDecoration(e,"decoration gutter-"+d)},setContent:function(a,b,c){var d=_.clone(a.getSession().getAllFolds()),e=a.getSelection().getSelectionAnchor(),f=a.getSession().getScrollTop();this.removeDecorations(a),this.removeMarkers(a),a.setValue(b),this.fold(a,d),a.moveCursorToPosition(e),a.getSelection().clearSelection(),a.getSession().setScrollTop(f),a.getSession().setMode(c)},update:function(a,b,c){var d=this;this.model=b,this.previousModel=a;var e=_.after(2,function(){var a=d.sideEditor.getValue(),b=d.mainEditor.getValue();d.differences=new codebrowser.model.Diff(a,b,c),d.toggleDiff(d.diff),d.render()}),f=codebrowser.helper.AceMode.getModeForFilename(this.model.get("name"));this.previousModel===this.model?this.toggleSplit(!1):this.split||this.toggleSplit("true"===localStorage.getItem(config.storage.view.EditorView.split)),this.diff?this.clearDiff():this.toggleDiff("true"===localStorage.getItem(config.storage.view.EditorView.diff)),this.previousModel!==this.model&&a.fetchContent(function(a,b){if(b)throw new Error("Failed file fetch.");d.setContent(d.sideEditor,a,f),e()}),this.model.fetchContent(function(a,b){if(b)throw new Error("Failed file fetch.");d.previousModel===d.model&&(d.setContent(d.sideEditor,null,f),e()),d.setContent(d.mainEditor,a,f),e()}),this.$el.show(),this.render()},didResize:function(){this.inspector&&($("#editor-inspector").popover("toggle"),$("#editor-inspector").popover("toggle")),this.mainEditor.resize(),this.sideEditor.resize()},didSplit:function(){this.diff&&(this.clearDiff(),this.toggleDiff(this.diff)),this.mainEditor.resize(),this.sideEditor.resize(),this.mainEditor.renderer.updateFull(),this.sideEditor.renderer.updateFull(),this.render()},toggleSplit:function(a){return void 0!==a?this.split=a:(this.split=!this.split,localStorage.setItem(config.storage.view.EditorView.split,this.split)),this.split?(this.sideEditorElement.css({"float":"left",width:"50%"}),this.sideEditorElement.show(),this.mainEditorElement.css({"float":"right",width:"50%"}),void this.didSplit()):(this.sideEditorElement.hide(),this.mainEditorElement.css({"float":"",width:""}),void this.didSplit())},toggleDiff:function(a){var b=ace.require("ace/range").Range;if(void 0!==a?this.diff=a:(this.diff=!this.diff,localStorage.setItem(config.storage.view.EditorView.diff,this.diff)),this.diff)for(var c=0;c<this.differences.getDifferences().all.length;c++){var d,e=this.differences.getDifferences().all[c];if("delete"===e.type){if(this.split){d=this.sideEditor.getSession().addMarker(new b(e.fromRowStart,0,e.fromRowEnd,1),e.type,"fullLine"),this.decorateGutter(this.sideEditor,e.fromRowStart,e.fromRowEnd,"delete"),this.markers["side-editor"].push(d);continue}e.overwrite?(this.replacedLines["main-editor"].push({rowStart:e.rowStart+e.offset,rowEnd:e.rowEnd+e.offset,lines:this.mainEditor.getSession().getLines(e.rowStart+e.offset,e.rowEnd+e.offset).join("\n")}),this.mainEditor.getSession().replace(new b(e.rowStart+e.offset,0,e.rowEnd+e.offset,this.mainEditor.getSession().getLine(e.rowEnd).length),e.lines)):(this.mainEditor.getSession().insert({row:e.rowStart+e.offset,column:0},e.lines),this.insertedLines["main-editor"].push({rowStart:e.rowStart+e.offset,rowEnd:e.rowEnd+e.offset})),this.decorateGutter(this.mainEditor,e.rowStart+e.offset,e.rowEnd+e.offset,"delete")}var f=0;this.split||(f=e.offset),d=this.mainEditor.getSession().addMarker(new b(e.rowStart+f,0,e.rowEnd+f,1),e.type,"fullLine"),this.decorateGutter(this.mainEditor,e.rowStart+f,e.rowEnd+f,e.type),this.markers["main-editor"].push(d)}else this.clearDiff()},toggleInspector:function(a){a.preventDefault(),this.inspector=!this.inspector}}),codebrowser.view.ErrorView=Backbone.View.extend({id:"error-container",template:Handlebars.templates.Error,render:function(){var a=this.template(this.model);this.$el.html(a)}}),codebrowser.view.ExercisesView=Backbone.View.extend({id:"exercises-container",template:Handlebars.templates.ExercisesContainer,render:function(){var a={studentId:this.collection.studentId,courseId:this.collection.courseId,course:this.course.toJSON(),exercises:this.collection.toJSON(),viewPath:this.viewPath};this.student&&(a=_.extend(a,{student:this.student.toJSON()}));var b=this.template(a);this.$el.html(b)}}),codebrowser.view.FooterView=Backbone.View.extend({id:"footer-container",template:Handlebars.templates.Footer,events:{"click #settingsModalButton":"openModal"},initialize:function(){this.modalView=new codebrowser.view.SettingsModalView,this.render()},render:function(){return this.$el.html(this.template()),this},openModal:function(){this.modalView.show()}}),codebrowser.view.NavigationView=Backbone.View.extend({id:"navigation-container",template:Handlebars.templates.Navigation,tourEnabled:!1,startTourCallback:null,events:{"click #startTour":"startTour"},render:function(){var a={showComments:"true"===localStorage.getItem("config.comments")?!0:!1,showTags:"true"===localStorage.getItem("config.tagnames")?!0:!1,showTagCategories:"true"===localStorage.getItem("config.tagcategories")?!0:!1,showStudentGroups:"true"===localStorage.getItem("config.studentgroups")?!0:!1,tourEnabled:this.tourEnabled},b=this.template(a);return this.$el.html(b),this},startTour:function(a){_.isFunction(this.startTourCallback)&&this.startTourCallback(a)},enableTour:function(a){this.startTourCallback=a,this.tourEnabled=!0,this.render()},disableTour:function(){this.startTourCallback=null,this.tourEnabled=!1,this.render()}}),codebrowser.view.NotFoundErrorView=codebrowser.view.ErrorView.extend({model:{"class":"alert-warning",message:"Not Found."}}),codebrowser.view.RootView=Backbone.View.extend({id:"root-container",template:Handlebars.templates.RootContainer,render:function(){var a={showStudentGroups:this.showStudentGroups,showTags:"true"===this.showTags?!0:!1,showTagCategories:"true"===this.showTagCategories?!0:!1,showComments:"true"===this.showComments?!0:!1},b=this.template(a);return this.$el.html(b),this}}),codebrowser.view.SelectView=Backbone.View.extend({id:"select-container",template:Handlebars.templates.SelectContainer,render:function(){var a={course:this.course.toJSON()},b=this.template(a);this.$el.html(b)}}),codebrowser.view.SettingsModalView=Backbone.View.extend({id:"settings-modal",className:"modal fade hide",template:Handlebars.templates.SettingsModal,attributes:{"data-backdrop":"false"},events:{"click #saveButton":"updateApiUrl","click #cancelButton":"onCancelButton","click #closeButton":"onCancelButton","click #checkButton":"checkCapabilities","click .toggleEnabled":"toggleCapability","keyup #apiUrl":"onKeyUp","click #applyButton":"showCapabilityCheck"},initialize:function(){var a=[{name:"Comments",testUrl:"comments",testMethod:"GET",storageKey:"config.comments"},{name:"Tags",testUrl:"tagnames",testMethod:"HEAD",storageKey:"config.tagnames"},{name:"Tag categories",testUrl:"tagcategories",testMethod:"HEAD",storageKey:"config.tagcategories"},{name:"Student groups",testUrl:"studentgroups",testMethod:"HEAD",storageKey:"config.studentgroups"},{name:"Concepts",testUrl:["students","courses","exercises","concepts"],testMethod:"recursive",storageKey:"config.concepts"}];a.forEach(function(a){a.error="Not checked yet",a.checked=!1}),this.attributes={apiUrl:config.api.main.root,capabilities:a,applied:!1};var b=localStorage.getItem("backendChecked");"true"!==b?this.checkCapabilities():a.forEach(function(a){a.status="true"===localStorage.getItem(a.storageKey)}),this.render()},render:function(){var a=this.template(this.attributes);return this.$el.html(a),this.$el.modal({show:!1}),this},show:function(){this.$el.modal("show")},showCapabilityCheck:function(){var a=this;this.attributes.apiUrl=$("#apiUrl").val(),this.attributes.applied=!0,this.clearCapabilities(),$("#capability-report").slideDown(function(){a.render()})},updateApiUrl:function(){var a=$("#apiUrl").val();localStorage.removeItem("backboneCache"),localStorage.setItem("config.apiUrl",a),location.href="."},onCancelButton:function(){this.initialize(),this.$el.modal("hide"),this.render()},onKeyUp:function(a){13===a.keyCode?this.showCapabilityCheck():this.attributes.applied===!0&&$("#capability-report").slideUp()},toggleCapability:function(a){var b=$(a.target).data("index"),c=this.attributes.capabilities[b];c.status=!c.status,localStorage.setItem(c.storageKey,c.status.toString())},clearCapabilities:function(){this.attributes.capabilities.forEach(function(a){a.checked=!1,a.enabled=!1}),this.render()},checkCapabilities:function(){var a=this;this.clearCapabilities(),this.render(),this.attributes.capabilities.forEach(function(b){a.checkCapability(b)}),localStorage.setItem("backendChecked",!0)},checkCapability:function(a){"recursive"===a.testMethod?this.recursiveCheck(a):this.simpleCheck(a)},simpleCheck:function(a){var b=this,c=this.attributes.apiUrl;$.ajax({async:!1,url:c+a.testUrl,type:a.testMethod,success:function(){localStorage.setItem(a.storageKey,!0),a.status=!0,a.checked=!0,b.render()},error:function(){localStorage.setItem(a.storageKey,!1),a.status=!1,a.checked=!0,b.render()}})},recursiveCheck:function(a){var b=this,c=this.attributes.apiUrl,d=!1;a.testUrl.forEach(function(e,f){d||(c+=0===f?e:"/"+e,$.ajax({async:!1,url:c,type:"GET",success:function(d){f===a.testUrl.length-1?(localStorage.setItem(a.storageKey,!0),a.status=!0,a.checked=!0,b.render()):d.length>0?c+="/"+d[0].id:(a.status=!1,a.checked=!1,a.error="Back-end didn't have enough data to test this feature. URL "+c+"returned an empty response")},error:function(){localStorage.setItem(a.storageKey,!1),a.status=!1,a.checked=!0,a.error="GET-request to "+c+" failed!",b.render(),d=!0}}))})}}),codebrowser.view.SnapshotBrowserView=Backbone.View.extend({id:"snapshot-browser-container",initialize:function(a){this.parentView=a.parentView,this.snapshotFilesView=new codebrowser.view.SnapshotFilesView({parentView:this}),this.$el.append(this.snapshotFilesView.el),"true"===localStorage.getItem("config.tagnames")&&(this.snapshotTagsView=new codebrowser.view.SnapshotTagsView,this.$el.append(this.snapshotTagsView.el))},remove:function(){this.snapshotFilesView.remove(),"true"===localStorage.getItem("config.tagnames")&&this.snapshotTagsView.remove(),Backbone.View.prototype.remove.call(this)},update:function(a,b,c){this.snapshotFilesView.update(a,b,c),"true"===localStorage.getItem("config.tagnames")&&this.snapshotTagsView.update(a)}}),codebrowser.view.SnapshotCommentsView=Backbone.View.extend({id:"snapshot-comments-container",template:Handlebars.templates.SnapshotCommentsContainer,newCommentType:"solution",collection:new codebrowser.collection.CommentCollection,events:{'click [data-action="create-comment"]':"createComment",'click [data-action="solution-comment"]':"solutionComment",'click [data-action="snapshot-comment"]':"snapshotComment","click span.next":"nextPage","click span.prev":"prevPage"},initialize:function(){this.render()},render:function(){var a={username:Utils.getLocalStorageValue("username","AnonymousJack"),comments:this.collection.toJSON()},b=$(this.template(a));this.$el.html(b),this._renderCommentsView()},nextPage:function(){this.page+=1,this.update(this.snapshot)},prevPage:function(){this.page-=1,this.update(this.snapshot)},remove:function(){this._removeCommentsView(),Backbone.View.prototype.remove.call(this)},update:function(a){this.snapshot=a,void 0===this.page&&(this.page=0),this.collection=new codebrowser.collection.CommentCollection(null,{studentId:this.snapshot.get("studentId"),courseId:this.snapshot.get("courseId"),exerciseId:this.snapshot.get("exerciseId"),snapshotId:this.snapshot.get("id"),page:this.page});var b=this;this.collection.fetch({cache:!1,expires:0,success:function(a,c){b.firstPage=c.firstPage,b.lastPage=c.lastPage,b.totalPages=c.totalPages,b.nummberOfElements=c.numberOfElements,b.totalElements=c.totalElements,b.collection.reset(c.content),b.render()},error:function(){throw new Error("Failed comments fetch.")}})},createComment:function(a){a.preventDefault();var b=$('[data-id="comment-username"]',this.$el).val().trim(),c=$('[data-id="comment-text"]',this.$el).val().trim();if(c){var d=this,e={comment:c,student:{id:d.snapshot.get("studentId")},course:{id:d.snapshot.get("courseId")},exercise:{id:d.snapshot.get("exerciseId")}};"snapshot"===this.newCommentType&&(e.snapshot={id:d.snapshot.id}),b&&(e.username=b,localStorage.setItem("username",b));var f=new codebrowser.model.Comment(e);f.save({},{success:function(){d.collection.add(f),d.update(d.snapshot)},error:function(){throw new Error("Failed comment save.")}}),this._resetForm()}},solutionComment:function(){this.newCommentType="solution"},snapshotComment:function(){this.newCommentType="snapshot"},_resetForm:function(){this.$el.find("textarea").val("").focus()},_renderCommentsView:function(){this._removeCommentsView(),this.commentsView=new codebrowser.view.CommentsView({showBreadcrumb:!1,collection:this.collection}),this.commentsView.firstPage=this.firstPage,this.commentsView.lastPage=this.lastPage,this.commentsView.totalPages=this.totalPages,this.commentsView.numberOfElements=this.numberOfElements,this.commentsView.totalElements=this.totalElements,this.commentsView.page=parseInt(this.page,10),this.commentsView.prevPage=this.page>0?parseInt(this.page,10)-1:0,this.commentsView.nextPage=this.page<this.totalPages-1?parseInt(this.page,10)+1:this.totalPages-1,this.commentsView.onlyOnePage=this.firstPage&&this.lastPage?!0:!1,this.commentsView.snapshotView=!0,this.$el.append(this.commentsView.el),this.commentsView.render()},_removeCommentsView:function(){this.commentsView&&this.commentsView.remove()}}),codebrowser.view.SnapshotsDataView=Backbone.View.extend({id:"snapshots-data-container",template:Handlebars.templates.SnapshotDataContainer,isActive:"true"===Utils.getLocalStorageValue("showData",!1),initialize:function(a){this.parentView=a.parentView},toggle:function(){this.isActive=!this.isActive,localStorage.setItem("showData",this.isActive),this.$el.slideToggle()},render:function(){var a={tests:this.collection.models[this.index].attributes.tests,percentageOfTestsPassing:this.collection.models[this.index].attributes.percentageOfTestsPassing},b=this.template(a);this.$el.html(b)},update:function(a,b){this.collection=a,this.index=b,this.render()}}),codebrowser.view.SnapshotFilesView=Backbone.View.extend({id:"snapshot-files-container",template:Handlebars.templates.SnapshotFilesContainer,initialize:function(a){this.parentView=a.parentView.parentView},renderDifferences:function(a){var b=this;this.parentView.collection.getDifferences(function(c){var d=b.parentView.collection.indexOf(b.model),e=c[d],f=b.model.get("files");f.each(function(b){var c=e[b.get("name")],d=$('[data-id="'+b.id+'"]',a),f=b.lines(),g=c.getCount().total();g===f&&d.addClass("new"),g>0&&g!==f&&d.addClass("modified")})})},render:function(){var a={courseRoute:this.courseRoute,files:this.model.getFiles()},b=$(this.template(_.extend(this.model.toJSON(),a)));this.parentView.editorView.diff&&this.renderDifferences(b);var c=$('[data-id="'+this.file.id+'"]',b);c.addClass("active"),this.$el.html(b)},update:function(a,b,c){this.model=a,this.file=b,this.courseRoute=c,this.render()}}),codebrowser.view.SnapshotTagsView=Backbone.View.extend({id:"snapshot-tags-container",template:Handlebars.templates.SnapshotTagsContainer,events:{'click [data-action="create-tag"]':"createTag",'click [data-action="create-snapshot-tag"]':"createSnapshotTag",'click [data-action="delete"]':"delete"},collection:new codebrowser.collection.TagCollection,initialize:function(){this.render()},render:function(){var a,b=this;this.collection.each(function(c){var d=!c.get("snapshot")||c.get("snapshot").id===b.snapshot.id;c.set("visible",d),a|=c.get("snapshot")&&d});var c={tags:this.collection.toJSON()};a&&(c.showSnapshotTags=!0);var d=$(this.template(c));this.$el.html(d)},update:function(a){this.snapshot=a,this.collection=new codebrowser.collection.TagCollection(null,{studentId:this.snapshot.get("studentId"),courseId:this.snapshot.get("courseId"),exerciseId:this.snapshot.get("exerciseId")}),this.collection.on("add",$.proxy(this.render,this)),this.collection.on("remove",$.proxy(this.render,this));var b=this;this.collection.fetch({cache:!1,expires:0,success:function(){b.render()},error:function(){throw new Error("Failed tags fetch.")}})},createTag:function(a,b){a.preventDefault();var c;if(c=b?$('[data-id="snapshot-tag"]',this.$el).val().trim():$('[data-id="tag"]',this.$el).val().trim()){var d=this,e=codebrowser.model.TagName.findOrCreate({name:c}),f={tagName:e,student:{id:d.snapshot.get("studentId")},course:{id:d.snapshot.get("courseId")},exercise:{id:d.snapshot.get("exerciseId")}};b&&(f.snapshot={id:d.snapshot.id});var g=new codebrowser.model.Tag(f);g.save({tagName:e},{success:function(){d.collection.add(g,{at:0}),b?$('[data-id="snapshot-tag"]').focus():$('[data-id="tag"]').focus()},error:function(){throw new Error("Failed tag save.")}})}},createSnapshotTag:function(a){this.createTag(a,!0)},"delete":function(a){var b=$(a.target).data("id"),c=this.collection.get(b),d=this;c.destroy({success:function(){d.collection.remove(c)},error:function(){throw new Error("Failed tag delete.")}})}}),codebrowser.view.SnapshotView=Backbone.View.extend({id:"snapshot-container",template:{navigationbarContainer:Handlebars.templates.NavigationBarContainer,navigationContainer:Handlebars.templates.SnapshotNavigationContainer},events:{"click #toggleConceptBubbles":"toggleConceptBubbles","click #toggleConceptHeatmap":"toggleConceptHeatmap","click #toggleTimeline":"toggleTimeline","click #toggleBrowser":"toggleBrowser","click #toggleTree":"toggleTree","click #toggleTestOutput":"toggleTestOutput","click #split":"split","click #diff":"diff","click #first":"first","click #previous":"previous","click #next":"next","click #last":"last"},courseRoute:!1,browser:!0,visualizations:null,initialize:function(){if(this.$el.hide(),this.navigationbarContainer=$("<div>",{id:"navigation-bar-container"}),this.$el.append(this.navigationbarContainer),this.visualizations=this._initializeVisualizations(),this.navigationContainer=$("<div>",{id:"snapshot-navigation-container"}),this.$el.append(this.navigationContainer),this._initializeContentContainer(),$(window).resize($.proxy(this.resize,this)),$(document).keydown($.proxy(this.keydown,this)),codebrowser&&codebrowser.navigation){var a=this;
codebrowser.navigation.enableTour(function(){a.startTour()})}},_initializeVisualizations:function(){var a={};a.timeline=new codebrowser.view.SnapshotsTimelineView({parentView:this}),a.tree=new codebrowser.view.SnapshotsTreeView({parentView:this}),a.testOutput=new codebrowser.view.SnapshotsDataView({parentView:this}),a.conceptBubbles=new codebrowser.view.SnapshotsConceptBubbleView({parentView:this}),a.conceptHeatmap=new codebrowser.view.SnapshotsConceptHeatmapView({parentView:this}),a.timeline.buttonSelector="#toggleTimeline",a.tree.buttonSelector="#toggleTree",a.testOutput.buttonSelector="#toggleTestOutput",a.conceptBubbles.buttonSelector="#toggleConceptBubbles",a.conceptHeatmap.buttonSelector="#toggleConceptHeatmap";for(var b in a)if(a.hasOwnProperty(b)){var c=a[b];c.isActive||c.$el.hide(),this.$el.append(c.el)}return a},_initializeContentContainer:function(){var a=$("<div>",{id:"snapshot-content-container"});this.snapshotBrowserView=new codebrowser.view.SnapshotBrowserView({parentView:this}),a.append(this.snapshotBrowserView.el),this.editorView=new codebrowser.view.EditorView,a.append(this.editorView.el),"true"===localStorage.getItem("config.comments")&&(this.snapshotCommentsView=new codebrowser.view.SnapshotCommentsView,a.append(this.snapshotCommentsView.el)),this.$el.append(a)},remove:function(){$(window).off("resize",this.resize),$(document).off("keydown",this.keydown);for(var a in this.visualizations)this.visualizations.hasOwnProperty(a)&&this.visualizations[a].remove();this.editorView.remove(),"true"===localStorage.getItem("config.comments")&&this.snapshotCommentsView.remove(),codebrowser.navigation.disableTour(),Backbone.View.prototype.remove.call(this)},render:function(){var a=this.collection.indexOf(this.model);this.renderNavigationBar(a),this.renderNavigation(a)},renderNavigation:function(a){var b={current:a+1,total:this.collection.length},c=$(this.template.navigationContainer(b));this.renderButtons(c,a),this.navigationContainer.html(c)},renderButtons:function(a,b){this.browser&&$("#toggleBrowser",a).addClass("active"),this.editorView.split&&$("#split",a).addClass("active"),this.editorView.canSplit()||$("#split",a).attr("disabled",!0),this.editorView.diff&&$("#diff",a).addClass("active"),0===b&&($("#first",a).attr("disabled",!0),$("#previous",a).attr("disabled",!0)),b===this.collection.length-1&&($("#next",a).attr("disabled",!0),$("#last",a).attr("disabled",!0));for(var c in this.visualizations){var d=this.visualizations[c];this.visualizations.hasOwnProperty(c)&&d.isActive&&$(d.buttonSelector,a).addClass("active"),this.visualizations.hasOwnProperty(c)&&d.isDisabled&&$(d.buttonSelector,a).prop("disabled",!0)}},renderNavigationBar:function(a){var b=$(this.template.navigationbarContainer(_.extend(this.model.toJSON(),{exercise:this.collection.at(a).get("exercise").toJSON(),student:this.student.toJSON(),courseRoute:this.courseRoute})));this.navigationbarContainer.html(b)},update:function(a,b){this.model=a,this.browser&&this.toggleBrowser(null,"true"===localStorage.getItem(config.storage.view.SnapshotView.browser));var c=this.collection.indexOf(a),d=this.collection.at(c-1)?this.collection.at(c-1):this.model;this.file=this.model.get("files").get(b);var e=this.file.get("name"),f=d.get("files").findWhere({name:e});this.$el.show(),this.updateVisualizations(c,e);var g=this.collection.at(c).get("files").findWhere({name:e}).attributes.diffs;this.editorView.update(f||this.file,this.file,g),this.snapshotBrowserView.update(this.model,this.file,this.courseRoute),"true"===localStorage.getItem("config.comments")&&this.snapshotCommentsView.update(this.model),this.render()},updateVisualizations:function(a,b){var c=this.visualizations;c.timeline.isActive&&c.timeline.update(this.collection,a,b,this.courseRoute),c.tree.isActive&&c.tree.update(this.collection,a,b,this.courseRoute),c.testOutput.isActive&&c.testOutput.update(this.collection,a),c.conceptBubbles.isActive&&c.conceptBubbles.update(this.model),c.conceptHeatmap.isActive&&c.conceptHeatmap.update(this.model,a)},resize:function(){this.didResize()},didResize:function(){this.visualizations.timeline.isActive&&this.visualizations.timeline.didResize(),this.visualizations.tree.isActive&&this.visualizations.tree.didResize(),this.editorView.didResize()},keydown:function(a){37===a.keyCode&&this.previous(),39===a.keyCode&&this.next()},toggleBrowser:function(a,b){return void 0!==b?this.browser=b:(this.browser=!this.browser,localStorage.setItem(config.storage.view.SnapshotView.browser,this.browser)),this.browser?(this.editorView.$el.css("margin-left",this.snapshotBrowserView.$el.width()+30),this.editorView.didResize(),void this.snapshotBrowserView.$el.show()):(this.snapshotBrowserView.$el.hide(),this.editorView.$el.css("margin-left",0),void this.editorView.didResize())},toggleTimeline:function(){$(this.visualizations.timeline.buttonSelector).toggleClass("active"),this.visualizations.timeline.toggle(),this.visualizations.tree.isActive&&this.visualizations.timeline.isActive&&this.toggleTree(),this.visualizations.timeline.isActive&&this.visualizations.timeline.update(this.collection,this.collection.indexOf(this.model),this.file.get("name"),this.courseRoute)},toggleTree:function(){$(this.visualizations.tree.buttonSelector).toggleClass("active"),this.visualizations.tree.toggle(),this.visualizations.tree.isActive&&this.visualizations.timeline.isActive&&this.toggleTimeline(),this.visualizations.tree.isActive&&this.visualizations.tree.update(this.collection,this.collection.indexOf(this.model),this.file.get("name"),this.courseRoute)},toggleTestOutput:function(){$(this.visualizations.testOutput.buttonSelector).toggleClass("active"),this.visualizations.testOutput.toggle(),this.visualizations.testOutput.isActive&&this.visualizations.testOutput.update(this.collection,this.collection.indexOf(this.model))},toggleConceptBubbles:function(){$(this.visualizations.conceptBubbles.buttonSelector).toggleClass("active"),this.visualizations.conceptBubbles.toggle(),this.visualizations.conceptBubbles.isActive&&this.visualizations.conceptBubbles.update(this.model)},toggleConceptHeatmap:function(){$(this.visualizations.conceptHeatmap.buttonSelector).toggleClass("active"),this.visualizations.conceptHeatmap.toggle(),this.visualizations.conceptHeatmap.isActive&&this.visualizations.conceptHeatmap.update(this.model)},split:function(){this.editorView.toggleSplit()},diff:function(){this.editorView.toggleDiff(),this.snapshotBrowserView.update(this.model,this.file,this.courseRoute)},navigate:function(a,b,c){this.resetTour(),b||(b=a.get("files").first()),this.courseRoute?codebrowser.app.snapshotRouter.navigate("#/courses/"+this.collection.courseId+"/exercises/"+this.collection.exerciseId+"/students/"+this.collection.studentId+"/snapshots/"+a.id+"/files/"+b.id,{replace:c?c.replace:c}):codebrowser.app.snapshotRouter.navigate("#/students/"+this.collection.studentId+"/courses/"+this.collection.courseId+"/exercises/"+this.collection.exerciseId+"/snapshots/"+a.id+"/files/"+b.id,{replace:c?c.replace:c})},first:function(){this.navigateToIndex(0)},previous:function(){var a=this.collection.indexOf(this.model);this.navigateToIndex(a-1)},next:function(){var a=this.collection.indexOf(this.model);this.navigateToIndex(a+1)},last:function(){var a=this.collection.size()-1;this.navigateToIndex(a)},navigateToIndex:function(a){var b=this.collection.at(a);if(b){var c=b.get("files").findWhere({name:this.file.get("name")});this.navigate(b,c)}},startTour:function(){var a=this,b=introJs();b.setOptions({keyboardNavigation:!1,steps:[{element:"#editor-container",intro:Handlebars.templates.SnapshotEditorIntro(),position:"right"},{element:'a[href="#editor-settings"]',intro:Handlebars.templates.SnapshotEditorSettingsIntro(),position:"left"},{element:"#editor-modes",intro:Handlebars.templates.SnapshotEditorModesIntro()},{element:"#snapshot-navi",intro:Handlebars.templates.SnapshotNavigationIntro()},{element:"#toggleTimeline",intro:Handlebars.templates.SnapshotTimelineIntro()},{element:"#toggleTree",intro:Handlebars.templates.SnapshotTreeIntro()},{element:"#toggleTestOutput",intro:Handlebars.templates.SnapshotDataIntro()},{element:"#toggleConceptBubbles",intro:Handlebars.templates.SnapshotConceptsBubbleIntro()},{element:"#toggleConceptHeatmap",intro:Handlebars.templates.SnapshotConceptsHeatmapIntro()}]}),this.tourInProgress=!0,b.onexit(function(){a.tourInProgress=!1}),b.oncomplete(function(){a.tourInProgress=!1}),b.start()},resetTour:function(){this.tourInProgress===!0&&(this.tourInProgress=!1,introJs().exit())}}),codebrowser.view.SnapshotsConceptBubbleView=Backbone.View.extend({id:"snapshots-concept-bubbles-container",isDisabled:!0,isActive:!1,diameter:400,format:null,color:null,initialize:function(){this.isDisabled="false"===Utils.getLocalStorageValue("config.concepts",!1),this.isActive=!this.isDisabled&&"true"===Utils.getLocalStorageValue("showConceptBubbles",!1),this.format=d3.format(",d"),this.color=d3.scale.category20c()},toggle:function(){this.isActive=!this.isActive,localStorage.setItem("showConceptBubbles",this.isActive),this.$el.slideToggle()},update:function(a){var b=this,c={studentId:a.get("studentId"),courseId:a.get("courseId"),exerciseId:a.get("exerciseId"),snapshotId:a.get("id")};this.collection=new codebrowser.collection.ConceptCollection([],c),this.collection.fetch({success:function(){b.concepts=Utils.parseConceptData(b.collection.toJSON()),void 0===b.initialized?b.firstRender():(b._updateConceptList(),b._updateBubbles())}})},firstRender:function(){this.svg=d3.select("#"+this.id).append("svg").attr("width",this.diameter).attr("height",this.diameter).attr("class","bubble"),this._drawConceptList(),this._drawInitialBubbles(),this.initialized=!0},_getListTextPosition:function(a){return"50,"+20*(this.concepts.children.indexOf(a)+3)},_drawConceptList:function(){var a=this,b=this.concepts.children;this.listSvg=d3.select("#"+this.id).append("svg").attr("width",this.diameter).attr("height",this.diameter).attr("class","list");var c=this.listSvg.selectAll(".list-element").data(b);c.enter().append("g").attr("class","list-element").attr("transform",function(b){return"translate("+a._getListTextPosition(b)+")"}).append("text").attr("fill",function(b){return a.color(b.name)}).style("font-size","16px").text(function(a){return a.name+": "+a.value})},_updateConceptList:function(){var a=this,b=this.concepts.children,c=this.listSvg.selectAll(".list-element").data(b,function(a){return a.name}),d=c.enter().append("g").attr("class","list-element").attr("transform",function(b){return"translate("+a._getListTextPosition(b)+")"});d.append("text").style("opacity",0).style("font-size","16px").attr("fill",function(b){return a.color(b.name)}).text(function(a){return a.name+": "+a.value}),c.select("text").transition().duration(1e3).tween("text",function(a){var b=d3.interpolate(this.textContent.substr(this.textContent.indexOf(":")+2),a.value);return function(c){var d=b(c)%1===0?b(c):Math.round(b(c));this.textContent=a.name+": "+d}}).style("opacity",1),c.transition().duration(1e3).attr("transform",function(b){return"translate("+a._getListTextPosition(b)+")"}),c.exit().remove()},_drawInitialBubbles:function(){this.bubble=d3.layout.pack().sort(null).size([this.diameter,this.diameter]).padding(1.5);var a=this.svg.selectAll(".node").data(this.bubble.nodes(this.concepts).filter(function(a){return!a.children})),b=this._createNewConceptNodes(a.enter());this._addTitle(b),this._addCircle(b),this._addText(b),a.select("text").text(function(a){return a.name.substring(0,a.r/3-1)}).transition().delay(1e3).duration(1e3).style("opacity",1)},_updateBubbles:function(){var a=this.concepts,b=this,c=this.svg.selectAll(".node").data(this.bubble.nodes(a).filter(function(a){return!a.children}),function(a){return a.name}),d=this._createNewConceptNodes(c.enter());d.append("title"),this._addCircle(d),this._addText(d),c.transition().delay(1e3).duration(1e3).attr("transform",function(a){return"translate("+a.x+","+a.y+")"}).style("opacity",1),c.select("circle").transition().delay(1e3).duration(1e3).attr("r",function(a){return a.r}),c.select("title").text(function(a){return a.name+": "+b.format(a.value)}),c.select("text").transition().delay(1e3).duration(1e3).style("opacity",1).text(function(a){return a.name?a.name.substring(0,a.r/3-1):""}),c.exit().selectAll("circle").transition().delay(1e3).duration(1e3).attr("r",0).remove(),c.exit().style("opacity",1).transition().delay(1e3).duration(1e3).style("opacity",0).remove()},_addCircle:function(a){var b=this;a.append("circle").style("fill",function(a){return b.color(a.name)}).attr("r",0).transition().delay(1e3).duration(2e3).attr("r",function(a){return a.r})},_addTitle:function(a){var b=this;a.append("title").text(function(a){return a.name+": "+b.format(a.value)})},_addText:function(a){a.append("text").attr("dy",".3em").style("text-anchor","middle").style("opacity",1e-5)},_createNewConceptNodes:function(a){return a.append("g").attr("class","node").attr("transform",function(a){return"translate("+a.x+","+a.y+")"})}}),codebrowser.view.SnapshotsConceptHeatmapView=Backbone.View.extend({id:"snapshots-concept-heatmap-container",isDisabled:!0,isActive:!1,format:void 0,initialized:void 0,lastIndex:void 0,initialize:function(a){this.parentView=a.parentView,this.isDisabled="false"===Utils.getLocalStorageValue("config.concepts",!1),this.isActive=!this.isDisabled&&"true"===Utils.getLocalStorageValue("showConceptHeatmap",!1)},toggle:function(){this.isActive=!this.isActive,localStorage.setItem("showConceptHeatmap",this.isActive),this.$el.slideToggle()},update:function(a,b){var c=this,d={studentId:a.get("studentId"),courseId:a.get("courseId"),exerciseId:a.get("exerciseId")};void 0===c.initialized?(this.collection=new codebrowser.collection.ExerciseConceptsCollection([],d),this.collection.fetch({success:function(){var a=c.collection.toJSON(),d=[],e=[],f=0;for(var g in a[0])d.push(a[0][g]),a[0][g].forEach(function(a){-1===e.indexOf(a.name)&&e.push(a.name),a.size>f&&(f=a.size)});c.concepts={maxConceptSize:f,snapshots:d,concepts:e},c.firstRender(b)}})):c._updateHeatmap(b)},firstRender:function(a){this.width=$("#snapshots-concept-heatmap-container").width(),this.height=400,this.svg=d3.select("#"+this.id).append("svg").attr("width",this.width).attr("height",this.height).attr("class","heatmap"),this._drawHeatmap(a),this.initialized=!0,this.lastIndex=a},_drawHeatmap:function(a){var b,c,d=this,e=this.concepts.snapshots,f=this.concepts.concepts,g=5,h=Math.floor((d.height-g)/f.length)-2,i=this.svg.selectAll(".concept").data(f).enter().append("g").attr("class","concept").attr("transform",function(a,b){return"translate(5, "+(b*h+h/2+4)+")"}).append("text").attr("fill","rgb(0,0,0)").text(function(a){return a}),j=0;i.each(function(){this.getBBox().width>j&&(j=this.getBBox().width)}),b=j+20,c=Math.floor((d.width-b)/e.length),this.svg.selectAll(".snapshot-index").data(e).enter().append("g").attr("class","snapshot-index").attr("transform",function(a,e){var f=9>e?5:9;return"translate("+(e*c+(c/2-f)+b)+","+(d.height-g)+")"}).append("text").attr("class",function(a,b){return"snapshotlabel_"+(b+1)}).attr("fill","rgb(0,0,0)").style("font-weight",function(b,c){return c===a?"bold":"normal"}).style("opacity",function(b,c){return c===a?1:0}).text(function(a,b){return b+1});for(var k=0,l=e.length;l>k;k++){var m=e[k];this.svg.selectAll(".snapshot_"+(k+1)).data(f).enter().append("svg:rect").attr("class","snapshot_"+(k+1)).attr("x",k*c+b).attr("y",function(a,b){return b*h+2}).attr("width",c).attr("height",h).style("stroke",function(){return k===a?"rgba(90,90,90,0.9)":"rgba(90,90,90,0.4)"}).style("stroke-width",1),this.svg.selectAll(".snapshot_"+(k+1)).style("fill",function(a){var b="rgb(255,255,255)";return m.forEach(function(c){c.name===a&&(b="rgba(0,0,0, "+c.size/d.concepts.maxConceptSize+")")}),b}).on("mouseover",function(a){o(a,"bold"),n(this,1)}).on("mouseout",function(a){o(a,"normal"),n(this,0)}).on("click",function(){var a=parseInt($(this).attr("class").substr(9),10)-1;d.parentView.navigateToIndex(a)});var n=function(a,b){var c=parseInt(a.className.baseVal.substr(9),10);c!==d.lastIndex+1&&d.svg.selectAll(".snapshotlabel_"+c).style("opacity",b)},o=function(a,b){d.svg.selectAll(".concept text").filter(function(b){return b===a}).style("font-weight",b)}}},_updateHeatmap:function(a){this.svg.selectAll(".snapshot_"+(this.lastIndex+1)).style("stroke","rgba(90,90,90,0.4)"),this.svg.selectAll(".snapshot_"+(a+1)).style("stroke","rgba(90,90,90,0.9)"),this.svg.selectAll(".snapshotlabel_"+(this.lastIndex+1)).transition().duration(1e3).style("opacity",0).style("font-weight","normal"),this.svg.selectAll(".snapshotlabel_"+(a+1)).transition().duration(1e3).style("opacity",1).style("font-weight","bold"),this.lastIndex=a}}),codebrowser.view.SnapshotsTimelineView=Backbone.View.extend({id:"snapshots-timeline-container",className:"visualization-container",template:{bottomContainer:Handlebars.templates.SnapshotsTimelineBottomContainer},isActive:"true"===Utils.getLocalStorageValue("showTimeline",!0),width:0,snapshotPositions:[],pointerSetOffsetX:0,scroll:null,dragging:!1,initialize:function(a){this.parentView=a.parentView,this.$el.hide(),this.paper=Raphael(this.el,"100%",81),this.bottomContainer=$("<div>"),this.$el.append(this.bottomContainer)},toggle:function(){this.isActive=!this.isActive,localStorage.setItem("showTimeline",this.isActive),this.$el.slideToggle()},getViewX:function(){var a=0;return this.paper._viewBox&&(a=this.paper._viewBox[0]),a},isVisible:function(a){var b=this.getViewX(),c=$(this.paper.canvas).width();return a>=b&&b+c>=a},snapshotWeight:function(a){var b=this.differences[a],c=.8,d=Math.round(b.total/b.lines*100);return 0===d?c:(c=2*d/100+1,c=Math.round(2*c)/2,Math.min(2,c))},distanceWeight:function(a,b,c){var d=0;if(0===a)return 1;var e=this.collection.getDuration(a,a-1);return d=5*(e-b)/(c-b)+1,d=Math.round(100*d)/100,Math.min(6,d)},setViewBox:function(a){var b=$(this.paper.canvas).width();this.paper.setViewBox(a,0,b,this.paper.height,!1)},centerOn:function(a){var b=$(this.paper.canvas).width(),c=a-b/2;return 0>c?void this.setViewBox(0):c>this.width-b?void this.setViewBox(this.width-b):void this.setViewBox(c)},focus:function(){var a=this.snapshotPositions[this.currentSnapshotIndex];0!==this.currentSnapshotIndex&&(this.isVisible(this.snapshotPositions[this.currentSnapshotIndex-1])||this.centerOn(a)),this.currentSnapshotIndex!==this.snapshotPositions.length-1&&(this.isVisible(this.snapshotPositions[this.currentSnapshotIndex+1])||this.centerOn(a))},moveTimeline:function(a){var b=this.getViewX(),c=$(this.paper.canvas).width();if(0>b+a&&0>a)return void this.setViewBox(Math.max(0,0-b));if(b+c+a>=this.width&&a>0){var d=this.width-b-c;return void this.setViewBox(b+d)}this.setViewBox(b+a),this.pointerSetOffsetX+=a,this.pointerSet.transform("...t "+a+", 0")},renderDuration:function(a,b,c,d,e,f){if(a){var g=codebrowser.helper.Duration.calculate(b.get("snapshotTime"),a.get("snapshotTime"),!0),h=this.paper.text(c-e-f/2,d+30,g);$(h.node).attr("class","duration")}},renderTimeline:function(a,b,c){var d=this.paper.path("M "+a+" "+b+" L "+c+" "+b);$(d.node).attr("class","timeline"),d.toBack()},renderSnapshotIndex:function(a,b){var c=this.paper.text(b,5,a+1);$(c.node).attr("class","snapshot-index")},renderSnapshotWeight:function(a,b,c){var d=this.differences[a],e=(d.total/d.lines).toFixed(2);if("0.00"!==e){e="1.00"!==e?e.slice(1):e.slice(0,1);var f=this.paper.text(b,c,e),g=this.snapshotWeight(a),h=11;g>1&&(h*=g),f.attr({"font-size":h}),$(f.node).attr("class","snapshot-weight")}},renderSnapshot:function(a,b,c,d,e){this.renderSnapshotIndex(b,c);var f=this.paper.rect(c-e,0,2*e,this.paper.height);$(f.node).attr("class","area");var g;g=null==a.attributes.percentageOfTestsPassing?this.paper.circle(c,d,e):this.paper.pieChart(c,d,e,[a.attributes.percentageOfTestsPassing,100-a.attributes.percentageOfTestsPassing]),a.attributes.compiles?$(g.node).attr("class","snapshot"):$(g.node).attr("class","snapshot not-compiles"),this.renderSnapshotWeight(b,c,d);var h=this.paper.circle(c,d,e);$(h.node).attr("class","area snapshot"),$(h.node).attr({"data-toggle":"tooltip",title:moment(new Date(a.get("snapshotTime"))).format("D.M.YYYY HH.mm"),"data-container":"body"});var i=a.get("files").findWhere({name:this.filename});f.data("snapshot",a),f.data("file",i),h.data("snapshot",a),h.data("file",i);var j=this;return h.click(function(){var a=this.data("snapshot"),b=this.data("file");$(h.node).tooltip("destroy"),j.parentView.navigate(a,b,{course:this.courseRoute})}),h.mouseover(function(){this.animate({transform:"S 1.1"},150),g.animate({transform:"S 1.1"},150),j.scroll||$(h.node).tooltip("show")}),h.mouseout(function(){this.animate({transform:"S 1"},150),g.animate({transform:"S 1"},150),$(h.node).tooltip("hide")}),g},renderPointer:function(a,b){this.pointerSet=this.paper.set();var c=7,d=a-c/2,e=this.paper.height,f=a,g=e-c/2,h=this.paper.path("M"+f+" "+g+", L"+f+" 0");$(h.node).attr("class","pointer-line"),h.toBack(),this.pointerSet.push(h);var i=this.paper.path("M"+d+" "+e+", L"+(d+c/2)+" "+(e-c)+", "+(d+c)+" "+e+"Z");$(i.node).attr("class","pointer"),this.pointerSet.push(i);var j=this.paper.rect(a-b,0,2*b,this.paper.height);$(j.node).attr("class","area pointer"),this.pointerSet.push(j),this.pointerSet.drag(this.dragMove,this.dragStart,this.dragEnd,this,this,this).onDragOver($.proxy(this.dragOver,this))},render:function(){var a=Math.min(6e4,this.collection.getMinDuration()),b=Math.min(3e5,this.collection.getMaxDuration());this.paper.clear();var c=this.paper.height/2+3,d=0,e=0,f=0,g=this;this.snapshotPositions=[],this.collection.each(function(h,i){var j=g.distanceWeight(i,a,b),k=g.snapshotWeight(i),l=45*j,m=12*k;f+=2*m,0===i?d=f:f+=l,i===g.collection.length-1&&(e=m);var n=g.collection.at(i-1);g.renderDuration(n,h,f,c,m,l),g.renderSnapshot(h,i,f,c,m),g.snapshotPositions.push(f),i===g.currentSnapshotIndex&&g.renderPointer(f,m)}),this.renderTimeline(d,c,f),this.width=d+f+e,this.focus();var h={first:this.collection.first().toJSON(),last:this.collection.last().toJSON()},i=this.template.bottomContainer(h);this.bottomContainer.html(i,i)},update:function(a,b,c,d){if(this.collection=a,this.courseRoute=d,1!==this.collection.length){this.$el.show(),this.startSpinner();var e=this;this.collection.getDifferences(function(a){e.differences=a,e.currentSnapshotIndex=b,e.filename=c,e.stopSpinner(),e.dragging||e.render()})}},didResize:function(){if(this.spinner&&(this.stopSpinner(),this.startSpinner()),this.snapshotPositions.length===this.collection.length){var a=this.snapshotPositions[this.currentSnapshotIndex];this.render(),this.centerOn(a)}},dragStart:function(){this.dragging=!0},dragEnd:function(){this.dragging=!1,this.pointerSetOffsetX=0,this.stopScroll(),this.render()},dragMove:function(a,b,c){this.pointerSet.transform("T "+(this.pointerSetOffsetX+a)+", 0");var d=$(this.paper.canvas).width(),e=$(this.paper.canvas).offset(),f=e.left,g=e.left+d;return f+50>c?void this.startScroll(-5):c>g-50?void this.startScroll(5):void this.stopScroll()},dragOver:function(a){a.data("snapshot")&&this.parentView.navigate(a.data("snapshot"),a.data("file"),{course:this.courseRoute})},startSpinner:function(){this.spinner||(this.spinner=new Spinner({lines:13,length:4,width:4,radius:10,corners:1,rotate:0,direction:1,color:"rgba(0, 0, 0, 0.4)",speed:.8,trail:60,shadow:!1,hwaccel:!1,className:"spinner",zIndex:2e9,top:"auto",left:"auto"}).spin(this.$el.get(0)))},stopSpinner:function(){this.spinner&&(this.spinner.stop(),this.spinner=null)},startScroll:function(a){if(!this.scroll){var b=this;this.scroll=setInterval(function(){b.moveTimeline(a)},1e3/60)}},stopScroll:function(){this.scroll&&(clearInterval(this.scroll),this.scroll=!1)}}),codebrowser.view.SnapshotsTreeView=Backbone.View.extend({id:"snapshots-tree-container",className:"visualization-container",template:{filenameContainer:Handlebars.templates.TreeFilenameContainer,bottomContainer:Handlebars.templates.SnapshotsTimelineBottomContainer},isActive:"true"===Utils.getLocalStorageValue("showTree",!1),width:0,snapshotPositions:[],pointerSetOffsetX:0,scroll:null,dragging:!1,bottomContainer:null,filenameContainer:null,initialize:function(a){this.parentView=a.parentView,this.$el.hide();var b=$("<tr>");b.attr("class","top-container"),this.$el.append(b),this.filenameContainer=$("<td>"),this.filenameContainer.attr("class","filename-container"),b.append(this.filenameContainer);var c=$("<td>");c.attr("class","raphael-container"),b.append(c),this.paper=Raphael(c.get(0),"100%",81),this.bottomContainer=$("<div>"),this.$el.append(this.bottomContainer)},toggle:function(){this.isActive=!this.isActive,localStorage.setItem("showTree",this.isActive),this.$el.slideToggle()},getViewX:function(){var a=0;return this.paper._viewBox&&(a=this.paper._viewBox[0]),a},isVisible:function(a){var b=this.getViewX(),c=$(this.paper.canvas).width();return a>=b&&b+c>=a},setViewBox:function(a){var b=$(this.paper.canvas).width();this.paper.setViewBox(a,0,b,this.paper.height,!1)},centerOn:function(a){var b=$(this.paper.canvas).width(),c=a-b/2;return 0>c?void this.setViewBox(0):c>this.width-b?void this.setViewBox(this.width-b):void this.setViewBox(c)},focus:function(){var a=this.snapshotPositions[this.currentSnapshotIndex];0!==this.currentSnapshotIndex&&(this.isVisible(this.snapshotPositions[this.currentSnapshotIndex-1])||this.centerOn(a)),this.currentSnapshotIndex!==this.snapshotPositions.length-1&&(this.isVisible(this.snapshotPositions[this.currentSnapshotIndex+1])||this.centerOn(a))},moveTimeline:function(a){var b=this.getViewX(),c=$(this.paper.canvas).width();if(0>b+a&&0>a)return void this.setViewBox(Math.max(0,0-b));if(b+c+a>=this.width&&a>0){var d=this.width-b-c;return void this.setViewBox(b+d)}this.setViewBox(b+a),this.pointerSetOffsetX+=a,this.pointerSet.transform("...t "+a+", 0")},renderTimeline:function(a,b,c,d){var e=this.paper.path("M "+a+" "+b+" L "+c+" "+b);$(e.node).attr("class",d?"timeline-dashed":"timeline"),e.toBack()},renderSnapshotIndex:function(a,b){var c=this.paper.text(b,5,a+1);$(c.node).attr("class","snapshot-index")},renderFilenameContainer:function(a){for(var b=[],c=0;c<a.length;++c)b.push(a[c]);var d={filenames:b};this.filenameContainer.html(this.template.filenameContainer(d))},renderBottomContainer:function(){var a={first:this.collection.first().toJSON(),last:this.collection.last().toJSON()},b=this.template.bottomContainer(a);this.bottomContainer.html(b)},renderSnapshotArea:function(a,b,c){var d=this.paper.rect(b-c,0,2*c,this.paper.height);$(d.node).attr("class","area");var e=a.get("files").findWhere({name:this.filename});d.data("snapshot",a),d.data("file",e)},renderSnapshotFile:function(a,b,c,d,e,f,g){var h=this.paper.circle(d,e,f);$(h.node).attr("class",g?"snapshot-modified":"snapshot");var i=this.paper.circle(d,e,f),j=b===this.currentSnapshotIndex&&c.getName()===this.filename;$(i.node).attr("class",j?"area snapshot selected":"area snapshot"),$(i.node).attr({"data-toggle":"tooltip",title:moment(new Date(a.get("snapshotTime"))).format("D.M.YYYY HH.mm"),"data-container":"body"}),i.data("snapshot",a),i.data("file",c);var k=this;return i.click(function(){var a=this.data("snapshot"),b=this.data("file");$(i.node).tooltip("destroy"),k.parentView.navigate(a,b,{course:this.courseRoute})}),i.mouseover(function(){this.animate({transform:"S 1.1"},150),h.animate({transform:"S 1.1"},150),k.scroll||$(i.node).tooltip("show")}),i.mouseout(function(){this.animate({transform:"S 1"},150),h.animate({transform:"S 1"},150),$(i.node).tooltip("hide")}),h},renderPointer:function(a,b){this.pointerSet=this.paper.set();var c=7,d=a-c/2,e=this.paper.height,f=a,g=e-c/2,h=this.paper.path("M"+f+" "+g+", L"+f+" 0");$(h.node).attr("class","pointer-line"),h.toBack(),this.pointerSet.push(h);var i=this.paper.path("M"+d+" "+e+", L"+(d+c/2)+" "+(e-c)+", "+(d+c)+" "+e+"Z");$(i.node).attr("class","pointer"),this.pointerSet.push(i);var j=this.paper.rect(a-b,0,2*b,this.paper.height);$(j.node).attr("class","area pointer"),this.pointerSet.push(j),this.pointerSet.drag(this.dragMove,this.dragStart,this.dragEnd,this,this,this).onDragOver($.proxy(this.dragOver,this))},render:function(){var a=this.collection.getFiles();this.renderFilenameContainer(a);var b=81,c=60,d=b+c*(a.length-1);this.paper.setSize("100%",d),this.paper.clear();var e=b/2+3,f=100,g=0,h=0,i=this.collection.getMinAndMaxFileSize(),j=this,k=[];this.snapshotPositions=[],this.collection.each(function(b,d){var l=15,m=100;h+=2*l,0===d?f=h:h+=m,d===j.collection.length-1&&(g=l);var n=[];j.snapshotPositions.push(h),j.renderSnapshotArea(b,h,l),j.renderSnapshotIndex(d,h),d===j.currentSnapshotIndex&&j.renderPointer(h,l),b.get("files").each(function(f){var g=a.indexOf(f.getName());n[g]=f.getName();var k=12*j._getFileWeight(f.get("filesize"),i.min,i.max),l=j.differences[d][f.get("name")],m=e+g*c;j.renderSnapshotFile(b,d,f,h,m,k,0!==l.getCount().total()),j.renderChanges(d,l,h,m,f,k)}),j.renderFileLines(k,n,d,a.length,e,c)}),this.renderFileLines(k,[],this.snapshotPositions.length,a.length,e,c);for(var l=0;l<a.length;l++)this.renderTimeline(f,e+c*l,h,!0);this.width=f+h+g,this.focus(),this.renderBottomContainer()},renderFileLines:function(a,b,c,d,e,f){for(var g=0;d>g;g++)b[g]&&!a[g]&&(a[g]=this.snapshotPositions[c]),!b[g]&&a[g]&&(this.renderTimeline(a[g],e+f*g,this.snapshotPositions[c-1]),a[g]=void 0)},renderChanges:function(a,b,c,d,e,f){var g=e.lines(),h=Math.round(b.getCount().insert/g*100),i=Math.round(b.getCount()["delete"]/g*100),j=Math.round(b.getCount().replace/g*100),k=h+i+j;k>100&&(h*=100/k,i*=100/k,j*=100/k);var l=[h,i,j,100-k];k>0&&this.paper.pieChart(c,d,f+7,l,!1)},_getFileWeight:function(a,b,c){if(b===c)return 1.5;var d=1.2*(a-b)/(c-b)+.8;return d=Math.round(100*d)/100,Math.min(2,d)},update:function(a,b,c,d){if(this.collection=a,this.courseRoute=d,1!==this.collection.length){this.$el.show(),this.startSpinner();var e=this;this.collection.getDifferences(function(a){e.differences=a,e.currentSnapshotIndex=b,e.filename=c,e.stopSpinner(),e.dragging||e.render()})}},didResize:function(){if(this.spinner&&(this.stopSpinner(),this.startSpinner()),this.snapshotPositions.length===this.collection.length){var a=this.snapshotPositions[this.currentSnapshotIndex];this.render(),this.centerOn(a)}},dragStart:function(){this.dragging=!0},dragEnd:function(){this.dragging=!1,this.pointerSetOffsetX=0,this.stopScroll(),this.render()},dragMove:function(a,b,c){this.pointerSet.transform("T "+(this.pointerSetOffsetX+a)+", 0");var d=$(this.paper.canvas).width(),e=$(this.paper.canvas).offset(),f=e.left,g=e.left+d;return f+50>c?void this.startScroll(-5):c>g-50?void this.startScroll(5):void this.stopScroll()},dragOver:function(a){a.data("snapshot")&&this.parentView.navigate(a.data("snapshot"),a.data("file"),{course:this.courseRoute})},startSpinner:function(){this.spinner||(this.spinner=new Spinner({lines:13,length:4,width:4,radius:10,corners:1,rotate:0,direction:1,color:"rgba(0, 0, 0, 0.4)",speed:.8,trail:60,shadow:!1,hwaccel:!1,className:"spinner",zIndex:2e9,top:"auto",left:"auto"}).spin(this.$el.get(0)))},stopSpinner:function(){this.spinner&&(this.spinner.stop(),this.spinner=null)},startScroll:function(a){if(!this.scroll){var b=this;this.scroll=setInterval(function(){b.moveTimeline(a)},1e3/60)}},stopScroll:function(){this.scroll&&(clearInterval(this.scroll),this.scroll=!1)}}),codebrowser.view.StudentGroupsView=Backbone.View.extend({id:"studentgroups-container",template:Handlebars.templates.StudentGroupsContainer,events:{'click [data-action="search"]':"filterByName",'keyup [data-id="query-string"]':"filterByName",'keypress [data-id="query-string"]':"filterByName"},render:function(){var a=this.template({studentGroups:this.collection.toJSON()});return this.$el.html(a),this},filterByName:function(){if(!this.filterHelper){var a={containerSelector:"#"+this.id};this.filterHelper=new codebrowser.helper.ListViewFilter(a)}this.filterHelper.filterList()}}),codebrowser.view.StudentsView=Backbone.View.extend({id:"students-container",template:Handlebars.templates.StudentsContainer,events:{'click [data-action="search"]':"filterStudentListByName",'keyup [data-id="query-string"]':"filterStudentListByName",'keypress [data-id="query-string"]':"filterStudentListByName"},render:function(){var a={students:this.collection.toJSON()};
this.course&&this.exercise?a=_.extend(a,{course:this.course.toJSON(),exercise:this.exercise.toJSON()}):this.course?a=_.extend(a,{course:this.course.toJSON()}):this.studentGroup&&(a=_.extend(a,{studentGroup:this.studentGroup.toJSON()}));var b=this.template(a);this.$el.html(b),this.delegateEvents()},filterStudentListByName:function(){if(!this.filterHelper){var a={containerSelector:"#"+this.id};this.filterHelper=new codebrowser.helper.ListViewFilter(a)}this.filterHelper.filterList()}}),codebrowser.view.TagCategoriesView=Backbone.View.extend({id:"tagcategories-container",template:Handlebars.templates.TagCategoriesContainer,events:{'click [data-action="create-category"]':"createTagCategory",'click [data-action="delete-category"]':"deleteTagCategory"},render:function(){var a={tagCategories:this.tagCategories.toJSON()},b=this.template(a);this.$el.html(b),this.delegateEvents()},createTagCategory:function(a){a.preventDefault();var b=$('[data-id="category"]',this.$el).val().trim();if(b){var c=this,d=c.collection.where({name:b});if(0===d.length){var e=new codebrowser.model.TagCategory({name:b});e.save({},{success:function(){c.collection.add(e),c.render(),$('[data-id="category"]').focus()},error:function(){throw new Error("Failed tag category save.")}})}else c.render(),$('[data-id="category"]').focus()}},deleteTagCategory:function(a){var b=$(a.target).data("id"),c=this.collection.get(b),d=this;c.destroy({success:function(){d.collection.remove(c),d.render()},error:function(){throw new Error("Failed to delete Tag Category")}})}}),codebrowser.view.TagNamesView=Backbone.View.extend({id:"tagnames-container",template:Handlebars.templates.TagNamesContainer,events:{'click [data-action="search"]':"filterTagListsByName",'keyup [data-id="query-string"]':"filterTagListsByName",'keypress [data-id="query-string"]':"filterTagListsByName","click #downloadTagListJson":"download",'click [data-action="add-to-category"]':"addTagToCategory",'click [data-action="delete-from-category"]':"deleteTagFromCategory","click .toggle-add":"toggleAdd","dragenter .up-scroll":"scrollTimer","dragenter .down-scroll":"scrollTimer","dragleave .up-scroll":"clearScrollTimer","dragleave .down-scroll":"clearScrollTimer","dragstart td.link":"drag",'dragend *:not("p.tag-category")':"endDrag","drop p.tag-category":"dropAndAddToCategory","dragover p.tag-category":"allowDropping","dragenter p.tag-category":"hilight","dragleave p.tag-category":"dehilight"},render:function(){var a={snapshotTagNames:this.snapshotTagNames.toJSON(),exerciseAnswerTagNames:this.exerciseAnswerTagNames.toJSON()};this.unusedTagNames&&(a=_.extend(a,{unusedTagNames:this.unusedTagNames.toJSON()})),this.tagCategory&&(a=_.extend(a,{tagCategory:this.tagCategory.toJSON()})),this.tagCategories&&(a=_.extend(a,{tagCategories:this.tagCategories.toJSON()}));var b=this.template(a);this.$el.html(b),this.delegateEvents()},filterTagListsByName:function(){if(!this.filterHelper){var a={rowSelector:".triple-list table tbody tr, .double-list-left table tbody tr, .double-list-right table tbody tr",containerSelector:"#"+this.id};this.filterHelper=new codebrowser.helper.ListViewFilter(a)}this.filterHelper.filterList()},download:function(){var a={};this._addTagNamesToExport(this.snapshotTagNames,a),this._addTagNamesToExport(this.exerciseAnswerTagNames,a);var b=Object.keys(a).map(function(b){return a[b]}),c=new Blob([JSON.stringify(b)],{type:"application/json"});return saveAs(c,"tags.json"),!1},_addTagNamesToExport:function(a,b){a.each(function(a){var c={},d={};a.get("tags").forEach(function(a){c[a.student.name]=!0,d[a.exercise.name+" ("+a.course.name+")"]=!0}),b[a.id]={tag:a.get("name"),students:Object.keys(c),exercises:Object.keys(d)}})},addTagToCategory:function(a){a.preventDefault();var b=a.target.id;if(b){var c=codebrowser.model.TagName.findOrCreate({id:b}),d=this.tagCategory.get("tagnames");d.push(c),this.tagCategory.set("tagnames",d);var e=this;this.tagCategory.save({},{success:function(){e.unusedTagNames.remove(c),e.snapshotTagNames.fetch({success:function(){e.render()}}),e.exerciseAnswerTagNames.fetch({success:function(){e.render()}})},error:function(){throw new Error("Adding tag to category failed.")}})}},deleteTagFromCategory:function(a){var b=$(a.target).data("id");if(b){var c=codebrowser.model.TagName.findOrCreate({id:b}),d=this.tagCategory.get("tagnames"),e=d.indexOf(c);e>-1&&d.splice(e,1),this.tagCategory.set("tagnames",d);var f=this;this.tagCategory.save({},{tagid:b,success:function(){f.unusedTagNames.fetch({success:function(){f.render()}}),f.snapshotTagNames.fetch({success:function(){f.render()}}),f.exerciseAnswerTagNames.fetch({success:function(){f.render()}})},error:function(){throw new Error("Removing tag from category failed.")}})}},toggleAdd:function(){$(".toggle-add").toggleClass("open"),$(".toggle-add").toggleClass("close"),$(".tags").slideToggle()},allowDropping:function(a){a.preventDefault()},drag:function(a){this.draggedTagnameId=a.currentTarget.id;var b=($(document).width()-$(".add-to-categories").width())/2-150,c=($(document).height()-$(".add-to-categories").height())/2;$(".add-to-categories").css({display:"block","z-index":"50",left:b+"px",top:c+"px"}),$('.add-to-categories *:not(".scroll")').css({"z-index":"50"})},endDrag:function(a){a.preventDefault(),$(".add-to-categories").css({display:"none","z-index":"-50"}),$('.add-to-categories *:not(".scroll")').css({"z-index":"-50"})},dropAndAddToCategory:function(a){a.preventDefault(),$(a.target).removeClass("hilight"),$(".add-to-categories").css({display:"none"});var b=codebrowser.model.TagName.findOrCreate({id:this.draggedTagnameId}),c=a.currentTarget.id,d=codebrowser.model.TagCategory.findOrCreate({id:c},{create:!1}),e=d.get("tagnames");e.push(b),d.set("tagnames",e),d.save({},{success:function(){$(".add-message").css({display:"block"}),$(".add-message").empty().append("Added tag "+b.id+" into category "+d.id),$(".add-message").delay(800).fadeOut()},error:function(){throw new Error("Adding tag to category failed.")}})},scrollCategoriesDown:function(){var a=$(".category-list"),b=a.scrollTop();a.scrollTop(b+1)},scrollCategoriesUp:function(){var a=$(".category-list"),b=a.scrollTop();a.scrollTop(b-1)},scrollTimer:function(a){a.preventDefault(),"down-scroll"===a.currentTarget.classList[1]?this.repeater=setInterval(this.scrollCategoriesDown,10):"up-scroll"===a.currentTarget.classList[1]&&(this.repeater=setInterval(this.scrollCategoriesUp,10))},clearScrollTimer:function(){clearInterval(this.repeater)},hilight:function(a){$(a.target).addClass("hilight")},dehilight:function(a){$(a.target).removeClass("hilight")}}),codebrowser.view.TagsView=Backbone.View.extend({id:"tags-container",template:Handlebars.templates.TagsContainer,render:function(){var a={tagNameText:this.tagName.get("name"),tags:this.collection.toJSON()};this.tagCategory&&(a=_.extend(a,{tagCategory:this.tagCategory.toJSON()}));var b=this.template(a);this.$el.html(b)}}),codebrowser.controller.ViewController={view:null,isActive:function(a){return this.view===a},push:function(a,b){this.view&&this.view.remove(),this.view=a,b&&this.view.render(),$(config.view.container).html(this.view.el)}},codebrowser.router.BaseRouter=Backbone.Router.extend({notFound:function(){var a=new codebrowser.view.NotFoundErrorView;codebrowser.controller.ViewController.push(a,!0)},fetchModel:function(a,b,c){var d=this;a.fetch({cache:b,expires:b?config.cache.expires:0,success:function(a,b,d){c(a,b,d)},error:function(){d.notFound()}})}}),codebrowser.router.CommentRouter=codebrowser.router.BaseRouter.extend({routes:{"comments(/)":"allComments","comments?page=:page":"paginatedComments"},initialize:function(){this.commentsView=new codebrowser.view.CommentsView},paginatedComments:function(a){this.comments(a)},allComments:function(){this.comments(0)},comments:function(a){var b=this,c=new codebrowser.collection.CommentCollection(null,{page:a});this.fetchModel(c,!1,function(d,e){c.reset(e.content),b.commentsView.page=a,b.commentsView.collection=c,b.commentsView.firstPage=e.firstPage,b.commentsView.lastPage=e.lastPage,b.commentsView.totalPages=e.totalPages,b.commentsView.numberOfElements=e.numberOfElements,b.commentsView.totalElements=e.totalElements,b.commentsView.query=void 0,codebrowser.controller.ViewController.push(b.commentsView,!0)})}}),codebrowser.router.CourseRouter=codebrowser.router.BaseRouter.extend({routes:{"courses(/)":"courses","students/:studentId(/)":"navigation","students/:studentId/courses(/)":"courses"},initialize:function(){this.courseView=new codebrowser.view.CoursesView},navigation:function(a){codebrowser.app.courseRouter.navigate("#/students/"+a+"/courses",{replace:!0})},courses:function(a){var b=this,c=_.after(a?2:1,function(){codebrowser.controller.ViewController.push(b.courseView,!0)});if(a){var d=codebrowser.model.Student.findOrCreate({id:a});this.fetchModel(d,!0,function(){b.courseView.student=d,c()})}var e=new codebrowser.collection.CourseCollection(null,{studentId:a});this.courseView.collection=e,this.fetchModel(e,!0,c)}}),codebrowser.router.ExerciseRouter=codebrowser.router.BaseRouter.extend({routes:{"courses/:courseId/exercises(/)":"courseExercises","courses/:courseId/students/:studentId(/)":"navigateToStudentExercises","courses/:courseId/students/:studentId/exercises(/)":"studentExercises","students/:studentId/courses/:courseId(/)":"navigation","students/:studentId/courses/:courseId/exercises(/)":"exercises"},initialize:function(){this.exerciseView=new codebrowser.view.ExercisesView},navigation:function(a,b){codebrowser.app.exerciseRouter.navigate("#/students/"+a+"/courses/"+b+"/exercises",{replace:!0})},courseExercises:function(a){this.exercises(null,a,null)},navigateToStudentExercises:function(a,b){codebrowser.app.exerciseRouter.navigate("#/courses/"+a+"/students/"+b+"/exercises",{replace:!0})},studentExercises:function(a,b){this.exercises(b,a,"studentExercises")},exercises:function(a,b,c){var d=this,e=_.after(3,function(){codebrowser.controller.ViewController.push(d.exerciseView,!0)});if(c&&(d.exerciseView.viewPath=c),a){var f=codebrowser.model.Student.findOrCreate({id:a});this.fetchModel(f,!0,function(){d.exerciseView.student=f,e()})}else e();var g=codebrowser.model.Course.findOrCreate({id:b}),h=new codebrowser.collection.ExerciseCollection(null,{studentId:a,courseId:b});this.fetchModel(g,!0,function(){d.exerciseView.course=g,e()}),this.exerciseView.collection=h,this.fetchModel(h,!0,e)}}),codebrowser.router.RootRouter=codebrowser.router.BaseRouter.extend({routes:{"":"root","*notFound":"pageNotFound"},initialize:function(){this.rootView=new codebrowser.view.RootView,this.errorView=new codebrowser.view.ErrorView({model:{"class":"alert-error",message:"Oops!"}})},root:function(){var a=this,b=new codebrowser.collection.StudentGroupCollection;this.fetchModel(b,!0,function(){a.rootView.showStudentGroups=b.size()>0,codebrowser.controller.ViewController.push(a.rootView,!0)}),this.rootView.showTags=localStorage.getItem("config.tagnames"),this.rootView.showTagCategories=localStorage.getItem("config.tagcategories"),this.rootView.showComments=localStorage.getItem("config.comments")},pageNotFound:function(){codebrowser.controller.ViewController.push(this.errorView,!0)}}),codebrowser.router.SelectRouter=codebrowser.router.BaseRouter.extend({routes:{"courses/:courseId(/)":"navigateToCourse","courses/:courseId/select(/)":"select"},initialize:function(){this.selectView=new codebrowser.view.SelectView},navigateToCourse:function(a){codebrowser.app.exerciseRouter.navigate("#/courses/"+a+"/select",{replace:!0})},select:function(a){var b=this,c=codebrowser.model.Course.findOrCreate({id:a});this.fetchModel(c,!0,function(){b.selectView.course=c,codebrowser.controller.ViewController.push(b.selectView,!0)})}}),codebrowser.router.SnapshotRouter=codebrowser.router.BaseRouter.extend({routes:{"students/:studentId/courses/:courseId/exercises/:exerciseId(/)":"snapshot","students/:studentId/courses/:courseId/exercises/:exerciseId/snapshots(/)":"snapshot","students/:studentId/courses/:courseId/exercises/:exerciseId/snapshots/:snapshotId(/)":"snapshot","students/:studentId/courses/:courseId/exercises/:exerciseId/snapshots/:snapshotId/files/:fileId(/)":"snapshot","courses/:courseId/students/:studentId/exercises/:exerciseId(/)":"courseNavigation","courses/:courseId/students/:studentId/exercises/:exerciseId/snapshots(/)":"courseSnapshot","courses/:courseId/exercises/:exerciseId/students/:studentId(/)":"navigation","courses/:courseId/exercises/:exerciseId/students/:studentId/snapshots(/)":"navigation","courses/:courseId/exercises/:exerciseId/students/:studentId/snapshots/:snapshotId(/)":"navigation","courses/:courseId/exercises/:exerciseId/students/:studentId/snapshots/:snapshotId/files/:fileId(/)":"navigation"},studentId:null,exerciseId:null,initialize:function(){this.setUp()},setUp:function(){codebrowser.controller.ViewController.isActive(this.snapshotView)||(this.snapshotView=new codebrowser.view.SnapshotView,codebrowser.controller.ViewController.push(this.snapshotView))},navigation:function(a,b,c,d,e){this.snapshot(c,a,b,d,e,{courseRoute:!0})},courseNavigation:function(a,b,c){codebrowser.app.snapshotRouter.navigate("#/courses/"+a+"/students/"+c+"/exercises/"+b+"/snapshots/",{replace:!0})},courseSnapshot:function(a,b,c){this.snapshot(b,a,c,null,null,null,{courseRoute:!0})},snapshot:function(a,b,c,d,e,f){var g=this;this.setUp();var h;this.snapshotView.collection&&this.studentId===a&&this.exerciseId===c?h=this.snapshotView.collection:(h=new codebrowser.collection.SnapshotCollection(null,{studentId:a,courseId:b,exerciseId:c}),this.snapshotView.collection=h,this.studentId=a,this.exerciseId=c),f&&f.courseRoute&&(this.snapshotView.courseRoute=!0);var i=_.after(2,function(){var a;return d?(a=h.get(d))?e?a.get("files").get(e)?void g.snapshotView.update(a,e):void g.notFound():void g.snapshotView.navigate(a,null,{replace:!0}):void g.notFound():(a=h.at(0),void g.snapshotView.navigate(a,null,{replace:!0}))}),j=codebrowser.model.Student.findOrCreate({id:a});this.fetchModel(j,!0,function(){g.snapshotView.student=j,i()}),this.fetchModel(h,!0,i)}}),codebrowser.router.StudentRouter=codebrowser.router.BaseRouter.extend({routes:{"students(/)":"students","studentgroups/:studentGroupId(/)":"groupNavigation","studentgroups/:studentGroupId/students(/)":"groupStudents","courses/:courseId/exercises/:exerciseId(/)":"navigation","courses/:courseId/exercises/:exerciseId/students(/)":"exerciseStudents","courses/:courseId/students(/)":"courseStudents"},initialize:function(){this.studentView=new codebrowser.view.StudentsView},navigation:function(a,b){codebrowser.app.studentRouter.navigate("#/courses/"+a+"/exercises/"+b+"/students",{replace:!0})},groupNavigation:function(a){codebrowser.app.studentRouter.navigate("#/studentgroups/"+a+"/students",{replace:!0})},exerciseStudents:function(a,b){this.students({courseId:a,exerciseId:b})},courseStudents:function(a){this.students({courseId:a})},groupStudents:function(a){this.students({studentGroupId:a})},students:function(a){var b=this,c=_.after(3,function(){codebrowser.controller.ViewController.push(b.studentView,!0)});if(a&&a.courseId){var d=_.after(1,function(){if(a.exerciseId){var d=codebrowser.model.Exercise.findOrCreate({id:a.exerciseId});b.fetchModel(d,!0,function(){b.studentView.exercise=d,c()})}else c()}),e=codebrowser.model.Course.findOrCreate({id:a.courseId});this.fetchModel(e,!0,function(){b.studentView.course=e,b.studentView.exercise=null,b.studentView.studentGroup=null,d(),c()})}else if(a&&a.studentGroupId){var f=codebrowser.model.StudentGroup.findOrCreate({id:a.studentGroupId});this.fetchModel(f,!0,function(){b.studentView.studentGroup=f,b.studentView.course=null,b.studentView.exercise=null,c(),c()})}else b.studentView.studentGroup=null,b.studentView.course=null,b.studentView.exercise=null,c(),c();var g=new codebrowser.collection.StudentCollection(null,a);this.studentView.collection=g,this.fetchModel(g,!0,c)}}),codebrowser.router.StudentGroupRouter=codebrowser.router.BaseRouter.extend({routes:{"studentgroups(/)":"studentGroups"},initialize:function(){this.studentGroupsView=new codebrowser.view.StudentGroupsView},studentGroups:function(){var a=this,b=new codebrowser.collection.StudentGroupCollection;this.studentGroupsView.collection=b,this.fetchModel(b,!0,function(){codebrowser.controller.ViewController.push(a.studentGroupsView,!0)})}}),codebrowser.router.TagRouter=codebrowser.router.BaseRouter.extend({routes:{"tagnames(/)":"tagnames","tagnames/:tagNameId(/)":"navigation","tagnames/:tagNameId/tags(/)":"tagsForTagName","tagcategories(/)":"listcategories","tagcategories/:tagCategoryId(/)":"navigateToTagnames","tagcategories/:tagCategoryId/tagnames(/)":"tagnames","tagcategories/:tagCategoryId/tagnames/:tagNameId/tags(/)":"tagsForCategory"},initialize:function(){this.tagNamesView=new codebrowser.view.TagNamesView,this.tagsView=new codebrowser.view.TagsView,this.tagCategoriesView=new codebrowser.view.TagCategoriesView},navigation:function(a){codebrowser.app.tagRouter.navigate("#/tagnames/"+a+"/tags",{replace:!0})},navigateToTagnames:function(a){codebrowser.app.tagRouter.navigate("#/tagcategories/"+a+"/tagnames",{replace:!0})},tagnames:function(a){var b,c,d,e,f,g=this;a?(b=new codebrowser.collection.TagNameCollection(null,{tagCategoryId:a,onlySnapshotTags:!0}),c=new codebrowser.collection.TagNameCollection(null,{tagCategoryId:a,onlyExerciseAnswerTags:!0}),d=new codebrowser.collection.TagNameCollection(null,{tagCategoryId:a,unusedTags:!0}),e=codebrowser.model.TagCategory.findOrCreate({id:a})):(b=new codebrowser.collection.TagNameCollection(null,{onlySnapshotTags:!0}),c=new codebrowser.collection.TagNameCollection(null,{onlyExerciseAnswerTags:!0}),f=new codebrowser.collection.TagCategoryCollection(null,null));var h=_.after(5,function(){g.tagNamesView.snapshotTagNames=b,g.tagNamesView.exerciseAnswerTagNames=c,g.tagNamesView.tagCategory=e,g.tagNamesView.unusedTagNames=d,g.tagNamesView.tagCategories=f,codebrowser.controller.ViewController.push(g.tagNamesView,!0)});this.fetchModel(b,!1,h),this.fetchModel(c,!1,h),d?this.fetchModel(d,!1,h):h(),e?(e.fetch(),h()):h(),f?this.fetchModel(f,!1,h):h()},tagsForTagName:function(a){this.tags({tagNameId:a})},tagsForCategory:function(a,b){this.tags({tagNameId:b,tagCategoryId:a})},tags:function(a){var b,c=this,d=codebrowser.model.TagName.findOrCreate({id:a.tagNameId}),e=new codebrowser.collection.TagCollection(null,{tagNameId:a.tagNameId});a.tagCategoryId&&(b=codebrowser.model.TagCategory.findOrCreate({id:a.tagCategoryId}));var f=_.after(3,function(){c.tagsView.tagName=d,c.tagsView.collection=e,c.tagsView.tagCategory=b,codebrowser.controller.ViewController.push(c.tagsView,!0)});this.fetchModel(d,!1,f),this.fetchModel(e,!1,f),b?this.fetchModel(b,!1,f):f()},listcategories:function(){var a=this,b=new codebrowser.collection.TagCategoryCollection(null,{onlySnapshotTags:!0}),c=_.after(1,function(){a.tagCategoriesView.collection=b,a.tagCategoriesView.tagCategories=b,codebrowser.controller.ViewController.push(a.tagCategoriesView,!0)});this.fetchModel(b,!1,c)}}),Raphael.fn.pieChart=function(a,b,c,d){function e(a,b,c,d,e,f){var i=a+c*Math.cos(d*h),j=a+c*Math.cos(e*h),k=b+c*Math.sin(d*h),l=b+c*Math.sin(e*h);return g.path(["M",a,b,"L",i,k,"A",c,c,1,+(e-d>180),1,j,l,"z"]).attr(f)}for(var f,g=this,h=Math.PI/180,i=this.set(),j=-90,k=0,l=["#C5FFBF","#FABEB6","#228BE0","#FFFFFF"],m=0;m<d.length;m++)k+=d[n];for(var n=0;n<d.length;n++){var o=d[n];if(100===o)return f=g.circle(a,b,c),f.attr("fill",l[n]),f.toBack(),i.push(f),i;if(0!==o){f=g.circle(a,b,c),$(f.node).attr("class","snapshot-with-test-results"),f.toBack(),i.push(f);var p=360*o/100,q=l[n],r=e(a,b,c,j,j+p,{fill:q,"stroke-width":0});r.toBack(),j+=p,i.push(r)}}return i};